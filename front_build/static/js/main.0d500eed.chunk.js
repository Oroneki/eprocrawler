(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{196:function(e,t,a){e.exports=a(500)},203:function(e,t,a){},221:function(e,t,a){},23:function(e,t,a){e.exports={downloader:"downloader_downloader__3CLIr",download:"downloader_download__18InX",processo:"downloader_processo__3QYBB",bytes:"downloader_bytes__29w0V",spinner:"downloader_spinner__3wvRE",spinnn:"downloader_spinnn__2luWJ",move:"downloader_move__11RZm"}},48:function(e,t,a){e.exports={scrapper:"processso_scrapper_scrapper__3QoiH",proc:"processso_scrapper_proc__HPjR3",lista:"processso_scrapper_lista__3eMTl",flutua:"processso_scrapper_flutua__1n-Ti"}},489:function(e,t,a){},490:function(e,t){},491:function(e,t){},492:function(e,t){},493:function(e,t){},500:function(e,t,a){"use strict";a.r(t);var n=a(2),o=a.n(n),r=a(9),s=a(0),c=a(104),i=a(6),l=a(3),u=a(27),d=a(28),f=a(37),p=a(36),m=a(38),v=a(4),h=(a(203),a(19)),b=function(e){return function(t){if(13===t.nativeEvent.keyCode||27===t.nativeEvent.keyCode){27===t.nativeEvent.keyCode&&e.setState({showInput:!1},e.focaNaDivPricincipal);var a=e.input.value.toUpperCase();e.setState(function(e){var t=e.destinos;return e.destinos.find(function(e){return e===a})||(t=t.concat(a)),Object(l.a)({},e,{situacao:Object(l.a)({},e.situacao,Object(h.a)({},e.selecionado,a)),showInput:!1,destinos:t})},function(){e.db.addOrAtualiza({numero:e.state.selecionado,situacao:a,data:new Date}),e.focaNaDivPricincipal(),e.botaSituacaoNoCanvas()})}}},g=function(){function e(t){var a=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;Object(u.a)(this,e),this.key=t,this.database=void 0,this.stringKey=void 0,this.dbVersion=void 0,this.addOrAtualiza=function(e){if("undefined"===typeof a.database&&console.log("database not initialized yet..."),!e.situacao)throw console.error("n\xe3o salva sem situa\xe7\xe3o"),new Error("N\xe3o salva sem situa\xe7\xe3o");var t=a.database.transaction(["situacoes"],"readwrite");t.oncomplete=function(){},t.onerror=function(){},t.onabort=function(){},t.objectStore("situacoes").put(e)},this.addOrAtualizaSida=function(e){"undefined"===typeof a.database&&console.log("database not initialized yet...");var t=a.database.transaction(["sida"],"readwrite");t.oncomplete=function(){},t.onerror=function(){},t.onabort=function(){},t.objectStore("sida").put(e)},this.deleteRecord=function(e){"undefined"===typeof a.database&&console.log("database not initialized yet...");var t=a.database.transaction(["situacoes"],"readwrite");t.oncomplete=function(){},t.onerror=function(){},t.onabort=function(){},t.objectStore("situacoes").delete(e)},this.getSidaRecord=function(e,t){"undefined"===typeof a.database&&console.log("database not initialized yet...");var n=a.database.transaction(["sida"],"readonly");n.oncomplete=function(e){},n.onerror=function(){},n.onabort=function(){},n.objectStore("sida").get(e).onsuccess=function(e){t(e)}},this.getAll=function(){return new Promise(function(e,t){var n=a.database.transaction(["situacoes"]).objectStore("situacoes").openCursor(),o=[];n.onsuccess=function(t){var a=t.target.result;if(!a)return e(o);o.push(a.value),a.continue()},n.onerror=function(){return t("miow")}})},this.getProcessoDocs=function(e){return new Promise(function(){var t=Object(r.a)(o.a.mark(function t(n,r){var s,c;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"!==typeof a.database){t.next=5;break}return console.log("database not initialized yet..."),t.next=4,a.setup();case 4:console.log("initiualided");case 5:s=a.database.transaction(["documentos"]),(c=s.objectStore("documentos").get(e)).onerror=function(e){r(e)},c.onsuccess=function(e){var t=e.target.result;n(t)};case 9:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}())},this.stringKey=t,this.dbVersion=n}return Object(d.a)(e,[{key:"setup",value:function(){var e=this;if("undefined"===typeof this.database){var t=window.indexedDB.open(this.stringKey,this.dbVersion);return new Promise(function(a,n){t.onupgradeneeded=function(n){e.database=t.result,e.database.objectStoreNames.contains("situacoes")||e.database.createObjectStore("situacoes",{keyPath:"numero"}),e.database.objectStoreNames.contains("sida")||e.database.createObjectStore("sida",{keyPath:"processo"}),e.database.objectStoreNames.contains("documentos")||(e.database.createObjectStore("documentos",{keyPath:"processo"}),console.log("updated db")),e.database.objectStoreNames.contains("judiciais")||e.database.createObjectStore("judiciais",{keyPath:"dossie"}),a(e)},t.onsuccess=function(t){e.database=t.target.result,a(e)},t.onerror=function(e){console.log("db ERROR",e),n()}})}console.log("db already init...")}}]),e}(),E=a(70),w=a.n(E),y=function(){var e=Object(r.a)(o.a.mark(function e(t,a){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.post(t,a);case 3:n=e.sent,e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(0),console.log("Opa - Erro do axiose"),console.log(e.t0),e.abrupt("return",null);case 11:if(n.status<300){e.next=16;break}return console.log("Opa - Erro no request do post pra delete"),console.log(n.status,n.statusText),console.log(n),e.abrupt("return",null);case 16:return console.log(n.data),e.abrupt("return",n.data);case 18:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t,a){return e.apply(this,arguments)}}(),O=function(e,t){return function(){var a=Object(r.a)(o.a.mark(function a(n){var r,s,c;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,y(t,n);case 2:if(r=a.sent){a.next=5;break}return a.abrupt("return",null);case 5:return s=r.certo,c=r.errado,s.forEach(function(t){return e.state.manejar("deletou",t)}),c.forEach(function(t){return e.state.manejar("falhou",t)}),a.abrupt("return",r);case 9:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()},k=a(11),P=function(e){return function(t){if(console.log(">",t.nativeEvent.key," - ",t.nativeEvent.keyCode),!e.state.showInput&&!e.state.showGotoPageInput&&"editor"!==document.activeElement.id)switch(t.nativeEvent.keyCode){case 70:e.setState(function(t){var a=t.selecionado,n=e.state.processosList,o=n.findIndex(function(e){return e===a}),r=n[o+1];return void 0===r&&(r=n[0]),e.loadPDF(r),{selecionado:r}},function(){return e.focaNaDivPricincipal()});break;case 68:e.setState(function(t){var a,n=t.selecionado,o=e.state.processosList,r=o.findIndex(function(e){return e===n});return a=0===r?o[o.length-1]:o[r-1],e.loadPDF(a),{selecionado:a}},function(){return e.focaNaDivPricincipal()});break;case 74:e.setState(function(e){var t=e.situacao[e.selecionado];if("0"===t)return null;if(!t)return Object(l.a)({},e,{situacao:Object(l.a)({},e.situacao,Object(h.a)({},e.selecionado,e.destinos[0]))});var a=e.destinos.findIndex(function(e){return e===t});return a===e.destinos.length-1?Object(l.a)({},e,{situacao:Object(l.a)({},e.situacao,Object(h.a)({},e.selecionado,e.destinos[0]))}):Object(l.a)({},e,{situacao:Object(l.a)({},e.situacao,Object(h.a)({},e.selecionado,e.destinos[a+1]))})},function(){var t=JSON.stringify(e.state);localStorage.setItem(e.localStorageKey,t),e.db.addOrAtualiza({numero:e.state.selecionado,situacao:e.state.situacao[e.state.selecionado],data:new Date}),e.pdfGotoPage(e.state.paginaAtual)});break;case 73:e.setState(function(e){return"0"===e.selecionado?null:Object(l.a)({},e,{showInput:!0})},function(){return setTimeout(function(){e.input&&(e.input.value="",e.input.focus())},0)});break;case 71:e.setState(function(e){return"0"===e.selecionado?null:Object(l.a)({},e,{showGotoPageInput:!0})},function(){return setTimeout(function(){e.gotoinput&&(e.gotoinput.value="",e.gotoinput.focus())},0)});break;case 109:var a=localStorage.getItem(e.localStorageKey);if(null===a)return;var n=JSON.parse(a);e.setState(n);break;case 81:e.pdfDiminuiZoom();break;case 87:e.pdfAumentaZoom();break;case 65:e.pdfPagAnterior();break;case 83:e.pdfPagProxima();break;case 186:e.pdfBaixaVisualizacao();break;case 76:e.pdfSobeVisualizacao();break;case 192:e.limpaSituacao();break;case 80:console.log("aqui"),e.setState(function(e){return Object(l.a)({},e,{dossieProcesso:[].concat(Object(k.a)(e.dossieProcesso),[[e.selecionado,e.pageProcessos[0],e.situacao[e.selecionado]]])})},function(){e.db.addOrAtualiza({data:new Date,numero:e.state.selecionado,situacao:e.state.situacao[e.state.selecionado],judicial:e.state.pageProcessos[0]})});break;default:console.warn("%c handlePress","background-color: #ccc;",t)}}},x=function(e){return function(t,a){e.setState(function(n){var o,r=e.state.manejo;switch(t){case"deletou":var s=new Set(r.deletadosOk.values());if(s.forEach(function(t){e.db.deleteRecord(t)}),s.add(a),o=Object(l.a)({},r,{deletadosOk:s}),r.errosDelete.has(a)){var c=new Set(r.errosDelete.values());c.delete(a),o=Object(l.a)({},o,{errosDelete:c})}break;case"falhou":var i=new Set(r.errosDelete.values());i.add(a),o=Object(l.a)({},r,{errosDelete:i});break;case"copiou":var u=new Set(r.copiados.values());u.add(a),o=Object(l.a)({},r,{copiados:u});break;default:return null}return Object(l.a)({},n,{manejo:o})})}},S=function(e){var t=Object(s.useState)(!1),a=Object(i.a)(t,2),n=a[0],o=a[1];return s.createElement("button",{onClick:function(){fetch("http://localhost:".concat(e.portServer,"/toggle_lock")).then(function(e){return e.json()}).then(function(e){console.log("BUTTON LOCK RES:",e),o(!n)}).catch(function(e){return console.error("ERROR ",e)})},className:"button mutex",style:{width:"280px"}},"Toggle Mutex ",n?"(paused)":"")},j={tipo:"JANELINHA_INFO_PROCESSO",parseFunction:function(e){var t=e.split("|@@|"),a=t[0],n=t[1].split("|##|"),o=[],r=!0,s=!1,c=void 0;try{for(var i,l=n[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var u=i.value;if(u.length<5)return;var d=u.split("|"),f={nome_doc:d[0],ordem:parseInt(d[1],10),pag_inicio:parseInt(d[2],10),pag_fim:parseInt(d[3],10),situacao:d[4],tamanho:parseInt(d[5],10)};o.push(f)}}catch(p){s=!0,c=p}finally{try{r||null==l.return||l.return()}finally{if(s)throw c}}return{processoImpuro:a,infos:o}},callback:null},D={tipo:"DOWNLOAD_FINISHED",parseFunction:function(e){var t=e.split("|");return{processo_filename:t[0],final_filepath:t[1]}},callback:null},N={tipo:"D_REPORTER",parseFunction:function(e){var t=e.split("|");return{processo_filename:t[0],bytes:parseInt(t[1],10)}},callback:null},C={tipo:"ALL_DOWNLOADS_FINISHED",parseFunction:function(e){return null},callback:null},_=(a(221),a(23)),R=a.n(_),A={showInput:!1,situacao:{},selecionado:"0",destinos:["REVISAO","AGUARDA INSCRI\xc7\xc3O","REQUERIMENTOS","INSCRI\xc7\xc3O-AJUIZAMENTO"],paginaAtual:0,totalPaginas:0,carregando:!1,showGotoPageInput:!1,separador:",",botaoClickAtivo:"",botoesClickClicados:[],processosList:[],copyList:[],loadPDF:function(){return{}},focaNaDivPrincipal:function(){return{}},setState:function(){return{}},manejar:function(){return{}},manejo:{copiados:new Set,errosDelete:new Set,deletadosOk:new Set},loading:!1,downloaded:new Set,pageProcessos:["teste","testeaa"],dossieProcesso:[]},I=Object(s.createContext)(A),L={},T=function(e){var t=s.useContext(I),a=new Set(Object(k.a)(t.processosList).filter(function(e){return t.downloaded.has(e)})),n=new Set(Object(k.a)(t.downloaded).filter(function(e){return!new Set(t.processosList).has(e)})),o=(new Set(Object(k.a)(t.processosList).filter(function(e){return!t.downloaded.has(e)})),t.processosList.length-a.size),r=s.useMemo(function(){return o},[t.processosList]),c=Object(s.useState)(L),u=Object(i.a)(c,2),d=u[0],f=u[1],p=Object(s.useState)(!0),m=Object(i.a)(p,2),v=m[0],b=m[1],g=Object.values(d);return s.useEffect(function(){var e=function(e){console.log("%c DETAIL",e.detail),e.detail&&e.detail.processo_filename&&e.detail.bytes&&f(function(t){return Object(l.a)({},t,Object(h.a)({},e.detail.processo_filename,e.detail))})},t=function(e){console.log("REMOVE: ",e.detail),e.detail&&e.detail.processo_filename&&f(function(t){var a=Object(l.a)({},t);return delete a[e.detail.processo_filename],a})},a=function(e){console.log(e.detail)},n=function(){return setTimeout(function(){0===g.length&&(console.log("hide"),b(!1))},5e3)};return window.addEventListener(N.tipo,e),window.addEventListener(D.tipo,t),window.addEventListener(j.tipo,a),window.addEventListener(C.tipo,n),function(){window.removeEventListener(N.tipo,e),window.removeEventListener(D.tipo,t),window.removeEventListener(j.tipo,a),window.removeEventListener(C.tipo,n)}},[]),0===g.length?null:v&&s.createElement("div",{className:R.a.downloader},g.map(function(e){return s.createElement(F,{key:e.processo_filename,processo_filename:e.processo_filename,bytes:e.bytes})}),s.createElement("progress",{style:{margin:"2px"},className:"progress is-small is-dark",max:"100"},"30%"),s.createElement(M,{downloaded:r-o,total:r}),s.createElement(M,{downloaded:t.downloaded.size-n.size,total:t.processosList.length,bulmaClass:"is-warning"}),s.createElement("span",{style:{fontSize:"8px"},onClick:function(){return b(!1)}},"[close]"))},F=s.memo(function(e){return console.log("css",R.a),console.log("css.download",R.a.download),s.createElement("div",{key:e.processo_filename,className:R.a.download},s.createElement(z,{color:"#ccc"}),s.createElement("span",{className:R.a.processo},e.processo_filename),s.createElement("span",{className:R.a.bytes},e.bytes))}),z=function(e){return s.createElement("span",{className:R.a.move},s.createElement("svg",{className:R.a.spinner,viewBox:"0 0 100 100",width:"20px",height:"20px"},s.createElement("defs",null,s.createElement("mask",{id:"m"},s.createElement("circle",{cx:"50",cy:"50",fill:"white",r:"50"}),s.createElement("circle",{cx:"50",cy:"50",fill:"black",r:"20"}),s.createElement("rect",{x:"50",y:"50",width:"50",height:"50",fill:"black"}))),s.createElement("circle",{cx:"52",cy:"52",fill:e.color,r:"50",mask:"url(#m)"})))};z.defaultProps={color:"#000",bgcolor:"#ccc"};var M=function(e){return s.createElement("progress",{style:{margin:"2px"},className:"progress ".concat(e.bulmaClass?e.bulmaClass:"is-danger"," is-small"),value:"".concat(e.downloaded),max:"".concat(e.total)},100*Math.round(e.downloaded/e.total),"%")},K=a(48),B=a.n(K),G=function(e){return console.log("olha: props",e),s.createElement("div",{className:B.a.scrapper},e.processos.map(function(e){return s.createElement("span",{key:e,className:B.a.proc},e)}))},V=function(e){console.log("render");var t=s.useContext(I),a=s.useState(!1),n=Object(i.a)(a,2),o=n[0],r=n[1];return s.useEffect(function(){r(!0),setTimeout(function(){return r(!1)},300)},[e.info.length]),s.createElement(s.Fragment,null,s.createElement("div",{className:B.a.lista},s.createElement("table",null,s.createElement("thead",null,s.createElement("tr",null,s.createElement("td",null,"Dossi\xea\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"),s.createElement("td",null,"Processo\xa0\xa0\xa0\xa0\xa0\xa0\xa0"),s.createElement("td",null,"Destino"),s.createElement("td",null,"X"))),s.createElement("tbody",null,e.info.map(function(a){return s.createElement("tr",{style:{color:t.processosList.includes(a[0])?"inherit":"grey"},key:a[0]},s.createElement("td",null,a[0]),s.createElement("td",null,a[1]),s.createElement("td",null,a[2]),s.createElement("td",null,s.createElement("button",{style:{padding:"2px",borderRadius:"50%",fontSize:"9px"},onClick:function(){return function(a){var n=Object(k.a)(e.info).filter(function(e){return e[0]!==a});e.deleteDossie(a),t.setState({dossieProcesso:n})}(a[0])},className:"foi"},"x")))})))),o&&s.createElement("div",{className:B.a.flutua},e.info.slice(-1).length>0?e.info.slice(-1)[0][1]:null))},W=a(193),q=a(194),H=a(195),U=a(105);a(488);var J=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(f.a)(this,Object(p.a)(t).call(this,e))).debounceBabel=void 0,a.codeBlockDisplayRef=s.createRef(),a.sendCodeToEndpoint=Object(r.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(". endpoint: ",a.state.selectedEndPoint),e.next=3,y(a.state.selectedEndPoint,a.state.transpiledCode);case 3:t=e.sent,console.log(t);case 5:case"end":return e.stop()}},e)})),a.handleChange=function(e){console.log(e),e&&e.target&&e.target.value?a.debounceBabel(e.target.value):console.log("algo falta")},a.getHtml=function(){return{__html:a.state.highlightedCode}},a.toggleEndpoint=function(){var e,t=a.props.endpoints.findIndex(function(e){return a.state.selectedEndPoint===e});console.log("Index ".concat(t," do endpoint ").concat(a.state.selectedEndPoint)),e=t+1===a.props.endpoints.length?0:t+1,a.setState({selectedEndPoint:a.props.endpoints[e]})},a.transformBabel=function(e){var t;try{t=W.transform(e,{presets:["es2016"],plugins:[q,H]}).code.replace("'use strict'","").trim()}catch(o){return void console.log("erro babel transform try block")}var n=U.highlight(t,U.languages.javascript,"javascript");a.setState({transpiledCode:t,highlightedCode:n})},a.state={transpiledCode:"",highlightedCode:"",selectedEndPoint:e.endpoints[0],code:"console.log('teste')\n      const massa = (a) => console.log('>>', a, '<<');\n      Object.keys({a: 1, b: 2}).map(k => massa(k)",on:a.props.on||!1},a.debounceBabel=function(e,t,a){var n;return function(){var o=this,r=arguments,s=a&&!n;clearTimeout(n),n=setTimeout(function(){n=null,a||e.apply(o,r)},t),s&&e.apply(o,r)}}(a.transformBabel,700,!1),a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=s.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:2}},s.createElement("button",{onClick:function(){return e.setState({on:!0})}},"EDITOR"));return this.state.on?s.createElement("div",{style:{padding:2}},s.createElement("div",{style:{display:"flex",alignItems:"start",justifyContent:"center"}},s.createElement("div",{style:{display:"flex",flexDirection:"column",flex:1}},s.createElement("div",null,s.createElement("span",null,s.createElement("b",null,"EndPoint:")," "),s.createElement("a",{onClick:this.toggleEndpoint},this.state.selectedEndPoint),s.createElement("span",null,"  "),s.createElement("a",{onClick:function(){return e.setState({on:!1})}}," (close editor)")),s.createElement("textarea",{id:"editor",rows:20,style:{width:"100%",padding:10,fontFamily:"monospace",fontSize:17,lineHeight:"1.8em",backgroundColor:"rgb(251, 251, 255)",border:0,margin:5,flex:1},onChange:this.handleChange},this.state.code)),s.createElement("div",{style:{width:"50%",padding:4,margin:5,backgroundColor:"#fcfdfe",flex:1}},s.createElement("pre",{ref:this.codeBlockDisplayRef,dangerouslySetInnerHTML:this.getHtml()}))),s.createElement("button",{style:{width:"100%"},onClick:this.sendCodeToEndpoint},"Mandar C\xf3digo !"),s.createElement("br",null),s.createElement("br",null),s.createElement("br",null),s.createElement("br",null),s.createElement("br",null)):t}}]),t}(s.Component),Z=s.memo(function(e){var t=e.dst,a=e.copy,n=e.situacao,o=e.separador,r=e.botaoAtivo,c=e.clicado,i=Object.keys(n).filter(function(e){return n[e]===t});return i.length>0?s.createElement("div",{className:"listagem-div"},s.createElement("button",{style:{display:"inline-block",backgroundColor:r?"#a0d6ff":c?"rgba(255, 255, 255, 0)":"none",color:c?"rgb(137, 137, 137)":"black"},onClick:function(){return a(i.join(o),t)}}," COPIAR ",t," (",i.length,")")):null}),Q=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(f.a)(this,Object(p.a)(t).call(this,e))).rectStyle={fill:"rgba(50, 50, 255, 1)",stroke:"rgb(255,255,255)",strokeWidth:1},a.rectNodes=[null,null,null,null,null,null,null,null,null,null,null,null],a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){if(console.log("animation mounted"),document)document.getElementById("anim_svg")}},{key:"componentWillUnmount",value:function(){console.log("anim will unmount")}},{key:"render",value:function(){var e=this;return s.createElement("div",{className:"loading-component"},s.createElement("svg",{id:"anim_svg",width:"180",height:"50"},s.createElement("g",{ref:function(t){return e.rectNodes[0]=t}}," ",s.createElement("rect",{x:"0",y:"0",width:"10",height:"50",style:this.rectStyle})),s.createElement("g",{ref:function(t){return e.rectNodes[1]=t}}," ",s.createElement("rect",{x:"15",y:"0",width:"10",height:"50",style:this.rectStyle})),s.createElement("g",{ref:function(t){return e.rectNodes[2]=t}}," ",s.createElement("rect",{x:"30",y:"0",width:"10",height:"50",style:this.rectStyle})),s.createElement("g",{ref:function(t){return e.rectNodes[3]=t}}," ",s.createElement("rect",{x:"45",y:"0",width:"10",height:"50",style:this.rectStyle})),s.createElement("g",{ref:function(t){return e.rectNodes[4]=t}}," ",s.createElement("rect",{x:"60",y:"0",width:"10",height:"50",style:this.rectStyle})),s.createElement("g",{ref:function(t){return e.rectNodes[5]=t}}," ",s.createElement("rect",{x:"75",y:"0",width:"10",height:"50",style:this.rectStyle})),s.createElement("g",{ref:function(t){return e.rectNodes[6]=t}}," ",s.createElement("rect",{x:"90",y:"0",width:"10",height:"50",style:this.rectStyle})),s.createElement("g",{ref:function(t){return e.rectNodes[7]=t}}," ",s.createElement("rect",{x:"105",y:"0",width:"10",height:"50",style:this.rectStyle})),s.createElement("g",{ref:function(t){return e.rectNodes[8]=t}}," ",s.createElement("rect",{x:"120",y:"0",width:"10",height:"50",style:this.rectStyle})),s.createElement("g",{ref:function(t){return e.rectNodes[9]=t}}," ",s.createElement("rect",{x:"135",y:"0",width:"10",height:"50",style:this.rectStyle})),s.createElement("g",{ref:function(t){return e.rectNodes[10]=t}}," ",s.createElement("rect",{x:"150",y:"0",width:"10",height:"50",style:this.rectStyle})),s.createElement("g",{ref:function(t){return e.rectNodes[11]=t}}," ",s.createElement("rect",{x:"165",y:"0",width:"10",height:"50",style:this.rectStyle}),"        ")),s.createElement("br",null),s.createElement("span",null,"C A R R E G A N D O..."))}}]),t}(s.Component),X=function(e,t){return function(a){if(t.has(a))return console.info("cached value"),t.get(a);var n=e(a);return console.info("   >   new key for cache >",a,n,arguments),t.set(a,n),n}},Y=new Map,$=new Map,ee=X(function(e){return Array.from(e).reduce(function(e,t,a){return t.charCodeAt(0)+e},0)%360},Y),te=X(function(e){var t=ee(e);return"hsla(".concat(t,", 100%, 96%, 0.9)")},$),ae=s.memo(function(e){var t=e.processo,a=e.procObj;a||(a={});var n=a["Nome Respons\xe1vel"]||"",o=a["Nome Tarefa Atual"]||"",r=a["Data Entrada Atividade"]||"",c=a[de],i=t;a&&a["N\xfamero Processo"]&&(i=a["N\xfamero Processo"].replace("D","").trim());var l=(new Date).valueOf(),u=r.split("/"),d=new Date("".concat(u[1],"/").concat(u[0],"/").concat(u[2])),f=c&&l-c.valueOf()>1728e6,p=c&&c.valueOf()-d.valueOf()<36e5,m=Math.floor((l-d.valueOf())/864e5),v=a&&a["NI Contribuinte"]&&function(e){var t=e.replace(/\D/g,"");switch(t.length){case 11:case 14:return t.substr(6,2);default:return"??"}}(a["NI Contribuinte"]),h=a&&a["NI Contribuinte"];return s.createElement(I.Consumer,null,function(a){var l=a.selecionado,u=a.situacao,d=a.loadPDF,b=a.setState,g=a.focaNaDivPrincipal,E=a.manejo;return s.createElement("span",{className:["processo-div-component",e.downloaded&&"processo-div-component-baixado"].join(" ")},(f||m>28||p)&&s.createElement("span",{className:"obsdata1"},f&&"Class Antiga\n |",m>28&&"Processo Antigo ("+m+"d)\n | ",p&&s.createElement("span",{className:"opa"},"OPA!")),s.createElement("span",{className:"span-processo-title",style:l===t?{color:"rgb(255, 255, 255)",fontSize:"1.2em",backgroundColor:"#f20052"}:{},onClick:function(){d(t),b({selecionado:t},g)}},i),u[t]&&s.createElement("div",{className:"div-processo-caracteristicas div-wrap-flex",style:{backgroundColor:te(u[t]),border:"2px solid rgb(178, 189, 239)",borderRadius:"12px",fontSize:"0.6em"}},u[t]),n&&s.createElement("div",{className:"div-processo-caracteristicas div-wrap-flex"},n.split(" ")[0]),o&&s.createElement("div",{className:"div-processo-caracteristicas div-wrap-flex"},o),"REQUERIMENTOS"===u[t]&&s.createElement("div",{className:"div-processo-caracteristicas div-wrap-flex"},h," ",s.createElement("div",{className:"div-processo-caracteristicas-digito"},v)),c&&s.createElement("div",{className:"div-processo-caracteristicas div-wrap-flex",style:{fontSize:"0.8em"}},c.toLocaleDateString()),r&&s.createElement("div",{className:"div-processo-caracteristicas div-wrap-flex",style:{fontSize:"0.85em"}},r," ","(",m,"d)"),E.copiados.has(t)&&!E.deletadosOk.has(t)&&s.createElement("div",{className:"div-processo-caracteristicas div-wrap-flex obscopiado"},"COPIADO"),E.errosDelete.has(t)&&s.createElement("div",{className:"div-processo-caracteristicas div-wrap-flex obserro"},"ERRO DELETE :("),E.deletadosOk.has(t)&&s.createElement("div",{className:"div-processo-caracteristicas div-wrap-flex obsdeletado"},"DELETADO"))})}),ne=function(e){return s.useEffect(function(){var t="".concat("","/sw/sw_src/worker.js");console.log("workerAddr: ",t);var a=new Worker(t);console.log(a),a.onerror=function(e){console.error("ERROR WORKER => ",e)},a.onmessage=function(e){!function(e){var t=e.data;console.log("WORKER DATA: ",t.tipo," : ",t);var a=new CustomEvent(t.tipo,{detail:t.payload});window.dispatchEvent(a)}(e)},a.postMessage({tipo:"WEBSOCKET_PORT",payload:"ws://localhost:".concat(e.wsPort,"/ws")}),a.postMessage({tipo:"DATABASE_INFO_START",payload:{name:e.dbName,version:e.dbVersion}})},[]),null},oe=function(e){var t=e.split("/"),a=new Date("".concat(t[2],"-").concat(t[1],"-").concat(t[0]));return console.log("%cparseDate  ",'background-color: "#ccc";',e,"--\x3e",a),a},re=function(e){var t=Object(s.useState)([]),a=Object(i.a)(t,2),n=a[0],c=a[1],l=Object(s.useState)(!1),u=Object(i.a)(l,2),d=u[0],f=u[1],p=Object(s.useState)(!1),m=Object(i.a)(p,2),v=m[0],h=m[1],b=Object(s.useState)(!1),g=Object(i.a)(b,2),E=g[0],y=g[1],O=Object(s.useState)([]),P=Object(i.a)(O,2),x=P[0],S=P[1],j=s.useRef(),D=function(t){var a=t.detail;c(function(t){if(t.filter(function(e){return e.processo===a.processo}).length>0)return t;var n=[].concat(Object(k.a)(t),[a]).sort(function(t,a){var n=oe(e.eprocessoData[t.processo]["Data Entrada Atividade"]),o=oe(e.eprocessoData[a.processo]["Data Entrada Atividade"]);return n.valueOf()<o.valueOf()?1:-1});return console.log("%c_______newState_______:","background-color: purple; color: white;",n),S(N(n)),n})},N=function(t){return t.filter(function(e){return e.ok}).filter(function(t){return t.res.every(function(a){return oe(e.eprocessoData[t.processo]["Data Entrada Atividade"]).valueOf()<=oe(a.dataInscricao).valueOf()})})};console.log("inscritos",x);var C=function(){console.log("%cREMOVE LISTENERS INICIO","background-color: red; color: white;"),window.removeEventListener("FRONT_NOVO_SIDA_REPORT",D),f(!1),y(!0),console.log("%cREMOVE LISTENERS FIM","background-color: red; color: white;")},_=function(){var t=Object(r.a)(o.a.mark(function t(){var a,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("%cPROCURA","background-color: red; color: white;"),f(!0),window.addEventListener("FRONT_NOVO_SIDA_REPORT",D),window.addEventListener("FRONT_END_SIDA_REPORT",C,{once:!0}),a=Object.keys(e.situacoes).filter(function(t){return"AGUARDA INSCRI\xc7\xc3O"===e.situacoes[t]}).join("|"),t.next=7,w.a.post("".concat(e.host,"/novo_sida"),a);case 7:n=t.sent,console.log("%cPROCURA -> fim","background-color: red; color: white;",n);case 9:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();return s.createElement("section",{className:"container"},n.map(function(t){return s.createElement(se,{key:t.processo,abreProcesso:e.loadPdf,consulta:t,eprocDados:e.eprocessoData[t.processo],arquiva:x.filter(function(e){return e.processo===t.processo}).length>0})}),!E&&s.createElement("button",{onClick:_,className:"button ".concat(d?"is-loading":"")},"Pesquisa Sida Novo"),x.length>0&&s.createElement("div",{className:"level"},s.createElement("div",{className:"level-item"},s.createElement("textarea",{ref:j,className:"textarea"})),s.createElement("div",{className:"level-item"},s.createElement("button",{className:"button",onClick:function(){j.current.focus(),j.current.value=x.map(function(e){return e.processo}).join(","),j.current.select(),document.execCommand("copy"),h(!0)}},"copy inscritos"),v&&s.createElement("button",{className:"button",onClick:function(){var t=x.map(function(e){return e.processo}).join(",");e.deleteArquivos(t)}},"delete inscritos"))))},se=s.memo(function(e){var t,a=Object(s.useState)(!1),n=Object(i.a)(a,2),o=n[0],r=n[1],c=e.consulta.ok&&e.consulta.res.every(function(e){return e.situacao.includes("EXTINT")}),l=e.consulta.ok&&new Set(e.consulta.res.map(function(e){return e.situacao})),u=e.consulta.ok&&1===l.size;return c&&u&&(t=1===e.consulta.res.length?"Processo ".concat(e.consulta.processo," com a inscri\xe7\xe3o ").concat(e.consulta.res[0].inscricao.replace(/\D/g,""),' na situa\xe7\xe3o "').concat(e.consulta.res[0].situacao,'". Encaminhado na data ').concat(e.eprocDados["Data Entrada Atividade"],", passou pelo TRATAPFN, mas ainda n\xe3o foi gerada nova inscri\xe7\xe3o porque a situa\xe7\xe3o provavelmente impede a inscri\xe7\xe3o autom\xe1tica."):"Processo ".concat(e.consulta.processo," com as inscri\xe7\xf5es ").concat(e.consulta.res.map(function(e){return e.inscricao.replace(/\D/g,"")}).join(", "),', todas na situa\xe7\xe3o "').concat(e.consulta.res[0].situacao,'". Encaminhado na data ').concat(e.eprocDados["Data Entrada Atividade"],", passou pelo TRATAPFN, mas ainda n\xe3o foi gerada nenhuma nova inscri\xe7\xe3o porque a situa\xe7\xe3o provavelmente impede a inscri\xe7\xe3o autom\xe1tica.")),s.createElement("div",{className:"",style:{marginBottom:"2rem",backgroundColor:e.arquiva?"#23d16047":"#eee",padding:"0.8rem"}},s.createElement("div",{className:""},s.createElement("a",{onClick:function(){return e.abreProcesso(e.consulta.processo)}},s.createElement("p",{className:"title is-5"},e.consulta.processo)),s.createElement("p",{className:"subtitle is-6"},e.eprocDados["Data Entrada Atividade"])),s.createElement("div",{className:""},e.consulta.res&&s.createElement("table",{className:"table is-fullwidth"},s.createElement("tbody",{className:"tbody"},e.consulta.res.map(function(e){return s.createElement(ce,{key:e.insc,inscricao:e})})))),s.createElement("div",null,c&&u&&s.createElement("button",{className:"button is-small ".concat(o&&"is-primary"),onClick:function(){return r(!o)}},o?"fechas":"despacho"),s.createElement("p",{className:"content despacho__text"},o&&t)))}),ce=function(e){return s.createElement("tr",{style:{fontSize:"0.9em"}},s.createElement("td",null,e.inscricao.inscricao),s.createElement("td",null,e.inscricao.dataInscricao),s.createElement("td",null,e.inscricao.situacao))},ie=function(e){return s.useEffect(function(){var t=function(t){var a=t.detail.final_filepath.split("\\").pop().replace(".pdf","");console.log("%cDOWNLOAD FINISED:","background-color: red; font-size: 1.5em; color: white",t.detail,"\n",a),e.addProcesso(a)};return window.addEventListener(D.tipo,t),function(){return window.removeEventListener(D.tipo,t)}}),null},le=function(e){var t=Object(s.useContext)(I),a=s.useState(!1),n=Object(i.a)(a,2),o=n[0],r=n[1],c=new Set(Object(k.a)(t.downloaded).filter(function(e){return!new Set(t.processosList).has(e)}));console.log("%c    difs      -> ","background-color: deeppurple",c);var l=Object(k.a)(c).join(",");return c.size>1?s.createElement("div",null,s.createElement("button",{onClick:function(){return r(!o)},className:"button is-small is-fullwidth"},o?"close":"DELETE DIFF"),o&&s.createElement("span",null,l),o&&s.createElement("button",{onClick:function(){console.log("deleting... ",c.size," files"),console.log("",l),e.deleteFiles(l).then(function(e){console.log(e),r(!1)}).catch(function(e){return console.error(e)})},className:"button is-small is-danger is-fullwidth"},"CONFIRMA DELETE ?")):null},ue="__META__",de="dataSitu",fe=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(f.a)(this,Object(p.a)(t).call(this,e))).eprocessoData=void 0,a.colecao=void 0,a.input=void 0,a.gotoinput=void 0,a.PDF=void 0,a.localStorageKey=void 0,a.sortKey=void 0,a.handlePress=void 0,a.addSituacao=void 0,a.deleteArquivos=void 0,a.ws=void 0,a.db=void 0,a.dbVersion=void 0,a.currentPDFRendertask=void 0,a.textarea=void 0,a.canvas=void 0,a.outerDiv=void 0,a.divPrincipal=void 0,a.canvasRenderContext2D=void 0,a.currentPdf=void 0,a.interval=void 0,a.atualizaColecao=function(e,t){a.colecao[e]=t},a.copy=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";a.textarea.focus(),a.textarea.value=e,a.textarea.select(),document.execCommand("copy");var n=e.split(",");a.setState(function(e){var a=new Set(e.manejo.copiados.values());return n.forEach(function(e){return a.add(e)}),{botaoClickAtivo:t,copyList:n,manejo:Object(l.a)({},e.manejo,{copiados:a})}}),""!==t&&a.setState(function(e){return{botoesClickClicados:e.botoesClickClicados.some(function(e){return e===t})?e.botoesClickClicados:e.botoesClickClicados.concat(t)}}),a.textarea.blur()},a.goToPageInputAction=function(e){if(13===e.nativeEvent.keyCode||27===e.nativeEvent.keyCode)if(27!==e.nativeEvent.keyCode){var t=parseInt(a.gotoinput.value,10);t<0&&(t=a.state.totalPaginas+1+t),a.setState({showGotoPageInput:!1},function(){return a.pdfGotoPage(t)})}else a.setState({showGotoPageInput:!1},a.focaNaDivPricincipal)},a.handleGetProcesso=Object(r.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.currentPdf.page){e.next=2;break}return e.delegateYield(o.a.mark(function e(){var t,n,r,s,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.currentPdf.page.getTextContent();case 2:for(e.t0=function(e){return e.str},t=e.sent.items.map(e.t0).join(""),n=/\d{5,7}\-\d{2}\.\d{4}\.\d\.\d{2}\.\d{4}/gm,r=[];null!==(s=n.exec(t));)s.index===n.lastIndex&&n.lastIndex++,s.forEach(function(e,t){console.log("Found match, group ".concat(t,": ").concat(e)),r.push(e)});c=Array.from(new Set(r)),console.log("matches: %O",c),a.setState({pageProcessos:c});case 10:case"end":return e.stop()}},e)})(),"t0",2);case 2:case"end":return e.stop()}},e)})),a.loadPDF=function(){var e=Object(r.a)(o.a.mark(function e(t){var n,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Object.keys(a.eprocessoData).length){e.next=3;break}return console.error("data FAIL",a.eprocessoData),e.abrupt("return");case 3:if(a.interval&&window.clearInterval(a.interval),a.setState({carregando:!0,loading:!0}),a.canvas.width=a.canvas.width,null!==a.canvas){e.next=8;break}return e.abrupt("return");case 8:return e.prev=8,a.currentPdf.numeroProcesso=t,e.next=12,a.PDF.getDocument("http://localhost:".concat(a.props.portServer,"/pdf/").concat(t,".pdf"));case 12:if(n=e.sent,a.currentPdf.numeroProcesso===t){e.next=16;break}throw console.error("Erro! Promessa do PDF atrasou. \n        PDF atual: ".concat(a.currentPdf.numeroProcesso,". PDF carrgeado: ").concat(t)),"Erro de carregamento - atraso";case 16:a.currentPdf.pdf=n,r=n.numPages,a.currentPdf.totalPages=r,a.pdfGotoPage(r),a.setState({totalPaginas:r,paginaAtual:r,loading:!1}),e.next=37;break;case 23:if(e.prev=23,e.t0=e.catch(8),console.log("N\xe3o existe o pdf ".concat(t)),a.interval&&window.clearInterval(a.interval),a.canvasRenderContext2D){e.next=29;break}return e.abrupt("return");case 29:a.canvasRenderContext2D.fillStyle="#eef",a.canvasRenderContext2D.fillRect(0,0,1e3,1e3),a.canvasRenderContext2D.fillStyle="#990000",a.canvasRenderContext2D.strokeStyle="#000",a.canvasRenderContext2D.font="48px Arial",a.canvasRenderContext2D.fillText("".concat(t," n\xe3o baixado"),100,300),a.eprocessoData[t][a.sortKey]=a.eprocessoData[t][a.sortKey]+15,a.setState(function(e){return{processosList:e.processosList.sort(function(e,t){return a.eprocessoData[e][a.sortKey]>a.eprocessoData[t][a.sortKey]?1:-1})}});case 37:case"end":return e.stop()}},e,null,[[8,23]])}));return function(t){return e.apply(this,arguments)}}(),a.botaSituacaoNoCanvas=function(){},a.animaCanvas=function(){var e=Math.floor(100*Math.random()),t=Math.floor(100*Math.random());a.canvasRenderContext2D.fillStyle="rgba(".concat(t,", ").concat(e,", ").concat(3*e-t,", 0.1)"),a.interval=window.setInterval(function(){a.canvasRenderContext2D.fillStyle="rgba(".concat(t,", ").concat(e,", ").concat(3*e-t,", 0.1)");var n=Math.floor(720*Math.random()),o=Math.floor(720*Math.random()),r=Math.floor(100*Math.random()),s=Math.floor(100*Math.random());a.canvasRenderContext2D.fillRect(n,o,n+r,o+s),a.canvasRenderContext2D.fillRect(n,o,n-r,o-s),a.canvasRenderContext2D.fillRect(o,n,n+r,o+s),a.canvasRenderContext2D.fillStyle="rgba(0, 0, 0, 0.5)",a.canvasRenderContext2D.font="60px sans-serif",a.canvasRenderContext2D.fillText("Carregando",250,160)},300)},a.limpaSituacao=function(){a.setState(function(e){var t=e.situacao;return delete t[e.selecionado],{situacao:t}})},a.addBaixado=function(e){a.state.downloaded.has(e)||a.setState(function(t){var a=t.downloaded;return a.add(e),{downloaded:a}})},a.deleteArquivos=O(Object(v.a)(Object(v.a)(a)),"http://localhost:".concat(e.portServer,"/deletefiles")),a.localStorageKey=a.props.data[ue].codEquipe+a.props.data[ue].pasta_download||"none",a.eprocessoData=a.props.data,a.atualizaColecao=a.atualizaColecao.bind(Object(v.a)(Object(v.a)(a))),a.deleteArquivos=a.deleteArquivos.bind(Object(v.a)(Object(v.a)(a))),a.handlePress=P(Object(v.a)(Object(v.a)(a))),a.addSituacao=b(Object(v.a)(Object(v.a)(a))),a.colecao={},a.PDF=a.props.PDFJS,a.loadPDF=a.loadPDF.bind(Object(v.a)(Object(v.a)(a))),a.addBaixado=a.addBaixado.bind(Object(v.a)(Object(v.a)(a))),a.focaNaDivPricincipal=a.focaNaDivPricincipal.bind(Object(v.a)(Object(v.a)(a))),a.currentPdf={pdf:null,page:null,zoom:1.5,verticalOffset:0,pageNumber:null,totalPages:null,canvasHeight:.95*window.outerHeight,canvasWidth:.95*window.outerWidth,numeroProcesso:"0"},a.divPrincipal=Object(s.createRef)(),a.sortKey="_s";var n=new Set(a.props.data[ue].downloaded.split("|").map(function(e){return e.replace(".pdf","")}));return a.state=Object(l.a)({},A,{processosList:[],situacao:{},loadPDF:a.loadPDF,focaNaDivPrincipal:a.focaNaDivPricincipal,setState:a.setState.bind(Object(v.a)(Object(v.a)(a))),manejar:x(Object(v.a)(Object(v.a)(a))),downloaded:n}),delete a.eprocessoData[ue],a.dbVersion=3,a.db=new g(a.localStorageKey,a.dbVersion),a.db.setup().then(function(){a.db.getAll().then(function(e){if(e instanceof Array){for(var t=Object.keys(a.eprocessoData),n={},o=(new Date).valueOf(),r=function(r){var s=e.find(function(e){return e.numero===t[r]});if(s){if(o-s.data.valueOf()>7776e6)return a.db.deleteRecord(s.numero),"continue";switch(n[s.numero]=s.situacao,a.eprocessoData[t[r]][de]=s.data,s.situacao){case"AGUARDA INSCRI\xc7\xc3O":a.eprocessoData[t[r]][a.sortKey]="9999999999999999";break;default:a.eprocessoData[t[r]][a.sortKey]="999999"+s.situacao}}else a.eprocessoData[t[r]][a.sortKey]="00000"+a.eprocessoData[t[r]]["Nome Equipe \xdaltima"]||!1;a.setState({dossieProcesso:e.filter(function(e){return e.judicial}).map(function(e){return[e.numero,e.judicial,e.situacao]})})},s=0;s<t.length;s++)r(s);var c=t.sort(function(e,t){return a.eprocessoData[e]&&a.eprocessoData[t]&&a.eprocessoData[e][a.sortKey]>a.eprocessoData[t][a.sortKey]?1:-1}).sort(function(e,t){return a.state.downloaded.has(e)&&a.state.downloaded.has(t)?0:a.state.downloaded.has(e)||a.state.downloaded.has(t)?a.state.downloaded.has(e)&&!a.state.downloaded.has(t)?1:!a.state.downloaded.has(e)&&a.state.downloaded.has(t)?-1:void 0:0});a.setState({situacao:n,processosList:c})}})}),a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"pdfGotoPage",value:function(){var e=Object(r.a)(o.a.mark(function e(t){var a,n,r,s,c,i=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentPdf.pdf){e.next=2;break}return e.abrupt("return");case 2:return this.currentPdf.pageNumber=t,e.next=5,this.currentPdf.pdf.getPage(t);case 5:if(a=e.sent,this.currentPdf.page=a,n=a.getViewport(this.currentPdf.zoom),r=0,n.width>this.currentPdf.canvasWidth&&(r=-(n.width-this.currentPdf.canvasWidth)/2),s=n.height,n.height>this.currentPdf.canvasHeight&&(s=-(n.height-this.currentPdf.canvasHeight)/2+n.height),n.transform[4]=r,n.transform[5]=s+this.currentPdf.verticalOffset,c={canvasContext:this.canvasRenderContext2D,viewport:n},window.clearInterval(this.interval),void 0!==this.currentPDFRendertask&&this.currentPDFRendertask._internalRenderTask.running){e.next=19;break}e.next=21;break;case 19:return e.next=21,this.currentPDFRendertask.cancel();case 21:return this.currentPDFRendertask=a.render(c),e.prev=22,e.next=25,this.currentPDFRendertask.promise;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(22),console.log("%cer? %o","font-size: 1.2em; color: pink;",e.t0);case 30:return e.prev=30,console.log("%csettled","font-size: 1.3em; color: pink;"),e.finish(30);case 33:this.setState(function(e){return t===e.paginaAtual?null:{paginaAtual:t,carregando:!1,loading:!1}},function(){i.focaNaDivPricincipal(),i.botaSituacaoNoCanvas(),i.handleGetProcesso()});case 34:case"end":return e.stop()}},e,this,[[22,27,30,33]])}));return function(t){return e.apply(this,arguments)}}()},{key:"pdfAumentaZoom",value:function(){var e=this.currentPdf.zoom+.2;this.currentPdf.zoom=e,this.pdfGotoPage(this.currentPdf.pageNumber)}},{key:"pdfDiminuiZoom",value:function(){var e=this.currentPdf.zoom-.2;this.currentPdf.zoom=e,this.pdfGotoPage(this.currentPdf.pageNumber)}},{key:"pdfSobeVisualizacao",value:function(){this.currentPdf.verticalOffset=this.currentPdf.verticalOffset-150,this.pdfGotoPage(this.currentPdf.pageNumber)}},{key:"pdfBaixaVisualizacao",value:function(){this.currentPdf.verticalOffset=this.currentPdf.verticalOffset+150,this.pdfGotoPage(this.currentPdf.pageNumber)}},{key:"pdfPagProxima",value:function(){this.currentPdf.pageNumber&&this.currentPdf.pageNumber!==this.currentPdf.totalPages&&this.pdfGotoPage(this.currentPdf.pageNumber+1)}},{key:"pdfPagAnterior",value:function(){this.currentPdf.pageNumber&&1!==this.currentPdf.pageNumber&&this.pdfGotoPage(this.currentPdf.pageNumber-1)}},{key:"focaNaDivPricincipal",value:function(){this.divPrincipal.current&&this.divPrincipal.current.focus()}},{key:"componentDidMount",value:function(){this.canvas&&(this.canvas.height=this.currentPdf.canvasHeight,this.canvas.width=this.currentPdf.canvasWidth,this.canvasRenderContext2D=this.canvas.getContext("2d"))}},{key:"render",value:function(){var e=this,t=window.innerWidth/2,a=window.innerHeight/2,n=s.createElement("div",{className:"div-canvas-situacao",style:{left:t+Math.floor(10*Math.random()),top:a-500+Math.floor(10*Math.random()),display:this.state.loading?"none":"block"}},this.state.situacao[this.state.selecionado]),o=Object.keys(this.state.situacao).reduce(function(t,a){return t.add(e.state.situacao[a])},new Set);return this.state.destinos.forEach(function(e){o.add(e)}),s.createElement(I.Provider,{value:this.state},this.state.loading&&s.createElement(Q,null),s.createElement("div",{ref:this.divPrincipal,className:"App",tabIndex:0,onKeyDown:function(t){return e.handlePress(t)},style:{position:"relative",maxWidth:"100vw"}},s.createElement(ve,{db:this.db,pagAtual:this.state.paginaAtual,processo:this.state.selecionado}),s.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"}},s.createElement("div",{id:"outer_div",ref:function(t){return e.outerDiv=t}},n,s.createElement("canvas",{style:{zIndex:2},ref:function(t){return e.canvas=t},id:"pdfcanvas"})),s.createElement("div",{className:"div-wrap-flex"},this.state.processosList.map(function(t){return s.createElement(ae,{key:"lis"+t,processo:t,procObj:e.eprocessoData[t],downloaded:e.state.downloaded.has(t)})}))),s.createElement("div",{className:"div-wrap-flex botoes-copiar-div",style:{margin:"1em"}},Array.from(o).map(function(t){return s.createElement(Z,{key:"lis_"+t,dst:t,copy:e.copy,situacao:e.state.situacao,separador:e.state.separador,botaoAtivo:t===e.state.botaoClickAtivo,clicado:e.state.botoesClickClicados.some(function(e){return e===t})})})),s.createElement("button",{onClick:function(){return e.setState(function(e){return{separador:","===e.separador?"\n":","}})}},"Separador: ",this.state.separador),s.createElement("button",{onClick:function(){return e.deleteArquivos(e.state.copyList.join(","))}},"deletar ",this.state.botaoClickAtivo),s.createElement("textarea",{style:{margin:"0px",width:"100%",height:"5em",border:"2px solid rgb(169, 169, 169)",backgroundColor:"rgb(240, 245, 255)",padding:"1em",boxSizing:"border-box",resize:"vertical"},ref:function(t){return e.textarea=t}}),this.state.showInput&&s.createElement("div",{style:{position:"fixed",right:30,top:100,margin:"auto",padding:20,backgroundColor:"#003876",boxShadow:"15px 15px 20px #000",zIndex:4}},s.createElement("input",{ref:function(t){return e.input=t},onKeyDown:function(t){return e.addSituacao(t)},style:{fontSize:"3em",padding:10}})),this.state.showGotoPageInput&&s.createElement("div",{style:{position:"fixed",right:30,bottom:200,margin:"auto",padding:20,backgroundColor:"#003876",boxShadow:"15px 15px 20px #000",zIndex:4}},s.createElement("input",{ref:function(t){return e.gotoinput=t},onKeyDown:this.goToPageInputAction,style:{fontSize:"4em",padding:10},size:5})),s.createElement("div",{style:{margin:"auto"}},s.createElement(re,{host:"http://localhost:".concat(this.props.portServer),db:this.db,eprocessoData:this.props.data,situacoes:this.state.situacao,deleteArquivos:this.deleteArquivos,loadPdf:this.loadPDF})),s.createElement(me,{paginaAtual:this.state.paginaAtual,selecionado:this.state.selecionado,totalPaginas:this.state.totalPaginas,situacao:this.state.situacao[this.state.selecionado],loading:this.state.loading}),s.createElement(pe,{processosListLength:this.state.processosList.length,situacaolength:Object.keys(this.state.situacao).length,processoObj:this.eprocessoData[this.state.selecionado]}),s.createElement(J,{endpoints:["http://localhost:".concat(this.props.portServer,"/eval_js"),"http://localhost:".concat(this.props.portServer,"/eval_sida_window_js")],on:!1}),s.createElement(G,{processos:this.state.pageProcessos}),s.createElement(V,{info:this.state.dossieProcesso,deleteDossie:this.db.deleteRecord}),s.createElement("br",null),s.createElement("br",null),s.createElement("br",null),s.createElement(S,{portServer:this.props.portServer}),s.createElement(le,{deleteFiles:this.deleteArquivos}),s.createElement("br",null),s.createElement("br",null),s.createElement("br",null),s.createElement(ne,{wsPort:this.props.portServer,dbVersion:this.dbVersion,dbName:this.localStorageKey}),s.createElement(T,null),s.createElement(ie,{addProcesso:this.addBaixado}),"ProcessoSc"))}}]),t}(s.Component),pe=s.memo(function(e){return s.createElement("div",{className:"bottom-info"},s.createElement("div",{style:{backgroundColor:e.situacaolength<e.processosListLength?"rgba(0, 0, 0, 0.3)":"rgba(255, 100, 100, 0.6)"}},e.situacaolength," / ",e.processosListLength," processos."),s.createElement("div",null,s.createElement("span",{style:{color:"#fff",backgroundColor:"rgba(0, 0, 0, 0.4)"}},e.processoObj&&e.processoObj["Nome \xdaltimo Documento Confirmado"]),s.createElement("span",{style:{color:"#000",backgroundColor:"rgba(255, 255, 255, 0.4)"}},e.processoObj&&e.processoObj["Nome Equipe \xdaltima"]),s.createElement("span",{style:{color:"#fff",backgroundColor:"rgba(100, 100, 100, 0.4)"}},e.processoObj&&e.processoObj["Nome Contribuinte"])))}),me=s.memo(function(e){return e.loading?s.createElement("div",{className:"header-info-loading"},s.createElement("h1",{className:"title is-6"},"CARREGANDO...")):s.createElement("div",{className:"header-info"},s.createElement("h1",{className:"title is-6"},e.paginaAtual," / ",e.totalPaginas," - ",e.selecionado,e.situacao&&"    |  ",e.situacao))}),ve=function(e){var t=s.useState(""),a=Object(i.a)(t,2),n=a[0],c=a[1],l=s.useState(""),u=Object(i.a)(l,2),d=u[0],f=u[1],p=s.useState(0),m=Object(i.a)(p,2),v=m[0],h=m[1];return s.useEffect(function(){Object(r.a)(o.a.mark(function t(){var a,n,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.db.getProcessoDocs(e.processo);case 2:if(void 0!==(a=t.sent)){t.next=6;break}return c(""),t.abrupt("return");case 6:if(!((n=a.infos.length-1)<1)){t.next=9;break}return t.abrupt("return");case 9:if(!(n<0)){t.next=13;break}return c(""),t.abrupt("return");case 13:if(!((r=a.infos[n]).pag_inicio<=e.pagAtual&&r.pag_fim>=e.pagAtual)){t.next=19;break}return c(r.nome_doc),h(r.pag_inicio),n>0&&f(a.infos[n-1].nome_doc),t.abrupt("return");case 19:n--,t.next=9;break;case 22:case"end":return t.stop()}},t)}))()},[e.pagAtual,e.processo]),s.createElement("div",{className:"doc-info"},s.createElement("span",{className:"doc-info-ant"},d),s.createElement("span",{className:"doc-info-i"},v),s.createElement("span",{className:"doc-info-doc"},n))},he=fe,be=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ge(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}a(489);var Ee=a(72),we=a(71),ye=new Blob([we]),Oe=URL.createObjectURL(ye),ke=window.PORT_SERVER||"9090";Ee.GlobalWorkerOptions.workerSrc=Oe,console.log("eprocessoData",eprocData),Object(r.a)(o.a.mark(function e(){var t,a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.info("INICIO:",Ee,we),t={__META__:{}},null!==eprocData){e.next=24;break}return console.log("vai atr\xe1s do api pq o da janela t\xe1 null"),e.prev=4,e.next=7,fetch("http://localhost:".concat(ke,"/json"));case 7:if(200===(a=e.sent).status){e.next=11;break}return console.log("Problema no Fetch Inicial. Status Code: "+a.status),e.abrupt("return");case 11:return e.next=13,a.json();case 13:n=e.sent,console.log("veio do fetch"),t=n,e.next=22;break;case 18:e.prev=18,e.t0=e.catch(4),console.log("ERRO",e.t0),c.render(s.createElement("h1",null,"Erro"),document.getElementById("root"));case 22:e.next=25;break;case 24:t=eprocData;case 25:c.render(s.createElement(he,{data:t,PDFJS:Ee,portServer:ke}),document.getElementById("root"));case 26:case"end":return e.stop()}},e,null,[[4,18]])}))(),function(){if("serviceWorker"in navigator){if(new URL("",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");be?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ge(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):ge(e)})}}()}},[[196,1,2]]]);
//# sourceMappingURL=main.0d500eed.chunk.js.map