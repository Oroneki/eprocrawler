(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{194:function(e,t,a){e.exports=a(500)},201:function(e,t,a){},499:function(e,t,a){},500:function(e,t,a){"use strict";a.r(t);var o=a(2),n=a.n(o),r=a(5),s=a(0),c=a(98),i=a(3),l=a(17),u=a(18),d=a(26),f=a(24),p=a(10),m=a(25),v=(a(201),a(27)),h=function(e){return function(t){if(13===t.nativeEvent.keyCode||27===t.nativeEvent.keyCode){27===t.nativeEvent.keyCode&&e.setState({showInput:!1},e.focaNaDivPricincipal);var a=e.input.value.toUpperCase();e.setState(function(e){var t=e.destinos;return e.destinos.find(function(e){return e===a})||(t=t.concat(a)),Object(i.a)({},e,{situacao:Object(i.a)({},e.situacao,Object(v.a)({},e.selecionado,a)),showInput:!1,destinos:t})},function(){e.db.addOrAtualiza({numero:e.state.selecionado,situacao:a,data:new Date}),e.focaNaDivPricincipal(),e.botaSituacaoNoCanvas()})}}},g=function(){function e(t){var a=this;Object(l.a)(this,e),this.key=t,this.database=void 0,this.stringKey=void 0,this.addOrAtualiza=function(e){var t=a.database.transaction(["situacoes"],"readwrite");t.oncomplete=function(){},t.onerror=function(){},t.onabort=function(){},t.objectStore("situacoes").put(e)},this.addOrAtualizaSida=function(e){console.log("transacao SIDA:",e);var t=a.database.transaction(["sida"],"readwrite");t.oncomplete=function(){},t.onerror=function(){},t.onabort=function(){},t.objectStore("sida").put(e)},this.deleteRecord=function(e){var t=a.database.transaction(["situacoes"],"readwrite");t.oncomplete=function(){},t.onerror=function(){},t.onabort=function(){},t.objectStore("situacoes").delete(e)},this.getSidaRecord=function(e,t){var o=a.database.transaction(["sida"],"readonly");o.oncomplete=function(e){console.log("x transacao SIDA GET completada.",e)},o.onerror=function(){},o.onabort=function(){},o.objectStore("sida").get(e).onsuccess=function(e){console.log("success: ",e),t(e)}},this.getAll=function(){return new Promise(function(e,t){var o=a.database.transaction(["situacoes"]).objectStore("situacoes").openCursor(),n=[];o.onsuccess=function(t){console.log("   transacao cursor sucesso...",t,typeof t);var a=t.target.result;a?(console.log(a.value),n.push(a.value),a.continue()):e(n)},o.onerror=function(){t("miow")}})},this.stringKey=t}return Object(u.a)(e,[{key:"setup",value:function(){var e=this,t=window.indexedDB.open(this.stringKey,2.1);return new Promise(function(a,o){t.onupgradeneeded=function(o){e.database=t.result,e.database.objectStoreNames.contains("situacoes")||e.database.createObjectStore("situacoes",{keyPath:"numero"}),e.database.objectStoreNames.contains("sida")||e.database.createObjectStore("sida",{keyPath:"processo"}),a(e)},t.onsuccess=function(t){e.database=t.target.result,a(e)},t.onerror=function(e){o()}})}}]),e}(),b=a(35),E=a.n(b),y=function(){var e=Object(r.a)(n.a.mark(function e(t,a){var o;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("postData",t,a),e.prev=1,e.next=4,E.a.post(t,a);case 4:o=e.sent,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(1),console.log("Opa - Erro do axiose"),console.log(e.t0),e.abrupt("return",null);case 12:if(o.status<300){e.next=17;break}return console.log("Opa - Erro no request do post pra delete"),console.log(o.status,o.statusText),console.log(o),e.abrupt("return",null);case 17:return console.log(o.data),e.abrupt("return",o.data);case 19:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t,a){return e.apply(this,arguments)}}(),D=function(e,t){return function(){var a=Object(r.a)(n.a.mark(function a(o){var r,s,c;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,y(t,o);case 2:if(r=a.sent){a.next=5;break}return a.abrupt("return",null);case 5:return s=r.certo,c=r.errado,s.forEach(function(t){return e.state.manejar("deletou",t)}),c.forEach(function(t){return e.state.manejar("falhou",t)}),a.abrupt("return",r);case 9:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()},P=function(e){return function(t){if(!e.state.showInput&&!e.state.showGotoPageInput&&"editor"!==document.activeElement.id)switch(t.nativeEvent.keyCode){case 70:console.groupCollapsed("handlePress"),e.setState(function(t){var a=t.selecionado,o=e.state.processosList,n=o.findIndex(function(e){return e===a}),r=o[n+1];return void 0===r&&(r=o[0]),e.loadPDF(r),{selecionado:r}},function(){return e.focaNaDivPricincipal()}),console.groupEnd();break;case 68:console.groupCollapsed("handlePress"),e.setState(function(t){var a,o=t.selecionado,n=e.state.processosList,r=n.findIndex(function(e){return e===o});return a=0===r?n[n.length-1]:n[r-1],e.loadPDF(a),{selecionado:a}},function(){return e.focaNaDivPricincipal()}),console.groupEnd();break;case 74:e.setState(function(e){var t=e.situacao[e.selecionado];if("0"===t)return null;if(!t)return Object(i.a)({},e,{situacao:Object(i.a)({},e.situacao,Object(v.a)({},e.selecionado,e.destinos[0]))});var a=e.destinos.findIndex(function(e){return e===t});return a===e.destinos.length-1?Object(i.a)({},e,{situacao:Object(i.a)({},e.situacao,Object(v.a)({},e.selecionado,e.destinos[0]))}):Object(i.a)({},e,{situacao:Object(i.a)({},e.situacao,Object(v.a)({},e.selecionado,e.destinos[a+1]))})},function(){var t=JSON.stringify(e.state);localStorage.setItem(e.localStorageKey,t),e.db.addOrAtualiza({numero:e.state.selecionado,situacao:e.state.situacao[e.state.selecionado],data:new Date}),e.pdfGotoPage(e.state.paginaAtual)});break;case 73:e.setState(function(e){return"0"===e.selecionado?null:Object(i.a)({},e,{showInput:!0})},function(){return setTimeout(function(){e.input.value="",e.input.focus()},0)});break;case 71:e.setState(function(e){return"0"===e.selecionado?null:Object(i.a)({},e,{showGotoPageInput:!0})},function(){return setTimeout(function(){e.gotoinput&&(e.gotoinput.value="",e.gotoinput.focus())},0)});break;case 109:var a=localStorage.getItem(e.localStorageKey);if(null===a)return;var o=JSON.parse(a);e.setState(o);break;case 81:e.pdfDiminuiZoom();break;case 87:e.pdfAumentaZoom();break;case 65:e.pdfPagAnterior();break;case 83:e.pdfPagProxima();break;case 186:e.pdfBaixaVisualizacao();break;case 76:e.pdfSobeVisualizacao();break;case 192:e.limpaSituacao()}}},w=function(e){return function(t,a){console.log("manejar -> ",t,a),e.setState(function(o){var n,r=e.state.manejo;switch(console.log("manejar ->",t,a,"antigo",r),t){case"deletou":var s=new Set(r.deletadosOk.values());if(console.log("newDeletados",s),s.forEach(function(t){console.log("deletar ",t),e.db.deleteRecord(t)}),s.add(a),n=Object(i.a)({},r,{deletadosOk:s}),r.errosDelete.has(a)){var c=new Set(r.errosDelete.values());c.delete(a),n=Object(i.a)({},n,{errosDelete:c})}break;case"falhou":var l=new Set(r.errosDelete.values());l.add(a),n=Object(i.a)({},r,{errosDelete:l});break;case"copiou":var u=new Set(r.copiados.values());u.add(a),n=Object(i.a)({},r,{copiados:u});break;default:return null}return Object(i.a)({},o,{manejo:n})})}},S=function(e){return function(t,a){e.ws||(e.ws=new WebSocket("ws://localhost:".concat(e.props.portServer,"/ws")),e.ws.onopen=function(e){console.log("Connex\xe3o com o Websocket Ativa: ",e)},e.ws.onclose=function(e){console.log("Connex\xe3o com o Websocket FECHADA: ",e)},e.ws.onerror=function(e){console.error("Websocket ERROR: ",e)},e.ws.onmessage=O),e.ws.send(JSON.stringify({tipo:t,payload:a}))}};function O(e){console.log("Websocket Msg: ",e);var t=JSON.parse(e.data);switch(t.tipo){case"sida_resp":console.log("SIDA EVENT"),console.log(t.payload.split("\n"))}}var x=a(100),C=a(189),k=a(193),N=function(e){var t=e.split("/").reverse().map(function(e){return parseInt(e,10)}).slice(0,3);return t[1]=t[1]-1,Object(C.a)(Date,Object(k.a)(t))},j=function(e){return function(){var t=Object(r.a)(n.a.mark(function t(a){var o,r,s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=a.join("|"),t.next=3,E.a.post("".concat(e,"/pesquisa_sida_varios_processos"),o);case 3:return r=t.sent,s=r.data.map(function(e){return{"listaInscri\xe7\xf5es":e.lista_inscri\u00e7\u00f5es.map(function(e){var t=e["Data Inscri\xe7\xe3o"]||e["Data da Inscri\xe7\xe3o"]||null,a=e["N\xba Inscri\xe7\xe3o"]||e["N\xfamero de Inscri\xe7\xe3o"]||"";return{cpfCnpj:e["CPF/CNPJ"],dataInsc:N(t),"procuradoriaRespons\xe1vel":e["Procuradoria Respons\xe1vel"],"situa\xe7\xe3o":e.Situa\u00e7\u00e3o,valorConsolidado:e["Valor Consolidado"],valorInscrito:e["Valor Inscrito"],numInsc:a}}),processo:e.processo_key,qtdInscricoes:e.qtd_inscricoes}}),t.abrupt("return",s);case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},I=function(e){return s.createElement("tr",null,s.createElement("td",null,s.createElement("span",{className:""},e.inscricaoConsulta.numInsc)),s.createElement("td",{style:{width:"55%"}},s.createElement("span",{className:"is-small"},e.inscricaoConsulta.situacao)),s.createElement("td",{style:{width:"15%"}},s.createElement("span",{className:""},e.inscricaoConsulta.valorConsolidado)),s.createElement("td",null,s.createElement("span",{className:""},"object"===typeof e.inscricaoConsulta.dataInsc?e.inscricaoConsulta.dataInsc.toLocaleDateString():(new Date).toLocaleDateString())),s.createElement("td",null,e.inscricaoConsulta.foiDepois?s.createElement("span",{className:"icon"},s.createElement("i",{className:" far fa-check-circle"})):s.createElement("span",{className:"icon"},s.createElement("i",{className:" fas fa-times-circle"}))))},A=function(e){var t="object"===typeof e.consultaDeProcesso.dataEntrada?e.consultaDeProcesso.dataEntrada:Date.parse("2018-11-17T14:37:21.896Z"),a=((new Date).valueOf()-t.valueOf())/864e5;console.log("diffDidas:",a);var o=Object(s.useState)(void 0),n=Object(x.a)(o,2),r=(n[0],n[1],Object(s.useState)(!1)),c=Object(x.a)(r,2),i=c[0],l=c[1],u=e.consultaDeProcesso.listaInscricoes.length>0&&e.consultaDeProcesso.listaInscricoes.every(function(e){return e.situacao.includes("EXTIN")});return s.createElement("div",{className:"card",style:{marginBottom:"20px"}},s.createElement("div",{className:"card-header",style:{backgroundColor:"rgb(225, 231, 236)"}},s.createElement("p",{className:"card-header-title",style:{fontSize:"1.2em"}},e.consultaDeProcesso.processo," (",e.eprocessoData["Data Entrada Atividade"],")"),e.consultaDeProcesso.listaInscricoes.length>0&&e.consultaDeProcesso.listaInscricoes.every(function(e){return e.foiDepois})&&s.createElement("span",{className:"tag is-success"},"OK"),0===e.consultaDeProcesso.listaInscricoes.length&&a>30&&s.createElement("span",{className:"icon has-text-danger"},s.createElement("i",{className:"fas fa-exclamation-triangle"}))),s.createElement("div",{className:"card-column"},e.consultaDeProcesso.listaInscricoes.length>0?s.createElement("div",null,s.createElement("table",{className:"table is-bordered is-striped is-narrow is-fullwidth"},s.createElement("tbody",null,e.consultaDeProcesso.listaInscricoes.map(function(e){return s.createElement(I,{key:e.numInsc,inscricaoConsulta:e})})))):s.createElement("span",null,"   ","Aguardando inscrever...")),s.createElement("div",{className:"card-footer"},u&&i?s.createElement("div",null,s.createElement("p",null,"Processo ",e.consultaDeProcesso.processo," encaminhado via sistema TRATAPFN com ",e.consultaDeProcesso.qtdInscricoes.toString()," inscri\xe7\xf5es (",e.consultaDeProcesso.listaInscricoes.map(function(e){return e.numInsc.replace(/\D/g,"")}).join(", "),'), todas na situa\xe7\xe3o "',e.consultaDeProcesso.listaInscricoes[0].situacao,'", fato que impede a inscri\xe7\xe3o autom\xe1tica.'),s.createElement("p",null,s.createElement("button",{className:"button",onClick:function(){return l(!1)}},"hide Despacho"))):s.createElement("div",null,s.createElement("button",{className:"button",onClick:function(){return l(!0)}},"Despacho"))))},R=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).consulta=Object(r.a)(n.a.mark(function e(){var t,o;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),e.next=3,j(a.props.host)(a.props.list);case 3:t=e.sent,o=t.map(function(e){var t=N(a.props.eprocessoData[e.processo]["Data Entrada Atividade"]);return{listaInscricoes:e.listaInscri\u00e7\u00f5es.map(function(e){return console.log("FOI DEPOIS:",t<e.dataInsc,"d:",t.valueOf(),"i.dataInsc:",e.dataInsc.valueOf()),{foiDepois:t<=e.dataInsc,cpfCnpj:e.cpfCnpj,dataInsc:e.dataInsc,procuradoriaResponsavel:e.procuradoriaRespons\u00e1vel,situacao:e.situa\u00e7\u00e3o,valorConsolidado:e.valorConsolidado,valorInscrito:e.valorInscrito,numInsc:e.numInsc}}),dataEntrada:t,processo:e.processo,qtdInscricoes:e.qtdInscricoes}}),console.log("newConsultas: \n\n",o),console.log("newConsultas JSON: \n\n",JSON.stringify(o,void 0,4)),o.forEach(function(e){return a.props.db.addOrAtualizaSida(e)}),a.setState({consultasDeProcesso:o,loading:!1});case 9:case"end":return e.stop()}},e)})),a.state={consultasDeProcesso:[],loading:!1},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return this.state.loading?s.createElement("div",{className:"container"}," ",s.createElement("button",{className:"button is-loading"},"loadind")):0===this.state.consultasDeProcesso.length?s.createElement("div",{className:"container"},s.createElement("button",{className:"button",onClick:this.consulta},"Consultar Processos No Sida")):s.createElement("div",{className:"container"},this.state.consultasDeProcesso.map(function(t){return s.createElement(A,{key:t.processo,consultaDeProcesso:t,getSidaRecord:e.props.db.getSidaRecord,eprocessoData:e.props.eprocessoData[t.processo]})}),s.createElement("div",{className:"level"},s.createElement("textarea",{className:"textarea"},this.state.consultasDeProcesso.filter(function(e){return e.listaInscricoes.length>0}).filter(function(e){return e.listaInscricoes.every(function(e){return e.foiDepois})}).map(function(e){return e.processo}).join(","))))}}]),t}(s.Component),T=a(190),z=a(191),L=a(192),M=a(99);a(498);var _=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).debounceBabel=void 0,a.codeBlockDisplayRef=s.createRef(),a.sendCodeToEndpoint=Object(r.a)(n.a.mark(function e(){var t;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(". endpoint: ",a.state.selectedEndPoint),e.next=3,y(a.state.selectedEndPoint,a.state.transpiledCode);case 3:t=e.sent,console.log(t);case 5:case"end":return e.stop()}},e)})),a.handleChange=function(e){console.log(e),e&&e.target&&e.target.value?a.debounceBabel(e.target.value):console.log("algo falta")},a.getHtml=function(){return{__html:a.state.highlightedCode}},a.toggleEndpoint=function(){var e,t=a.props.endpoints.findIndex(function(e){return a.state.selectedEndPoint===e});console.log("Index ".concat(t," do endpoint ").concat(a.state.selectedEndPoint)),e=t+1===a.props.endpoints.length?0:t+1,a.setState({selectedEndPoint:a.props.endpoints[e]})},a.transformBabel=function(e){var t;try{t=T.transform(e,{presets:["es2016"],plugins:[z,L]}).code.replace("'use strict'","").trim()}catch(n){return void console.log("erro babel transform try block")}var o=M.highlight(t,M.languages.javascript,"javascript");a.setState({transpiledCode:t,highlightedCode:o})},a.state={transpiledCode:"",highlightedCode:"",selectedEndPoint:e.endpoints[0],code:"console.log('teste')\n      const massa = (a) => console.log('>>', a, '<<');\n      Object.keys({a: 1, b: 2}).map(k => massa(k)",on:a.props.on||!1},a.debounceBabel=function(e,t,a){var o;return function(){var n=this,r=arguments,s=a&&!o;clearTimeout(o),o=setTimeout(function(){o=null,a||e.apply(n,r)},t),s&&e.apply(n,r)}}(a.transformBabel,700,!1),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=s.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:2}},s.createElement("button",{onClick:function(){return e.setState({on:!0})}},"EDITOR"));return this.state.on?s.createElement("div",{style:{padding:2}},s.createElement("div",{style:{display:"flex",alignItems:"start",justifyContent:"center"}},s.createElement("div",{style:{display:"flex",flexDirection:"column",flex:1}},s.createElement("div",null,s.createElement("span",null,s.createElement("b",null,"EndPoint:")," "),s.createElement("a",{onClick:this.toggleEndpoint},this.state.selectedEndPoint),s.createElement("span",null,"  "),s.createElement("a",{onClick:function(){return e.setState({on:!1})}}," (close editor)")),s.createElement("textarea",{id:"editor",rows:20,style:{width:"100%",padding:10,fontFamily:"monospace",fontSize:17,lineHeight:"1.8em",backgroundColor:"rgb(251, 251, 255)",border:0,margin:5,flex:1},onChange:this.handleChange},this.state.code)),s.createElement("div",{style:{width:"50%",padding:4,margin:5,backgroundColor:"#fcfdfe",flex:1}},s.createElement("pre",{ref:this.codeBlockDisplayRef,dangerouslySetInnerHTML:this.getHtml()}))),s.createElement("button",{style:{width:"100%"},onClick:this.sendCodeToEndpoint},"Mandar C\xf3digo !"),s.createElement("br",null),s.createElement("br",null),s.createElement("br",null),s.createElement("br",null),s.createElement("br",null)):t}}]),t}(s.Component),F=s.memo(function(e){var t=e.dst,a=e.copy,o=e.situacao,n=e.separador,r=e.botaoAtivo,c=e.clicado,i=Object.keys(o).filter(function(e){return o[e]===t});return i.length>0?s.createElement("div",{className:"listagem-div"},s.createElement("button",{style:{display:"inline-block",backgroundColor:r?"#a0d6ff":c?"rgba(255, 255, 255, 0)":"none",color:c?"rgb(137, 137, 137)":"black"},onClick:function(){return a(i.join(n),t)}}," COPIAR ",t," (",i.length,")")):null}),G=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).rectStyle={fill:"rgba(50, 50, 255, 1)",stroke:"rgb(255,255,255)",strokeWidth:1},a.rectNodes=[null,null,null,null,null,null,null,null,null,null,null,null],a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){if(console.log("animation mounted"),document)document.getElementById("anim_svg")}},{key:"componentWillUnmount",value:function(){console.log("anim will unmount")}},{key:"render",value:function(){var e=this;return s.createElement("div",{className:"loading-component"},s.createElement("svg",{id:"anim_svg",width:"180",height:"50"},s.createElement("g",{ref:function(t){return e.rectNodes[0]=t}}," ",s.createElement("rect",{x:"0",y:"0",width:"10",height:"50",style:this.rectStyle})),s.createElement("g",{ref:function(t){return e.rectNodes[1]=t}}," ",s.createElement("rect",{x:"15",y:"0",width:"10",height:"50",style:this.rectStyle})),s.createElement("g",{ref:function(t){return e.rectNodes[2]=t}}," ",s.createElement("rect",{x:"30",y:"0",width:"10",height:"50",style:this.rectStyle})),s.createElement("g",{ref:function(t){return e.rectNodes[3]=t}}," ",s.createElement("rect",{x:"45",y:"0",width:"10",height:"50",style:this.rectStyle})),s.createElement("g",{ref:function(t){return e.rectNodes[4]=t}}," ",s.createElement("rect",{x:"60",y:"0",width:"10",height:"50",style:this.rectStyle})),s.createElement("g",{ref:function(t){return e.rectNodes[5]=t}}," ",s.createElement("rect",{x:"75",y:"0",width:"10",height:"50",style:this.rectStyle})),s.createElement("g",{ref:function(t){return e.rectNodes[6]=t}}," ",s.createElement("rect",{x:"90",y:"0",width:"10",height:"50",style:this.rectStyle})),s.createElement("g",{ref:function(t){return e.rectNodes[7]=t}}," ",s.createElement("rect",{x:"105",y:"0",width:"10",height:"50",style:this.rectStyle})),s.createElement("g",{ref:function(t){return e.rectNodes[8]=t}}," ",s.createElement("rect",{x:"120",y:"0",width:"10",height:"50",style:this.rectStyle})),s.createElement("g",{ref:function(t){return e.rectNodes[9]=t}}," ",s.createElement("rect",{x:"135",y:"0",width:"10",height:"50",style:this.rectStyle})),s.createElement("g",{ref:function(t){return e.rectNodes[10]=t}}," ",s.createElement("rect",{x:"150",y:"0",width:"10",height:"50",style:this.rectStyle})),s.createElement("g",{ref:function(t){return e.rectNodes[11]=t}}," ",s.createElement("rect",{x:"165",y:"0",width:"10",height:"50",style:this.rectStyle}),"        ")),s.createElement("br",null),s.createElement("span",null,"C A R R E G A N D O..."))}}]),t}(s.Component),K={showInput:!1,situacao:{},selecionado:"0",destinos:["REVISAO","AGUARDA INSCRI\xc7\xc3O","REQUERIMENTOS","INSCRI\xc7\xc3O-AJUIZAMENTO"],paginaAtual:0,totalPaginas:0,carregando:!1,showGotoPageInput:!1,separador:",",botaoClickAtivo:"",botoesClickClicados:[],processosList:[],copyList:[],loadPDF:function(){return{}},focaNaDivPrincipal:function(){return{}},setState:function(){return{}},manejar:function(){return{}},manejo:{copiados:new Set,errosDelete:new Set,deletadosOk:new Set},loading:!1},W=Object(s.createContext)(K),B=function(e,t){return function(a){if(t.has(a))return console.info("cached value"),t.get(a);var o=e(a);return console.info("   >   new key for cache >",a,o,arguments),t.set(a,o),o}},q=new Map,J=new Map,U=B(function(e){var t=Array.from(e).reduce(function(e,t,a){return t.charCodeAt(0)+e},0);return console.log(t),t%360},q),H=B(function(e){var t=U(e),a="hsla(".concat(t,", 100%, 96%, 0.9)");return console.log(a),a},J),V=s.memo(function(e){var t=e.processo,a=e.procObj;a||(a={});var o=a["Nome Respons\xe1vel"]||"",n=a["Nome Tarefa Atual"]||"",r=a["Data Entrada Atividade"]||"",c=a[Q],i=t;a&&a["N\xfamero Processo"]&&(i=a["N\xfamero Processo"].replace("D","").trim());var l=(new Date).valueOf(),u=r.split("/"),d=new Date("".concat(u[1],"/").concat(u[0],"/").concat(u[2])),f=c&&l-c.valueOf()>1728e6,p=c&&c.valueOf()-d.valueOf()<36e5,m=Math.floor((l-d.valueOf())/864e5),v=a&&a["NI Contribuinte"]&&function(e){var t=e.replace(/\D/g,"");switch(t.length){case 11:case 14:return t.substr(6,2);default:return"??"}}(a["NI Contribuinte"]),h=a&&a["NI Contribuinte"];return console.info(" *** ",e.processo),s.createElement(W.Consumer,null,function(e){var a=e.selecionado,l=e.situacao,u=e.loadPDF,d=e.setState,g=e.focaNaDivPrincipal,b=e.manejo;return s.createElement("span",{className:"processo-div-component"},(f||m>28||p)&&s.createElement("span",{className:"obsdata1"},f&&"Class Antiga\n |",m>28&&"Processo Antigo ("+m+"d)\n | ",p&&s.createElement("span",{className:"opa"},"OPA!")),s.createElement("span",{className:"span-processo-title",style:a===t?{color:"rgb(255, 255, 255)",fontSize:"1.2em",backgroundColor:"#f20052"}:{},onClick:function(){u(t),d({selecionado:t},g)}},i),l[t]&&s.createElement("div",{className:"div-processo-caracteristicas div-wrap-flex",style:{backgroundColor:H(l[t]),border:"2px solid rgb(178, 189, 239)",borderRadius:"12px",fontSize:"0.6em"}},l[t]),o&&s.createElement("div",{className:"div-processo-caracteristicas div-wrap-flex"},o.split(" ")[0]),n&&s.createElement("div",{className:"div-processo-caracteristicas div-wrap-flex"},n),"REQUERIMENTOS"===l[t]&&s.createElement("div",{className:"div-processo-caracteristicas div-wrap-flex"},h," ",s.createElement("div",{className:"div-processo-caracteristicas-digito"},v)),c&&s.createElement("div",{className:"div-processo-caracteristicas div-wrap-flex",style:{fontSize:"0.8em"}},c.toLocaleDateString()),r&&s.createElement("div",{className:"div-processo-caracteristicas div-wrap-flex",style:{fontSize:"0.85em"}},r," ","(",m,"d)"),b.copiados.has(t)&&!b.deletadosOk.has(t)&&s.createElement("div",{className:"div-processo-caracteristicas div-wrap-flex obscopiado"},"COPIADO"),b.errosDelete.has(t)&&s.createElement("div",{className:"div-processo-caracteristicas div-wrap-flex obserro"},"ERRO DELETE :("),b.deletadosOk.has(t)&&s.createElement("div",{className:"div-processo-caracteristicas div-wrap-flex obsdeletado"},"DELETADO"))})}),Z="__META__",Q="dataSitu",X=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).eprocessoData=void 0,a.colecao=void 0,a.input=void 0,a.gotoinput=void 0,a.PDF=void 0,a.localStorageKey=void 0,a.sortKey=void 0,a.handlePress=void 0,a.addSituacao=void 0,a.deleteArquivos=void 0,a.webSocketSend=void 0,a.ws=void 0,a.db=void 0,a.textarea=void 0,a.canvas=void 0,a.outerDiv=void 0,a.divPrincipal=void 0,a.canvasRenderContext2D=void 0,a.currentPdf=void 0,a.interval=void 0,a.atualizaColecao=function(e,t){a.colecao[e]=t},a.copy=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";a.textarea.focus(),a.textarea.value=e,a.textarea.select(),document.execCommand("copy");var o=e.split(",");console.log("copiar ",e,o),console.log("copiar antes do forEach"),a.setState(function(e){var a=new Set(e.manejo.copiados.values());return o.forEach(function(e){return a.add(e)}),{botaoClickAtivo:t,copyList:o,manejo:Object(i.a)({},e.manejo,{copiados:a})}}),""!==t&&a.setState(function(e){return{botoesClickClicados:e.botoesClickClicados.some(function(e){return e===t})?e.botoesClickClicados:e.botoesClickClicados.concat(t)}}),a.textarea.blur()},a.goToPageInputAction=function(e){if(console.log("addSitucao",e),13===e.nativeEvent.keyCode||27===e.nativeEvent.keyCode)if(27!==e.nativeEvent.keyCode){var t=parseInt(a.gotoinput.value,10);t<0&&(t=a.state.totalPaginas+1+t),a.setState({showGotoPageInput:!1},function(){return a.pdfGotoPage(t)})}else a.setState({showGotoPageInput:!1},a.focaNaDivPricincipal)},a.loadPDF=function(){var e=Object(r.a)(n.a.mark(function e(t){var o,r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.interval&&window.clearInterval(a.interval),a.setState({carregando:!0,loading:!0}),console.log("loadPDF"),null!==a.canvas){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,a.currentPdf.numeroProcesso=t,e.next=9,a.PDF.getDocument("http://localhost:".concat(a.props.portServer,"/pdf/").concat(t,".pdf"));case 9:if(o=e.sent,console.log("\n\nMUDAN\xc7A DE PAGINA:",o,typeof o,o.numPages,"\n\n\n"),a.currentPdf.numeroProcesso===t){e.next=14;break}throw console.error("Erro! Promessa do PDF atrasou. \n        PDF atual: ".concat(a.currentPdf.numeroProcesso,". PDF carrgeado: ").concat(t)),"Erro de carrgemaento atraso";case 14:a.currentPdf.pdf=o,r=o.numPages,a.currentPdf.totalPages=r,a.pdfGotoPage(r),a.setState({totalPaginas:r,paginaAtual:r,loading:!1}),e.next=35;break;case 21:if(e.prev=21,e.t0=e.catch(5),console.log("N\xe3o existe o pdf ".concat(t)),a.interval&&window.clearInterval(a.interval),a.canvasRenderContext2D){e.next=27;break}return e.abrupt("return");case 27:a.canvasRenderContext2D.fillStyle="#eef",a.canvasRenderContext2D.fillRect(0,0,1e3,1e3),a.canvasRenderContext2D.fillStyle="#990000",a.canvasRenderContext2D.strokeStyle="#000",a.canvasRenderContext2D.font="48px Arial",a.canvasRenderContext2D.fillText("".concat(t," n\xe3o baixado"),100,300),a.eprocessoData[t][a.sortKey]=a.eprocessoData[t][a.sortKey]+15,a.setState(function(e){return{processosList:e.processosList.sort(function(e,t){return a.eprocessoData[e][a.sortKey]>a.eprocessoData[t][a.sortKey]?1:-1})}});case 35:case"end":return e.stop()}},e,null,[[5,21]])}));return function(t){return e.apply(this,arguments)}}(),a.botaSituacaoNoCanvas=function(){},a.animaCanvas=function(){var e=Math.floor(100*Math.random()),t=Math.floor(100*Math.random());a.canvasRenderContext2D.fillStyle="rgba(".concat(t,", ").concat(e,", ").concat(3*e-t,", 0.1)"),a.interval=window.setInterval(function(){a.canvasRenderContext2D.fillStyle="rgba(".concat(t,", ").concat(e,", ").concat(3*e-t,", 0.1)");var o=Math.floor(720*Math.random()),n=Math.floor(720*Math.random()),r=Math.floor(100*Math.random()),s=Math.floor(100*Math.random());a.canvasRenderContext2D.fillRect(o,n,o+r,n+s),a.canvasRenderContext2D.fillRect(o,n,o-r,n-s),a.canvasRenderContext2D.fillRect(n,o,o+r,n+s),a.canvasRenderContext2D.fillStyle="rgba(0, 0, 0, 0.5)",a.canvasRenderContext2D.font="60px sans-serif",a.canvasRenderContext2D.fillText("Carregando",250,160)},300)},a.limpaSituacao=function(){a.setState(function(e){var t=e.situacao;return delete t[e.selecionado],{situacao:t}})},a.deleteArquivos=D(Object(p.a)(a),"http://localhost:".concat(e.portServer,"/deletefiles")),a.localStorageKey=a.props.data[Z].codEquipe+a.props.data[Z].pasta_download||"none",console.log("localStorageKey: ",a.localStorageKey),a.eprocessoData=a.props.data,a.atualizaColecao=a.atualizaColecao.bind(Object(p.a)(a)),a.handlePress=P(Object(p.a)(a)),a.addSituacao=h(Object(p.a)(a)),a.colecao={},a.PDF=a.props.PDFJS,a.loadPDF=a.loadPDF.bind(Object(p.a)(a)),a.focaNaDivPricincipal=a.focaNaDivPricincipal.bind(Object(p.a)(a)),console.log(a.props),a.currentPdf={pdf:null,page:null,zoom:1.5,verticalOffset:0,pageNumber:null,totalPages:null,canvasHeight:.95*window.outerHeight,canvasWidth:.95*window.outerWidth,numeroProcesso:"0"},a.divPrincipal=Object(s.createRef)(),a.sortKey="_s",a.state=Object(i.a)({},K,{processosList:[],situacao:{},loadPDF:a.loadPDF,focaNaDivPrincipal:a.focaNaDivPricincipal,setState:a.setState.bind(Object(p.a)(a)),manejar:w(Object(p.a)(a))}),delete a.eprocessoData[Z],a.db=new g(a.localStorageKey),a.webSocketSend=S(Object(p.a)(a)),console.log(">>>>>",a.db),a.db.setup().then(function(){console.log("foi"),a.db.getAll().then(function(e){if(e instanceof Array){for(var t=Object.keys(a.eprocessoData),o={},n=(new Date).valueOf(),r=function(r){var s=e.find(function(e){return e.numero===t[r]});if(console.log("********",t[r],s),s){if(n-s.data>7776e6)return console.log("antigo????",s.data,n,n-s.data),a.db.deleteRecord(s.numero),"continue";switch(o[s.numero]=s.situacao,a.eprocessoData[t[r]][Q]=s.data,s.situacao){case"AGUARDA INSCRI\xc7\xc3O":a.eprocessoData[t[r]][a.sortKey]="9999999999999999";break;default:a.eprocessoData[t[r]][a.sortKey]="999999"+s.situacao}}else a.eprocessoData[t[r]][a.sortKey]="00000"+a.eprocessoData[t[r]]["Nome Equipe \xdaltima"]||!1},s=0;s<t.length;s++)r(s);console.log("processosList -> ",t),console.log("this.eprocessoData -> ",a.eprocessoData);var c=t.sort(function(e,t){return a.eprocessoData[e]&&a.eprocessoData[t]&&a.eprocessoData[e][a.sortKey]>a.eprocessoData[t][a.sortKey]?1:-1});a.setState({situacao:o,processosList:c})}})}),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"pdfGotoPage",value:function(){var e=Object(r.a)(n.a.mark(function e(t){var a,o,r,s,c,i,l,u=this;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentPdf.pageNumber!==t){e.next=2;break}return e.abrupt("return");case 2:if(console.group("pdfGoTOpage"),this.currentPdf.pdf){e.next=7;break}return console.log("PDF n\xe3o carregado"),console.groupEnd(),e.abrupt("return");case 7:return this.currentPdf.pageNumber=t,e.next=10,this.currentPdf.pdf.getPage(t);case 10:return a=e.sent,this.currentPdf.page=a,o=a.getViewport(this.currentPdf.zoom),e.next=15,a.getTextContent();case 15:return r=e.sent,console.log("contents:",r),s=0,o.width>this.currentPdf.canvasWidth&&(s=-(o.width-this.currentPdf.canvasWidth)/2),c=o.height,o.height>this.currentPdf.canvasHeight&&(c=-(o.height-this.currentPdf.canvasHeight)/2+o.height),console.log(s,c),console.log("viewPort Antes",o),o.transform[4]=s,o.transform[5]=c+this.currentPdf.verticalOffset,console.log("viewPort Depois",o),i={canvasContext:this.canvasRenderContext2D,viewport:o},console.log("Novo Render Context",i),window.clearInterval(this.interval),e.next=31,a.render(i);case 31:l=e.sent,console.log("renderTask",l),console.log("renderContext",i),console.log("page",a),console.groupEnd(),this.setState(function(e){return t===e.paginaAtual?null:{paginaAtual:t,carregando:!1,loading:!1}},function(){u.focaNaDivPricincipal(),u.botaSituacaoNoCanvas()});case 37:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"pdfAumentaZoom",value:function(){var e=this.currentPdf.zoom+.2;this.currentPdf.zoom=e,this.pdfGotoPage(this.currentPdf.pageNumber)}},{key:"pdfDiminuiZoom",value:function(){var e=this.currentPdf.zoom-.2;this.currentPdf.zoom=e,this.pdfGotoPage(this.currentPdf.pageNumber)}},{key:"pdfSobeVisualizacao",value:function(){this.currentPdf.verticalOffset=this.currentPdf.verticalOffset-150,this.pdfGotoPage(this.currentPdf.pageNumber)}},{key:"pdfBaixaVisualizacao",value:function(){this.currentPdf.verticalOffset=this.currentPdf.verticalOffset+150,this.pdfGotoPage(this.currentPdf.pageNumber)}},{key:"pdfPagProxima",value:function(){this.currentPdf.pageNumber&&this.currentPdf.pageNumber!==this.currentPdf.totalPages&&this.pdfGotoPage(this.currentPdf.pageNumber+1)}},{key:"pdfPagAnterior",value:function(){this.currentPdf.pageNumber&&1!==this.currentPdf.pageNumber&&this.pdfGotoPage(this.currentPdf.pageNumber-1)}},{key:"focaNaDivPricincipal",value:function(){console.log("focaNaDivPricncipal()",document.activeElement),this.divPrincipal.current?(this.divPrincipal.current.focus(),console.log(" + focaNaDivPricncipal() >>> ",document.activeElement)):console.log("owxe...")}},{key:"componentDidMount",value:function(){this.canvas&&(this.canvas.height=this.currentPdf.canvasHeight,this.canvas.width=this.currentPdf.canvasWidth,this.canvasRenderContext2D=this.canvas.getContext("2d"),console.log(this.canvasRenderContext2D))}},{key:"render",value:function(){var e=this,t=Object.keys(this.state.situacao).filter(function(t){return"AGUARDA INSCRI\xc7\xc3O"===e.state.situacao[t]});t=t.filter(function(t){return e.eprocessoData[t]&&e.eprocessoData[t]&&e.eprocessoData[t]["N\xfamero de Inscri\xe7\xe3o"]&&e.eprocessoData[t]["N\xfamero de Inscri\xe7\xe3o"].length>2});var a=window.innerWidth/2,o=window.innerHeight/2,n=s.createElement("div",{className:"div-canvas-situacao",style:{left:a+Math.floor(10*Math.random()),top:o-500+Math.floor(10*Math.random())}},this.state.situacao[this.state.selecionado]),r=Object.keys(this.state.situacao).reduce(function(t,a){return t.add(e.state.situacao[a])},new Set);return this.state.destinos.forEach(function(e){r.add(e)}),console.log("TODASSITU --\x3e ",r,this.outerDiv),s.createElement(W.Provider,{value:this.state},this.state.loading&&s.createElement(G,null),s.createElement("div",{ref:this.divPrincipal,className:"App",tabIndex:0,onKeyDown:function(t){return e.handlePress(t)},style:{position:"relative",maxWidth:"100vw"}},s.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"}},s.createElement("div",{id:"outer_div",ref:function(t){return e.outerDiv=t}},n,s.createElement("canvas",{style:{zIndex:2},ref:function(t){return e.canvas=t},id:"pdfcanvas"})),s.createElement("div",{className:"div-wrap-flex"},this.state.processosList.map(function(t){return s.createElement(V,{key:"lis"+t,processo:t,procObj:e.eprocessoData[t]})}))),s.createElement("div",{className:"div-wrap-flex botoes-copiar-div",style:{margin:"1em"}},Array.from(r).map(function(t){return s.createElement(F,{key:"lis_"+t,dst:t,copy:e.copy,situacao:e.state.situacao,separador:e.state.separador,botaoAtivo:t===e.state.botaoClickAtivo,clicado:e.state.botoesClickClicados.some(function(e){return e===t})})})),s.createElement("button",{onClick:function(){return e.setState(function(e){return{separador:","===e.separador?"\n":","}})}},"Separador: ",this.state.separador),s.createElement("button",{onClick:function(){return e.deleteArquivos(e.state.copyList.join(","))}},"deletar ",this.state.botaoClickAtivo),s.createElement("textarea",{style:{margin:"0px",width:"100%",height:"5em",border:"2px solid rgb(169, 169, 169)",backgroundColor:"rgb(240, 245, 255)",padding:"1em",boxSizing:"border-box",resize:"vertical"},ref:function(t){return e.textarea=t}}),this.state.showInput&&s.createElement("div",{style:{position:"fixed",right:30,top:100,margin:"auto",padding:20,backgroundColor:"#003876",boxShadow:"15px 15px 20px #000",zIndex:4}},s.createElement("input",{ref:function(t){return e.input=t},onKeyDown:function(t){return e.addSituacao(t)},style:{fontSize:"3em",padding:10}})),this.state.showGotoPageInput&&s.createElement("div",{style:{position:"fixed",right:30,bottom:200,margin:"auto",padding:20,backgroundColor:"#003876",boxShadow:"15px 15px 20px #000",zIndex:4}},s.createElement("input",{ref:function(t){return e.gotoinput=t},onKeyDown:this.goToPageInputAction,style:{fontSize:"4em",padding:10},size:5})),s.createElement("div",{style:{margin:"auto"}},s.createElement(R,{host:"http://localhost:".concat(this.props.portServer),db:this.db,list:Object.keys(this.state.situacao).filter(function(t){return"AGUARDA INSCRI\xc7\xc3O"===e.state.situacao[t]}).map(function(e){return e}),eprocessoData:this.props.data})),s.createElement(Y,{paginaAtual:this.state.paginaAtual,selecionado:this.state.selecionado,totalPaginas:this.state.totalPaginas,situacao:this.state.situacao[this.state.selecionado],loading:this.state.loading}),s.createElement($,{processosListLength:this.state.processosList.length,situacaolength:Object.keys(this.state.situacao).length,processoObj:this.eprocessoData[this.state.selecionado]}),s.createElement(_,{endpoints:["http://localhost:".concat(this.props.portServer,"/eval_js"),"http://localhost:".concat(this.props.portServer,"/eval_sida_window_js")],on:!1}),s.createElement("br",null),s.createElement("br",null),s.createElement("br",null)))}}]),t}(s.Component),$=s.memo(function(e){return s.createElement("div",{className:"bottom-info"},s.createElement("div",{style:{backgroundColor:e.situacaolength<e.processosListLength?"rgba(0, 0, 0, 0.3)":"rgba(255, 100, 100, 0.6)"}},e.situacaolength," / ",e.processosListLength," processos."),s.createElement("div",null,s.createElement("span",{style:{color:"#fff",backgroundColor:"rgba(0, 0, 0, 0.4)"}},e.processoObj&&e.processoObj["Nome \xdaltimo Documento Confirmado"]),s.createElement("span",{style:{color:"#000",backgroundColor:"rgba(255, 255, 255, 0.4)"}},e.processoObj&&e.processoObj["Nome Equipe \xdaltima"]),s.createElement("span",{style:{color:"#fff",backgroundColor:"rgba(100, 100, 100, 0.4)"}},e.processoObj&&e.processoObj["Nome Contribuinte"])))}),Y=s.memo(function(e){return e.loading?s.createElement("div",{className:"header-info-loading"},s.createElement("h1",{className:"title is-6"},"CARREGANDO...")):s.createElement("div",{className:"header-info"},s.createElement("h1",{className:"title is-6"},e.paginaAtual," / ",e.totalPaginas," - ",e.selecionado,e.situacao&&"    |  ",e.situacao))}),ee=X,te=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ae(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}a(499);console.info("PDF BOOTSTRAP",pdfjsLib,pdfjsWorker);var oe=window.PORT_SERVER||"9090";console.log("eprocessoData",eprocData),Object(r.a)(n.a.mark(function e(){var t,a,o;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.info("INICIO:",pdfjsLib,pdfjsWorker),t={__META__:{}},null!==eprocData){e.next=25;break}return console.log("vai atr\xe1s do api pq o da janela t\xe1 null"),e.prev=4,e.next=7,fetch("http://localhost:".concat(oe,"/json"));case 7:if(200===(a=e.sent).status){e.next=11;break}return console.log("Problema no Fetch Inicial. Status Code: "+a.status),e.abrupt("return");case 11:return e.next=13,a.json();case 13:o=e.sent,console.log(o),console.log("veio do fetch"),t=o,e.next=23;break;case 19:e.prev=19,e.t0=e.catch(4),console.log("ERRO",e.t0),c.render(s.createElement("h1",null,"Erro"),document.getElementById("root"));case 23:e.next=26;break;case 25:t=eprocData;case 26:c.render(s.createElement(ee,{data:t,PDFJS:pdfjsLib,portServer:oe}),document.getElementById("root"));case 27:case"end":return e.stop()}},e,null,[[4,19]])}))(),function(){if("serviceWorker"in navigator){if(new URL("",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");te?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ae(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):ae(e)})}}()}},[[194,1,2]]]);
//# sourceMappingURL=main.07e34e16.chunk.js.map