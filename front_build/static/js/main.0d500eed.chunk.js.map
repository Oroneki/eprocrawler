{"version":3,"sources":["components/downloader.module.css","components/processso_scrapper.module.css","app_functions/addSituacao.ts","app_functions/db.ts","app_functions/postData.ts","app_functions/deleteArquivos.ts","app_functions/handlePress.ts","app_functions/manejar.ts","components/button_mutex.tsx","app_functions/wsevents.ts","context.ts","components/downloader.tsx","components/processoScrapper.tsx","components/jseditor.tsx","app_functions/debounce.ts","components/listagem_dummy.tsx","components/loading.tsx","components/processo.tsx","app_functions/getDigitoCPF_CNPJ.ts","web_workers/web_worker_component.tsx","components/handleNovoSida.tsx","components/downloadFinished_events.tsx","components/DeleteDiff.tsx","App.tsx","registerServiceWorker.ts","index.tsx"],"names":["module","exports","downloader","download","processo","bytes","spinner","spinnn","move","scrapper","proc","lista","flutua","addSituacao","self","ev","nativeEvent","keyCode","setState","showInput","focaNaDivPricincipal","novo","input","value","toUpperCase","s","destinosNovos","destinos","find","dst","concat","Object","objectSpread","situacao","defineProperty","selecionado","db","addOrAtualiza","numero","state","data","Date","botaSituacaoNoCanvas","DB","key","_this","this","version","arguments","length","undefined","classCallCheck","database","stringKey","dbVersion","obj","console","log","error","Error","trans","transaction","oncomplete","onerror","onabort","objectStore","put","addOrAtualizaSida","deleteRecord","delete","getSidaRecord","callback","t","get","onsuccess","getAll","Promise","reso","reje","openCursor","res","e","curr","target","result","push","continue","getProcessoDocs","_ref","asyncToGenerator","regenerator_default","a","mark","_callee","resolve","reject","wrap","_context","prev","next","setup","stop","_x","_x2","apply","createClass","_this2","dbreq","window","indexedDB","open","r","j","onupgradeneeded","objectStoreNames","contains","createObjectStore","keyPath","postData","url","vem","axios","post","sent","t0","abrupt","status","statusText","deleteArquivos","thiscomponent","jeisum","certo","errado","forEach","manejar","handlePress","showGotoPageInput","document","activeElement","id","antigo","arrT","processosList","indexAntigo","findIndex","num","loadPDF","atual","indexAtual","save","JSON","stringify","localStorage","setItem","localStorageKey","pdfGotoPage","paginaAtual","setTimeout","focus","gotoinput","stateStr","getItem","stateObj","parse","pdfDiminuiZoom","pdfAumentaZoom","pdfPagAnterior","pdfPagProxima","pdfBaixaVisualizacao","pdfSobeVisualizacao","limpaSituacao","dossieProcesso","toConsumableArray","pageProcessos","judicial","warn","resultado","newState","manejoAntigo","manejo","newDeletados","Set","deletadosOk","values","element","add","errosDelete","has","newErros","newErros2","newCopiados","copiados","ButtonMutex","props","_useState","useState","_useState2","slicedToArray","isLocked","setIsLocked","react","onClick","fetch","portServer","then","json","f","catch","className","style","width","JanelinhaProcessoInfoEventInfo","tipo","parseFunction","pld","striped_prc_events","split","stripped_events","events","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","se","splitted","event","nome_doc","ordem","parseInt","pag_inicio","pag_fim","tamanho","err","return","processoImpuro","infos","DownloadConcludedEventInfo","striped","processo_filename","final_filepath","DownloadBytesEventInfo","ALL_DOWNLOADS_FINISHED_EVINFO","defaultState","totalPaginas","carregando","separador","botaoClickAtivo","botoesClickClicados","copyList","focaNaDivPrincipal","loading","downloaded","Context","createContext","initialDown","Downloader","context","React","intersection","filter","x","diff2","faltam","size","faltavam","downloads","setDownloads","_useState3","_useState4","show","setShow","vals","action","detail","remove","loga","hide","addEventListener","removeEventListener","css","map","d","ProcessoDownloading","margin","max","downloader_Progress","total","bulmaClass","fontSize","downloader_PLoading","color","PLoading","viewBox","height","cx","cy","fill","y","mask","defaultProps","bgcolor","Progress","Math","round","ProcessoScrapper","processos","p","TabelaScrapper","ctx","_React$useState","_React$useState2","info","i","includes","padding","borderRadius","dossie","depois","arr","deleteDossie","slice","Editor","possibleConstructorReturn","getPrototypeOf","call","debounceBabel","codeBlockDisplayRef","sendCodeToEndpoint","resp","selectedEndPoint","transpiledCode","handleChange","getHtml","__html","highlightedCode","toggleEndpoint","newIndex","index","endpoints","transformBabel","c","code","Babel","presets","plugins","babelPluginBlockScoping","babelPluginTransformArrowFunctions","replace","trim","high","Prism","javascript","on","func","wait","immediate","timeout","args","callNow","clearTimeout","debounce","offDiv","display","alignItems","justifyContent","flexDirection","flex","rows","fontFamily","lineHeight","backgroundColor","border","onChange","ref","dangerouslySetInnerHTML","Listagem","copy","botaoAtivo","clicado","keys","numProc","join","LoadingComponent","rectStyle","stroke","strokeWidth","rectNodes","getElementById","withCache","fn","set","map1","Map","map2","stringToNumber","Array","from","reduce","pr","cu","charCodeAt","getColor","Processo","procObj","ultres","tarefa","dataEntrada","dataSituacao","dataSitu","numeroBelo","hojeVal","valueOf","dataEntraSplitted","dataEntradaDate","ehAntigaClassificacao","opa","ehAntigoProcesso","floor","digito","CPF_OU_CNPJ","semNada","substr","getDigito","cpfCnpj","src_context","Consumer","toLocaleDateString","WorkerComponentHandler","workerAddr","process","worker","Worker","onmessage","messageParsed","evv","CustomEvent","payload","dispatchEvent","handleWorkerMessages","postMessage","wsPort","name","dbName","parseDate","date","dma","newdate","NovoSidaConsulta","consultas","setConsultas","setLoading","_useState5","_useState6","copyed","setCopyed","_useState7","_useState8","consultou","setConsultou","_useState9","_useState10","inscritos","setInstritos","textRef","trataEvent","sort","ant","dep","antDate","eprocessoData","depDate","getInscritos","ok","every","dataInscricao","removeListerners","procura","processosNumbersString","once","situacoes","k","host","Consulta","abreProcesso","loadPdf","consulta","eprocDados","arquiva","current","select","execCommand","despacho","_useState11","_useState12","showText","setShowText","allExtintas","allSits","isAllSameSit","inscricao","marginBottom","handleNovoSida_InscricaoInfo","insc","InscricaoInfo","DownloadFinishedListener","pop","addProcesso","DeleteDiff","useContext","deleteFiles","META","App","colecao","PDF","sortKey","ws","currentPDFRendertask","textarea","canvas","outerDiv","divPrincipal","canvasRenderContext2D","currentPdf","interval","atualizaColecao","node","str","dstStr","listaProcessos","some","blur","goToPageInputAction","handleGetProcesso","_callee2","_context2","page","delegateYield","regex","matches","m","uniques","getTextContent","items","exec","lastIndex","match","groupIndex","_ref2","_callee3","pdfStr","pdf","pageNumber","_context3","clearInterval","numeroProcesso","getDocument","numPages","totalPages","fillStyle","fillRect","strokeStyle","font","fillText","b","animaCanvas","qq","random","ww","setInterval","q","w","newSituacao","addBaixado","newSet","assertThisInitialized","codEquipe","pasta_download","bind","PDFJS","zoom","verticalOffset","canvasHeight","outerHeight","canvasWidth","outerWidth","createRef","agora","_loop","ProcObj","newProcessosList","getPage","viewport","getViewport","transform","renderContext","canvasContext","_internalRenderTask","running","cancel","render","promise","_context4","futuro","getContext","_this3","posWidth","innerWidth","posHeight","innerHeight","divCanvas","left","top","todasSitu","acc","atu","destino","Provider","loading_LoadingComponent","tabIndex","onKeyDown","position","maxWidth","App_DocInfo","pagAtual","zIndex","n","components_processo","listagem_dummy","boxSizing","resize","right","boxShadow","bottom","handleNovoSida_NovoSidaConsulta","InfoHeader","BottomInfo","processosListLength","situacaolength","processoObj","jseditor_Editor","processoScrapper_ProcessoScrapper","processoScrapper_TabelaScrapper","button_mutex_ButtonMutex","DeleteDiff_DeleteDiff","web_worker_component_WorkerComponentHandler","downloader_Downloader","downloadFinished_events_DownloadFinishedListener","DocInfo","doc","setDoc","_React$useState3","_React$useState4","setAnt","_React$useState5","_React$useState6","setIni","_callee5","indice","sub","_context5","isLocalhost","Boolean","location","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","pdfjsWorkerBlob","Blob","pdfWorker","pdfjsWorkerBlobURL","URL","createObjectURL","PORT_SERVER","pdfjs","workerSrc","eprocData","eprocDataFinal","response","__META__","ReactDOM","src_App_0","toString","origin","headers","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.0d500eed.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"downloader\":\"downloader_downloader__3CLIr\",\"download\":\"downloader_download__18InX\",\"processo\":\"downloader_processo__3QYBB\",\"bytes\":\"downloader_bytes__29w0V\",\"spinner\":\"downloader_spinner__3wvRE\",\"spinnn\":\"downloader_spinnn__2luWJ\",\"move\":\"downloader_move__11RZm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scrapper\":\"processso_scrapper_scrapper__3QoiH\",\"proc\":\"processso_scrapper_proc__HPjR3\",\"lista\":\"processso_scrapper_lista__3eMTl\",\"flutua\":\"processso_scrapper_flutua__1n-Ti\"};","import App from '../App';\r\n\r\nexport const addSituacao = (self: App) => (ev) => {\r\n  // console.log('addSitucao', ev);\r\n  if (!(ev.nativeEvent.keyCode === 13 || ev.nativeEvent.keyCode === 27)) {\r\n    return;\r\n  }\r\n  if (ev.nativeEvent.keyCode === 27) {\r\n    self.setState(\r\n      { showInput: false },\r\n      self.focaNaDivPricincipal\r\n    );\r\n  }\r\n  let novo = (self.input as HTMLInputElement).value.toUpperCase();\r\n  self.setState(\r\n    (s) => {\r\n      let destinosNovos: string[] = s.destinos;\r\n      if (!(s.destinos.find((dst) => dst === novo))) {\r\n        destinosNovos = destinosNovos.concat(novo);\r\n      }\r\n      // self.colecao[s.selecionado].focus();\r\n      return {\r\n        ...s,\r\n        situacao:\r\n          {\r\n            ...s.situacao,\r\n            [s.selecionado]: novo\r\n          },\r\n        showInput: false,\r\n        destinos: destinosNovos,\r\n      };\r\n    },\r\n    () => {\r\n      self.db.addOrAtualiza({\r\n        numero: self.state.selecionado,\r\n        situacao: novo,\r\n        data: new Date(),\r\n      });\r\n      self.focaNaDivPricincipal();\r\n      self.botaSituacaoNoCanvas();\r\n    }\r\n  );\r\n};","export type SituObj = { \r\n    numero: string, \r\n    situacao: string, \r\n    data: Date,\r\n    judicial?: string,\r\n}\r\n\r\nexport class DB {\r\n    private database: IDBDatabase;\r\n    private stringKey: string;\r\n    private dbVersion: number;\r\n    constructor(public key: string, version: number = 3) {\r\n        this.stringKey = key;\r\n        this.dbVersion = version;\r\n    }\r\n    setup() {\r\n        if (typeof this.database !== \"undefined\") {\r\n            console.log(\"db already init...\")\r\n            return\r\n        }\r\n        const dbreq = window.indexedDB.open(this.stringKey, this.dbVersion);\r\n        const prom = new Promise((r, j) => {\r\n            dbreq.onupgradeneeded = (ev) => {\r\n                // console.log('UPGRADE DB');\r\n                this.database = dbreq.result;\r\n                if (!this.database.objectStoreNames.contains('situacoes')) {\r\n                    // console.log('não contem a \"tabela\" situacoes');\r\n                    this.database.createObjectStore('situacoes', { keyPath: 'numero' });\r\n                } else {\r\n                    // console.log('tem a tabela situacoes.', this.database);                \r\n                }\r\n                if (!this.database.objectStoreNames.contains('sida')) {\r\n                    // console.log('não contem a \"tabela\" situacoes');\r\n                    this.database.createObjectStore('sida', { keyPath: 'processo' });\r\n                } else {\r\n                    // console.log('tem a tabela situacoes.', this.database);                \r\n                }\r\n                if (!this.database.objectStoreNames.contains('documentos')) {\r\n                    this.database.createObjectStore('documentos', { keyPath: 'processo' });\r\n                    console.log('updated db')\r\n                } else {\r\n                }\r\n                if (!this.database.objectStoreNames.contains('judiciais')) {\r\n                    // console.log('não contem a \"tabela\" situacoes');\r\n                    this.database.createObjectStore('judiciais', { keyPath: 'dossie' });\r\n                } else {\r\n                    // console.log('tem a tabela situacoes.', this.database);                \r\n                }\r\n                r(this);\r\n            };\r\n            dbreq.onsuccess = (ev: any) => {\r\n                // console.log('SUCESS DB');\r\n                // console.log('db sucess', ev);\r\n                this.database = ev.target.result;\r\n                // console.log(this.database);\r\n                r(this);\r\n            };\r\n            dbreq.onerror = (ev) => {\r\n                console.log('db ERROR', ev);\r\n                j();\r\n            };\r\n        });\r\n        return prom;\r\n    }\r\n\r\n    addOrAtualiza = (obj: SituObj) => {\r\n        if (typeof this.database === \"undefined\") {\r\n            console.log(\"database not initialized yet...\")\r\n        }\r\n        if (!obj.situacao) {\r\n            console.error(\"não salva sem situação\")\r\n            throw new Error(\"Não salva sem situação\");\r\n            \r\n        }\r\n        // console.log('transacao:', obj);\r\n        const trans = this.database.transaction(['situacoes'], 'readwrite');\r\n        trans.oncomplete = () => {\r\n            // console.log('x transacao completada.');\r\n        };\r\n        trans.onerror = () => {\r\n            // console.log('x transacao ERRO.');\r\n        };\r\n        trans.onabort = () => {\r\n            // console.log('x transacao ABORTADA.');\r\n        };\r\n        const transacao = trans.objectStore('situacoes');\r\n        transacao.put(obj);\r\n    }\r\n\r\n    addOrAtualizaSida = (obj: any) => {\r\n        if (typeof this.database === \"undefined\") {\r\n            console.log(\"database not initialized yet...\")\r\n        }\r\n        // console.log('transacao SIDA:', obj);\r\n        const trans = this.database.transaction(['sida'], 'readwrite');\r\n        trans.oncomplete = () => {\r\n            // console.log('x transacao completada.');\r\n        };\r\n        trans.onerror = () => {\r\n            // console.log('x transacao ERRO.');\r\n        };\r\n        trans.onabort = () => {\r\n            // console.log('x transacao ABORTADA.');\r\n        };\r\n        const transacao = trans.objectStore('sida');\r\n        transacao.put(obj);\r\n    }\r\n\r\n    deleteRecord = (numero: string) => {\r\n        if (typeof this.database === \"undefined\") {\r\n            console.log(\"database not initialized yet...\")\r\n        }\r\n        // console.log('transacao DELETE:', numero);\r\n        const trans = this.database.transaction(['situacoes'], 'readwrite');\r\n        trans.oncomplete = () => {\r\n            // console.log('x transacao completada.', numero, 'deletado.');\r\n        };\r\n        trans.onerror = () => {\r\n            // console.log('x transacao ERRO.');\r\n        };\r\n        trans.onabort = () => {\r\n            // console.log('x transacao ABORTADA.');\r\n        };\r\n        const transacao = trans.objectStore('situacoes');\r\n        transacao.delete(numero);\r\n\r\n    }\r\n\r\n    getSidaRecord = (processo: string, callback: (e: Event) => void) => {\r\n        if (typeof this.database === \"undefined\") {\r\n            console.log(\"database not initialized yet...\")\r\n        }\r\n        const trans = this.database.transaction(['sida'], 'readonly');\r\n        // @ts-ignore\r\n        trans.oncomplete = (t) => {\r\n            // console.log('x transacao SIDA GET completada.', t);\r\n        };\r\n        trans.onerror = () => {\r\n            // console.log('x transacao ERRO.');\r\n        };\r\n        trans.onabort = () => {\r\n            // console.log('x transacao ABORTADA.');\r\n        };\r\n        const store = trans.objectStore('sida');\r\n        const req = store.get(processo)\r\n        req.onsuccess = (ev) => {\r\n            // console.log('success: ', ev)\r\n            callback(ev)\r\n        }\r\n\r\n    }\r\n\r\n    getAll: () => Promise<Array<SituObj>> = () =>  {\r\n\r\n        const retuno = new Promise((reso, reje) => {\r\n            // console.log('database >', this.database);\r\n            const trans = this.database.transaction(['situacoes']).objectStore('situacoes').openCursor();\r\n            const res: Array<any> = [];\r\n            trans.onsuccess = (e: any) => {\r\n                // console.log('   transacao cursor sucesso...', e, typeof e);\r\n                const curr: IDBCursorWithValue = e.target.result;\r\n                if (curr) {\r\n                    // console.log(curr.value);\r\n                    res.push(curr.value);\r\n                    curr.continue();\r\n                } else {\r\n                    // console.log('\\n\\nFIM\\n\\n');\r\n                    // console.log('resolução ->', res, '');\r\n                    return reso(res as SituObj[]);\r\n                }\r\n            };\r\n            trans.onerror = () => {\r\n                // console.log('cursor    transacao ERRO.');\r\n                return reje('miow');\r\n            };\r\n        });\r\n        return retuno as Promise<SituObj[]>;\r\n    }\r\n\r\n    getProcessoDocs = (processo: string) => {\r\n        return new Promise(async (resolve, reject) => {\r\n            if (typeof this.database === \"undefined\") {\r\n                console.log(\"database not initialized yet...\")\r\n                await this.setup();\r\n                console.log(\"initiualided\")\r\n            }\r\n            const trans = this.database.transaction(['documentos'])\r\n            const get = trans.objectStore('documentos').get(processo)\r\n            get.onerror = function (e) {\r\n                reject(e)\r\n            }\r\n            get.onsuccess = function (e) {\r\n                const processo = (e.target as any).result\r\n                // console.log('%c Processo Docs:', 'color: green', processo)\r\n                resolve(processo)\r\n            }\r\n        })\r\n    }\r\n\r\n}","import axios, { AxiosResponse } from 'axios';\r\n\r\nexport const postData = async (url: string, data: string): Promise<object | null> => {\r\n  // console.log('postData', url, data);\r\n  let vem: AxiosResponse;\r\n  try {\r\n    vem = await axios.post(\r\n      url,\r\n      data\r\n    );\r\n  } catch (error) {\r\n    console.log('Opa - Erro do axiose');\r\n    console.log(error);\r\n    return null;\r\n  }\r\n  if (!(vem.status < 300)) {\r\n    console.log('Opa - Erro no request do post pra delete');\r\n    console.log(vem.status, vem.statusText);\r\n    console.log(vem);\r\n    return null;\r\n  }\r\n  console.log(vem.data);\r\n  return vem.data;\r\n};\r\n","\r\nimport { postData } from './postData';\r\n\r\nexport const deleteArquivos = (thiscomponent, url: string) => async (data: string) => {\r\n    // console.log('post', url, 'data->', data);\r\n    let jeisum = await postData(url, data) as {certo: string[], errado: string[]} | null;\r\n    if (!jeisum) {\r\n        return null;\r\n    }\r\n    const {certo, errado} = jeisum;\r\n    certo.forEach(\r\n        proc => thiscomponent.state.manejar('deletou', proc)\r\n    );\r\n    errado.forEach(\r\n        proc => thiscomponent.state.manejar('falhou', proc)\r\n    );\r\n    return jeisum;\r\n};\r\n","import App from '../App';\r\n// import { SyntheticEvent as Event } from 'react';\r\n\r\nexport const handlePress = (self: App) => (ev: any) => {\r\n  console.log('>', ev.nativeEvent.key, ' - ', ev.nativeEvent.keyCode);\r\n  if (self.state.showInput || self.state.showGotoPageInput) {\r\n    // console.log('ignorar...');\r\n    return;\r\n  }\r\n  if (document!.activeElement!.id === 'editor') {\r\n    return;\r\n  }\r\n  switch (ev.nativeEvent.keyCode) {\r\n    case 70: // f\r\n      // console.groupCollapsed('handlePress');\r\n      self.setState(\r\n        s => {\r\n          let antigo = s.selecionado;\r\n          let arrT = self.state.processosList;\r\n          // let key = self.sortKey;\r\n          let indexAntigo = arrT.findIndex(num => num === antigo);\r\n          // console.log('indexAntigo', indexAntigo);\r\n          let novo = arrT[indexAntigo + 1];\r\n          if (novo === undefined) {\r\n            novo = arrT[0];\r\n          }\r\n          // console.log('novo', novo);\r\n          self.loadPDF(novo);\r\n          // self.colecao[arr[novoIndex]].focus();        \r\n          return { selecionado: novo };\r\n        },\r\n        () => self.focaNaDivPricincipal()\r\n      );\r\n      // console.groupEnd();\r\n      break;\r\n\r\n    case 68: // d\r\n      // console.groupCollapsed('handlePress');\r\n      self.setState(\r\n        s => {\r\n          let antigo = s.selecionado;\r\n          let arrT = self.state.processosList;\r\n          // let key = self.sortKey;\r\n          let indexAntigo = arrT.findIndex(num => num === antigo);\r\n          // console.log('indexAntigo', indexAntigo);\r\n          let novo: string;\r\n          if (indexAntigo === 0) {\r\n            novo = arrT[arrT.length - 1];\r\n          } else {\r\n            novo = arrT[indexAntigo - 1];\r\n          }\r\n          // console.log('novo', novo);\r\n          self.loadPDF(novo);\r\n          // self.colecao[arr[novoIndex]].focus();        \r\n          return { selecionado: novo };\r\n        },\r\n        () => self.focaNaDivPricincipal()\r\n      );\r\n      // console.groupEnd();\r\n\r\n      break;\r\n    case 74: // j\r\n      self.setState(\r\n        (s) => {\r\n          let atual = s.situacao[s.selecionado];\r\n          if (atual === '0') { return null; }\r\n          if (!atual) {\r\n            return { ...s, situacao: { ...s.situacao, [s.selecionado]: s.destinos[0] } };\r\n          }\r\n          let indexAtual = s.destinos.findIndex(a => a === atual);\r\n          let tam = s.destinos.length;\r\n          if (indexAtual === tam - 1) {\r\n            return { ...s, situacao: { ...s.situacao, [s.selecionado]: s.destinos[0] } };\r\n          }\r\n          return { ...s, situacao: { ...s.situacao, [s.selecionado]: s.destinos[indexAtual + 1] } };\r\n        },\r\n        () => {\r\n          let save = JSON.stringify(self.state);\r\n          localStorage.setItem(self.localStorageKey, save);\r\n          self.db.addOrAtualiza({\r\n            numero: self.state.selecionado,\r\n            situacao: self.state.situacao[self.state.selecionado],\r\n            data: new Date(),\r\n          }\r\n          );\r\n          self.pdfGotoPage(self.state.paginaAtual);\r\n        }\r\n      );\r\n      break;\r\n    case 73: // i      \r\n      self.setState(\r\n        (s) => {\r\n          if (s.selecionado === '0') {\r\n            return null;\r\n          }\r\n          return { ...s, showInput: true };\r\n        },\r\n        () => setTimeout(\r\n          () => {\r\n            if (!self.input) {\r\n              return\r\n            }\r\n            (self.input as HTMLInputElement).value = '';\r\n            (self.input as HTMLInputElement).focus();\r\n          },\r\n          0)\r\n      );\r\n      break;\r\n\r\n    case 71: // g\r\n      self.setState(\r\n        (s) => {\r\n          if (s.selecionado === '0') {\r\n            return null;\r\n          }\r\n          return { ...s, showGotoPageInput: true };\r\n        },\r\n        () => setTimeout(\r\n          () => {\r\n            if (!self.gotoinput) {\r\n              // console.log('gotoinput nada...');\r\n              return;\r\n            }\r\n            (self.gotoinput as HTMLInputElement).value = '';\r\n            (self.gotoinput as HTMLInputElement).focus();\r\n          },\r\n          0)\r\n      );\r\n      break;\r\n\r\n    case 109: // - (teclado numerico)\r\n      let stateStr = localStorage.getItem(self.localStorageKey);\r\n      if (stateStr === null) {\r\n        // console.log('Nada salvo no localStorage');\r\n        return;\r\n      }\r\n      let stateObj = JSON.parse(stateStr);\r\n      self.setState(stateObj);\r\n      break;\r\n    case 81: // q\r\n      self.pdfDiminuiZoom();\r\n      // \r\n      break;\r\n    case 87: // w\r\n      self.pdfAumentaZoom();\r\n      break;\r\n    case 65: // a\r\n      self.pdfPagAnterior();\r\n      break;\r\n    case 83: // s\r\n      self.pdfPagProxima();\r\n      break;\r\n    case 186: // ç\r\n      self.pdfBaixaVisualizacao();\r\n      break;\r\n    case 76: // l(L)\r\n      self.pdfSobeVisualizacao();\r\n      break;\r\n    case 192: // ' aspas simples\r\n      self.limpaSituacao();\r\n      break;\r\n    case 80: // p\r\n    console.log(\"aqui\")\r\n    self.setState((s) => {\r\n      return {\r\n        ...s,\r\n        dossieProcesso: [\r\n          ...s.dossieProcesso,\r\n          [s.selecionado, s.pageProcessos[0], s.situacao[s.selecionado]]\r\n        ]\r\n      }\r\n    }, () => {\r\n      self.db.addOrAtualiza({\r\n        data: new Date,\r\n        numero: self.state.selecionado,\r\n        situacao: self.state.situacao[self.state.selecionado],\r\n        judicial: self.state.pageProcessos[0],\r\n      })\r\n    })\r\n      \r\n      break;\r\n    default:\r\n      console.warn('%c handlePress', 'background-color: #ccc;', ev)\r\n      break;\r\n  }\r\n\r\n};","import { ManejoState } from '../context';\r\n\r\nexport const manejar = (self) => (resultado, processo) => {\r\n    // console.log('manejar -> ', resultado, processo);    \r\n    self.setState((state) => {\r\n        const manejoAntigo: ManejoState = self.state.manejo;\r\n        let newState: ManejoState;\r\n        // console.log('manejar ->', resultado, processo, 'antigo', manejoAntigo);\r\n        switch (resultado) {\r\n            case 'deletou':\r\n                const newDeletados = new Set(manejoAntigo.deletadosOk.values());\r\n                // console.log('newDeletados', newDeletados);\r\n                newDeletados.forEach(element => {\r\n                    // console.log('deletar ', element);\r\n                    self.db.deleteRecord(element);\r\n                });\r\n                newDeletados.add(processo);\r\n                newState = {\r\n                    ...manejoAntigo,\r\n                    deletadosOk: newDeletados,\r\n                };\r\n                if (manejoAntigo.errosDelete.has(processo)) {\r\n                    const newErros = new Set(manejoAntigo.errosDelete.values());\r\n                    newErros.delete(processo);\r\n                    newState = {\r\n                        ...newState,\r\n                        errosDelete: newErros\r\n                    };\r\n                }\r\n                break;\r\n            case 'falhou':\r\n                const newErros2 = new Set(manejoAntigo.errosDelete.values());\r\n                newErros2.add(processo);\r\n                newState = {\r\n                    ...manejoAntigo,\r\n                    errosDelete: newErros2,\r\n                };\r\n                break;\r\n            case 'copiou':\r\n                const newCopiados = new Set(manejoAntigo.copiados.values());\r\n                newCopiados.add(processo);\r\n                newState = {\r\n                    ...manejoAntigo,\r\n                    copiados: newCopiados,\r\n                };\r\n                break;\r\n            default:\r\n                return null;\r\n        }\r\n        return {\r\n            ...state,\r\n            manejo: newState,\r\n        };\r\n    }\r\n    );\r\n};","import * as React from \"react\";\r\nimport { useState } from \"react\";\r\n\r\nexport const ButtonMutex = (props: { portServer: string }) => {\r\n\r\n    const [isLocked, setIsLocked] = useState(false)\r\n\r\n    const endPoint = () => {\r\n        fetch(`http://localhost:${props.portServer}/toggle_lock`)\r\n            .then(res => res.json())\r\n            .then(f => {\r\n                console.log('BUTTON LOCK RES:', f);\r\n                setIsLocked(!isLocked);\r\n            })\r\n            .catch(e => console.error('ERROR ', e))\r\n    }\r\n\r\n    return (\r\n        <button onClick={endPoint} className=\"button mutex\" style={{ width: '280px' }}>\r\n            Toggle Mutex {isLocked ? \"(paused)\" : \"\"}\r\n        </button>\r\n    )\r\n}","import { DocProcesoInfo, DownloadBytesMessage, DownloadConcluded, JanelinhaEvent, JanelinhaProcessoInfo, WSEventInfo } from \"./WSEventInfo_interfaces\";\r\n\r\nexport const JanelinhaProcessoInfoEventInfo: WSEventInfo<JanelinhaProcessoInfo> = {\r\n    tipo: \"JANELINHA_INFO_PROCESSO\",\r\n    parseFunction: (pld) => {\r\n        const striped_prc_events = pld.split('|@@|');\r\n        const processo = striped_prc_events[0]\r\n        const stripped_events = striped_prc_events[1].split('|##|')\r\n        const events: DocProcesoInfo[] = []\r\n        for (const se of stripped_events) {\r\n            if (se.length < 5) {\r\n                return\r\n            }\r\n            const splitted = se.split('|')\r\n            const event: DocProcesoInfo = {\r\n                nome_doc: splitted[0],\r\n                ordem: parseInt(splitted[1], 10),\r\n                pag_inicio: parseInt(splitted[2], 10),\r\n                pag_fim: parseInt(splitted[3], 10),\r\n                situacao: splitted[4],\r\n                tamanho: parseInt(splitted[5], 10),\r\n            }\r\n            events.push(event)\r\n        }\r\n        return {\r\n            processoImpuro: processo,\r\n            infos: events\r\n        }\r\n    },\r\n    callback: null\r\n}\r\n\r\nexport const DownloadConcludedEventInfo: WSEventInfo<DownloadConcluded> = {\r\n    tipo: \"DOWNLOAD_FINISHED\",\r\n    parseFunction: (pld) => {\r\n        const striped = pld.split('|');\r\n\r\n        return {\r\n            processo_filename: striped[0],\r\n            final_filepath: striped[1],\r\n        }\r\n    },\r\n    callback: null\r\n}\r\n\r\nexport const JanelinhaEventInfo: WSEventInfo<JanelinhaEvent> = {\r\n    tipo: \"JANELINHA_EVENT\",\r\n    parseFunction: (pld) => {\r\n        const striped = pld.split('|');\r\n        return {\r\n            janId: striped[0],\r\n            processoImpuro: striped[1],\r\n            descricao: striped[2],\r\n            fase: parseInt(striped[3], 10),\r\n        }\r\n    },\r\n    callback: null\r\n}\r\n\r\nexport const DownloadBytesEventInfo: WSEventInfo<DownloadBytesMessage> = {\r\n    tipo: \"D_REPORTER\",\r\n    parseFunction: (pld) => {\r\n        const striped = pld.split('|');\r\n        return {\r\n            processo_filename: striped[0],\r\n            bytes: parseInt(striped[1], 10)\r\n        }\r\n    },\r\n    callback: null\r\n}\r\n\r\nexport const IMALIVEInfo: WSEventInfo<string> = {\r\n    tipo: \"im_alive\",\r\n    parseFunction: (pld) => \"parsed\",\r\n    callback: null\r\n}\r\n\r\nexport const ALL_DOWNLOADS_FINISHED_EVINFO: WSEventInfo<null> = {\r\n    tipo: \"ALL_DOWNLOADS_FINISHED\",\r\n    parseFunction: (pld) => null,\r\n    callback: null\r\n}\r\n\r\n\r\nexport const WSEvents: { [k: string]: WSEventInfo<any> } = {\r\n    D_REPORTER: DownloadBytesEventInfo,\r\n    im_alive: IMALIVEInfo,\r\n    DOWNLOAD_FINISHED: DownloadConcludedEventInfo,\r\n    ALL_DOWNLOADS_FINISHED: ALL_DOWNLOADS_FINISHED_EVINFO,\r\n    JANELINHA_EVENT: JanelinhaEventInfo,\r\n    JANELINHA_INFO_PROCESSO: JanelinhaProcessoInfoEventInfo,\r\n}\r\n\r\nexport const handleWsMessages = function (ev: MessageEvent) {\r\n    const messageParsed: { tipo: string, payload: string } = JSON.parse(ev.data)\r\n    // console.log('WSEVENT:', messageParsed);\r\n    const infoEvent = WSEvents[messageParsed.tipo]\r\n    const evv: any = new CustomEvent(infoEvent.tipo, { detail: infoEvent.parseFunction(messageParsed.payload) })\r\n    window.dispatchEvent(evv)\r\n}","import { createContext } from 'react';\r\n\r\nexport type ManejoState = {\r\n  copiados: Set<string>;\r\n  errosDelete: Set<string>;\r\n  deletadosOk: Set<string>;\r\n};\r\n\r\nexport interface AppState {\r\n  situacao: object;\r\n  selecionado: string;\r\n  destinos: string[];\r\n  showInput: boolean;\r\n  paginaAtual: number;\r\n  totalPaginas: number;\r\n  carregando: boolean;\r\n  showGotoPageInput: boolean;\r\n  separador: string;\r\n  botaoClickAtivo: string;\r\n  copyList: string[];\r\n  botoesClickClicados: string[];\r\n  loadPDF: Function;\r\n  focaNaDivPrincipal: Function;\r\n  setState: Function;\r\n  processosList: string[];\r\n  manejo: {\r\n    copiados: Set<string>;\r\n    errosDelete: Set<string>;\r\n    deletadosOk: Set<string>;\r\n  };\r\n  manejar: Function;\r\n  loading: boolean;\r\n  downloaded: Set<string>;\r\n  pageProcessos: string[];\r\n  dossieProcesso: Array<[string, string, string]>;\r\n}\r\n\r\nexport const defaultState: AppState = {\r\n  showInput: false,\r\n  situacao: {},\r\n  selecionado: '0',\r\n  destinos: [\r\n    'REVISAO',\r\n    'AGUARDA INSCRIÇÃO',\r\n    'REQUERIMENTOS',\r\n    'INSCRIÇÃO-AJUIZAMENTO',\r\n  ],\r\n  paginaAtual: 0,\r\n  totalPaginas: 0,\r\n  carregando: false,\r\n  showGotoPageInput: false,\r\n  separador: ',',\r\n  botaoClickAtivo: '',\r\n  botoesClickClicados: [],\r\n  processosList: [],\r\n  copyList: [],\r\n  loadPDF: () => ({}),\r\n  focaNaDivPrincipal: () => ({}),\r\n  setState: () => ({}),\r\n  manejar: () => ({}),\r\n  manejo: {\r\n    copiados: new Set(),\r\n    errosDelete: new Set(),\r\n    deletadosOk: new Set(),\r\n  },\r\n  loading: false,\r\n  downloaded: new Set(),\r\n  pageProcessos: [\"teste\", \"testeaa\"],\r\n  dossieProcesso: []\r\n};\r\n\r\nconst Context = createContext(defaultState);\r\n\r\nexport default Context;","import * as React from 'react';\r\nimport { useState } from \"react\";\r\nimport { ALL_DOWNLOADS_FINISHED_EVINFO, DownloadBytesEventInfo, DownloadConcludedEventInfo, JanelinhaProcessoInfoEventInfo } from '../app_functions/wsevents';\r\nimport './downloader.css';\r\nimport css from './downloader.module.css';\r\nimport Context from '../context';\r\n\r\ntype Download = {\r\n    processo_filename: string\r\n    bytes: number\r\n}\r\n\r\nconst initialDown = process.env.NODE_ENV === 'development' ? {\r\n    \"devel1040.9876987/874684-99\": {\r\n        processo_filename: 'devel1040.9876987/874684-99',\r\n        bytes: 1000009888987,\r\n    },\r\n    'devel21040.9876987/874684-99': {\r\n        processo_filename: 'devel21040.9876987/874684-99',\r\n        bytes: 1000009928987,\r\n    }\r\n} : {}\r\n\r\nexport const Downloader = (props) => {\r\n\r\n    const context = React.useContext(Context)\r\n    const intersection = new Set(\r\n        [...context.processosList].filter(x => context.downloaded.has(x)));\r\n    const diff2 = new Set(\r\n        [...context.downloaded].filter(x => !new Set(context.processosList).has(x)));\r\n    const diff = new Set(\r\n        [...context.processosList].filter(x => !context.downloaded.has(x)));\r\n    const faltam = context.processosList.length - intersection.size\r\n    const faltavam = React.useMemo<number>(() => faltam, [context.processosList])\r\n    // console.log('   inter', intersection.size, 'diff', diff.size, 'diff22', diff2.size)\r\n    // console.log('processos:', context.processosList.length, '   downloaded', context.downloaded.size)\r\n    // console.log('usememo: faltam: ', faltam, ' | faltavam:', faltavam)\r\n\r\n    const [downloads, setDownloads] = useState<{ [k: string]: Download }>(initialDown)\r\n    const [show, setShow] = useState<boolean>(true)\r\n    const vals = Object.values(downloads)\r\n\r\n    React.useEffect(() => {\r\n        const action = (ev) => {\r\n            console.log('%c DETAIL', ev.detail)\r\n            if (ev.detail && ev.detail.processo_filename && ev.detail.bytes) {\r\n                setDownloads((antigo: { [k: string]: Download }) => ({\r\n                    ...antigo,\r\n                    [ev.detail.processo_filename]: ev.detail\r\n                }))\r\n            }\r\n        }\r\n        const remove = (ev) => {\r\n            console.log('REMOVE: ', ev.detail)\r\n            if (ev.detail && ev.detail.processo_filename) {\r\n                setDownloads((antigo: any) => {\r\n                    const novo = { ...antigo }\r\n                    delete novo[ev.detail.processo_filename]\r\n                    return novo\r\n                })\r\n            }\r\n        }\r\n        const loga = (e) => {\r\n            console.log(e.detail);\r\n        }\r\n\r\n        const hide = () => setTimeout(() => {\r\n            if (vals.length === 0) {\r\n                console.log('hide')\r\n                setShow(false)\r\n            }\r\n        }, 5000)\r\n\r\n        window.addEventListener(DownloadBytesEventInfo.tipo as any, action)\r\n        // window.addEventListener(IMALIVEInfo.tipo as any, action)\r\n        window.addEventListener(DownloadConcludedEventInfo.tipo as any, remove)\r\n        window.addEventListener(JanelinhaProcessoInfoEventInfo.tipo as any, loga)\r\n        window.addEventListener(ALL_DOWNLOADS_FINISHED_EVINFO.tipo as any, hide)\r\n\r\n\r\n        return () => {\r\n            window.removeEventListener(DownloadBytesEventInfo.tipo as any, action);\r\n            // window.removeEventListener(IMALIVEInfo.tipo as any, action);\r\n            window.removeEventListener(DownloadConcludedEventInfo.tipo as any, remove)\r\n            window.removeEventListener(JanelinhaProcessoInfoEventInfo.tipo as any, loga)\r\n            window.removeEventListener(ALL_DOWNLOADS_FINISHED_EVINFO.tipo as any, hide)\r\n        }\r\n    }, [])\r\n\r\n\r\n    if (vals.length === 0) {\r\n        return null\r\n    }\r\n\r\n    return show && (\r\n        <div className={css.downloader}>\r\n            {vals.map(d => <ProcessoDownloading key={d.processo_filename} processo_filename={d.processo_filename} bytes={d.bytes} />)}\r\n            <progress style={{ margin: \"2px\" }} className=\"progress is-small is-dark\" max=\"100\">30%</progress>\r\n            <Progress downloaded={faltavam - faltam} total={faltavam} />\r\n            <Progress downloaded={context.downloaded.size - diff2.size} total={context.processosList.length} bulmaClass=\"is-warning\" />\r\n\r\n            <span style={{ fontSize: '8px' }} onClick={() => setShow(false)}>[close]</span>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst ProcessoDownloading = React.memo((props: Download) => {\r\n    console.log('css', css)\r\n    console.log('css.download', css.download)\r\n\r\n    return (\r\n        <div key={props.processo_filename} className={css.download}>\r\n            <PLoading color='#ccc' />\r\n            <span className={css.processo}>\r\n                {props.processo_filename}\r\n            </span>\r\n            <span className={css.bytes}>\r\n                {props.bytes}\r\n            </span>\r\n        </div>\r\n    )\r\n})\r\n\r\nexport const PLoading = (props: { color: string }) => {\r\n\r\n\r\n    return (<span className={css.move}>\r\n        <svg className={css.spinner} viewBox=\"0 0 100 100\" width=\"20px\" height=\"20px\">\r\n            <defs>\r\n                <mask id=\"m\">\r\n                    <circle cx=\"50\" cy=\"50\" fill=\"white\" r=\"50\" />\r\n                    <circle cx=\"50\" cy=\"50\" fill=\"black\" r=\"20\" />\r\n                    <rect x=\"50\" y=\"50\" width=\"50\" height=\"50\" fill=\"black\" />\r\n\r\n                </mask>\r\n            </defs>\r\n            <circle cx=\"52\" cy=\"52\" fill={props.color} r=\"50\" mask=\"url(#m)\" />\r\n        </svg>\r\n    </span>)\r\n}\r\n\r\nPLoading.defaultProps = {\r\n    color: \"#000\",\r\n    bgcolor: \"#ccc\",\r\n}\r\n\r\nconst Progress = (props: {\r\n    total: number\r\n    downloaded: number\r\n    bulmaClass?: string\r\n}) => {\r\n    return (\r\n        <progress style={{ margin: '2px' }} className={`progress ${props.bulmaClass ? props.bulmaClass : \"is-danger\"} is-small`} value={`${props.downloaded}`} max={`${props.total}`}>{Math.round(props.downloaded / props.total) * 100}%</progress>\r\n    )\r\n}","import * as React from \"react\"\r\nimport Context from \"../context\"\r\nimport css from \"./processso_scrapper.module.css\"\r\n\r\nexport const ProcessoScrapper = (props: {\r\n    processos: string[]\r\n   }) => {\r\n    console.log(\"olha: props\", props)\r\n    return (\r\n        \r\n        <div className={css.scrapper}>\r\n            {\r\n                props.processos.map(\r\n                    p => <span key={p} className={css.proc}>\r\n                        {p}\r\n                    </span>\r\n                )\r\n            }\r\n        </div>\r\n        \r\n        \r\n    )\r\n}\r\n\r\nexport const TabelaScrapper = (props: {\r\n    info: Array<[string, string, string]>\r\n    deleteDossie: any\r\n}) => {\r\n    console.log(\"render\");\r\n    const ctx = React.useContext(Context)\r\n    const [show, setShow] = React.useState(false);\r\n\r\n    const remove = (dossie: string) => {\r\n        const antes = [...props.info];\r\n        const depois = antes.filter(arr => arr[0] !== dossie);\r\n        props.deleteDossie(dossie);\r\n        ctx.setState({\r\n            dossieProcesso: depois\r\n        })\r\n        \r\n    }\r\n    \r\n    React.useEffect(() => {\r\n        setShow(true);\r\n        setTimeout(() => setShow(false), 300)\r\n\r\n    }, [props.info.length])\r\n    return (\r\n        <>\r\n        <div className={css.lista}>\r\n            <table>\r\n                <thead>\r\n                    <tr>\r\n\r\n                    <td>\r\n                        Dossiê&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#9;\r\n                    </td>\r\n                    <td>\r\n                        Processo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#9;\r\n                    </td>\r\n                    <td>\r\n                        Destino\r\n                    </td>\r\n                    <td>\r\n                        X\r\n                    </td>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {props.info.map(i => {\r\n                        return (\r\n\r\n                        <tr style={{\r\n                            color: ctx.processosList.includes(i[0]) ? \"inherit\" : \"grey\"\r\n                        }} key={i[0]}>\r\n                            <td>\r\n                                {i[0]}&#9;\r\n                            </td>\r\n                            <td>\r\n                                {i[1]}&#9;\r\n                            </td>\r\n                            <td>\r\n                                {i[2]}\r\n                            </td>\r\n                            <td>\r\n                                <button style={{padding: \"2px\", borderRadius: \"50%\", fontSize: \"9px\"}} onClick={() => remove(i[0])}className=\"foi\">\r\n                                    x\r\n                                </button>\r\n                            </td>\r\n                        </tr>\r\n                        )\r\n                    })}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        {show && <div className={css.flutua}>\r\n                    {props.info.slice(-1).length > 0 ? props.info.slice(-1)[0][1]: null}\r\n        </div>}\r\n        </>\r\n    )\r\n}","import * as React from 'react';\r\n// import hljs from 'highlight.js/lib/highlight';\r\n// import javascript from 'highlight.js/lib/languages/javascript';\r\n// hljs.registerLanguage('javascript', javascript);\r\n// import axios from 'axios';\r\nimport { postData } from '../app_functions/postData';\r\nimport * as Babel from '@babel/standalone';\r\n// import 'babel-plugin-transform-es2015-arrow-functions';\r\n// import * as BabelCore from '@babel/core';\r\nimport * as babelPluginBlockScoping from '@babel/plugin-transform-block-scoping';\r\nimport * as babelPluginTransformArrowFunctions from '@babel/plugin-transform-arrow-functions';\r\nimport * as Prism from 'prismjs';\r\nimport { debounce } from '../app_functions/debounce';\r\nimport '../../node_modules/prismjs/themes/prism-solarizedlight.css';\r\n\r\n// tslint:disable:jsx-alignment\r\n\r\nexport interface EditorProps {\r\n  endpoints: string[];\r\n  on?: boolean;\r\n}\r\n\r\nexport interface EditorState {\r\n  transpiledCode: string;\r\n  highlightedCode: string;\r\n  code: string;\r\n  selectedEndPoint: string;\r\n  on: boolean;\r\n}\r\n\r\nexport default class Editor extends React.Component<EditorProps, EditorState> {\r\n    public debounceBabel: Function;\r\n    public codeBlockDisplayRef: React.RefObject<HTMLPreElement> = React.createRef();\r\n\r\n    constructor(props: EditorProps) {\r\n    super(props);\r\n    this.state = {\r\n      transpiledCode: '',\r\n      highlightedCode: '',\r\n      selectedEndPoint: props.endpoints[0],\r\n      code: `console.log('teste')\r\n      const massa = (a) => console.log('>>', a, '<<');\r\n      Object.keys({a: 1, b: 2}).map(k => massa(k)`,\r\n      on: this.props.on || false,\r\n    };\r\n\r\n    this.debounceBabel = debounce(this.transformBabel, 700, false);\r\n  }\r\n\r\n  public sendCodeToEndpoint = async () => {\r\n    console.log('. endpoint: ', this.state.selectedEndPoint);\r\n    const resp = await postData(this.state.selectedEndPoint, this.state.transpiledCode);\r\n    console.log(resp);\r\n  }\r\n\r\n  handleChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n    console.log(e);\r\n    if (!e || !e.target || !e.target.value) {\r\n        console.log('algo falta');\r\n        return;\r\n    }\r\n    this.debounceBabel(e.target.value);\r\n  }\r\n\r\n  getHtml = () => {\r\n      return {\r\n          __html: this.state.highlightedCode\r\n      };\r\n  }\r\n\r\n  toggleEndpoint = () => {\r\n      const index = this.props.endpoints.findIndex(e => this.state.selectedEndPoint === e);\r\n      console.log(`Index ${index} do endpoint ${this.state.selectedEndPoint}`);\r\n      let newIndex: number;\r\n      if ((index + 1) === this.props.endpoints.length) {\r\n          newIndex = 0;\r\n      } else {\r\n          newIndex = index + 1;\r\n      }\r\n      this.setState({selectedEndPoint: this.props.endpoints[newIndex]});\r\n  }\r\n\r\n  transformBabel = (c: string) => {\r\n    let code: string;\r\n    try {\r\n        code = Babel.transform(c, { \r\n            presets: ['es2016'],\r\n            plugins: [\r\n                babelPluginBlockScoping,\r\n                babelPluginTransformArrowFunctions,\r\n                // 'transform-es2015-arrow-functions',\r\n            ]\r\n         }).code.replace(`'use strict'`, '').trim();\r\n        \r\n    } catch (error) {\r\n        console.log('erro babel transform try block');\r\n        return;\r\n    }\r\n    const high = Prism.highlight(code, Prism.languages.javascript, 'javascript' as any);\r\n    this.setState({\r\n        transpiledCode: code,\r\n        highlightedCode: high,\r\n    });\r\n  }\r\n\r\n  public render() {\r\n\r\n    const offDiv = (\r\n    <div \r\n      style={{\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      padding: 2,\r\n      }}\r\n    >\r\n      <button onClick={() => this.setState({on: true})}>EDITOR</button>\r\n    </div>\r\n    );\r\n\r\n    return this.state.on ? (\r\n        // tslint:disable-next-line:no-unused-expression\r\n        <div style={{ padding: 2 }}>\r\n            <div style={{\r\n                display: 'flex',\r\n                alignItems: 'start',\r\n                justifyContent: 'center',\r\n                }}>\r\n        <div style={{display: 'flex', flexDirection: 'column', flex: 1}}>\r\n          <div>\r\n              <span><b>EndPoint:</b> </span>\r\n              <a onClick={this.toggleEndpoint}>{this.state.selectedEndPoint}</a>\r\n              <span>{'  '}</span>\r\n              <a onClick={() => this.setState({on: false})}> (close editor)</a>\r\n  \r\n          </div>\r\n        <textarea\r\n          id=\"editor\"\r\n          rows={20}\r\n          style={{\r\n              width: '100%',\r\n              padding: 10,\r\n              fontFamily: 'monospace',\r\n              fontSize: 17,\r\n              lineHeight: '1.8em',\r\n              backgroundColor: 'rgb(251, 251, 255)',\r\n              border: 0,\r\n              margin: 5,\r\n              flex: 1\r\n            }}\r\n            onChange={this.handleChange}\r\n            >\r\n          {this.state.code}\r\n        </textarea>\r\n        </div>\r\n        <div style={{width: '50%', padding: 4, margin: 5, backgroundColor: '#fcfdfe', flex: 1}}>\r\n          <pre\r\n            ref={this.codeBlockDisplayRef}\r\n            dangerouslySetInnerHTML={this.getHtml()}\r\n            />         \r\n        </div>\r\n\r\n        </div>\r\n        <button style={{ width: '100%' }} onClick={this.sendCodeToEndpoint}>\r\n          Mandar Código !\r\n        </button>\r\n        <br />\r\n        <br />\r\n        <br />\r\n        <br />\r\n        <br />\r\n      </div>\r\n    ) : offDiv;\r\n  }\r\n}\r\n","// tslint:disable\r\nexport function debounce(func, wait, immediate) {\r\n\tlet timeout;\r\n\treturn function() {\r\n        // @ts-ignore\r\n\t\tconst context = this, args = arguments;\r\n\t\tconst later = function() {\r\n\t\t\ttimeout = null;\r\n\t\t\tif (!immediate) func.apply(context, args);\r\n\t\t};\r\n\t\tconst callNow = immediate && !timeout;\r\n\t\tclearTimeout(timeout);\r\n\t\ttimeout = setTimeout(later, wait);\r\n\t\tif (callNow) func.apply(context, args);\r\n\t};\r\n};","import * as React from 'react';\r\n\r\ninterface Props {\r\n    dst: string;\r\n    copy: Function;\r\n    situacao: object;\r\n    separador: string;\r\n    botaoAtivo: boolean;\r\n    clicado: boolean;\r\n}\r\n\r\n// interface HProps {\r\n//     children: string;    \r\n// }\r\n\r\n// const Hx: React.SFC<HProps> = (props) => {\r\n//     return (\r\n//         <h2 \r\n//             style={{\r\n//                 display: 'inline-block',\r\n//                 color: '#ecc',\r\n//             }}\r\n//         >\r\n//         {' '}{props.children}{' '}\r\n//         </h2>\r\n//     );\r\n// };\r\n\r\nconst Listagem: React.SFC<Props> = React.memo((props) => {\r\n    const { dst, copy, situacao, separador, botaoAtivo, clicado } = props;\r\n    const arr = Object.keys(situacao).filter(\r\n        (numProc) => situacao[numProc] === dst\r\n    );\r\n    return arr.length > 0 ? (\r\n        <div className=\"listagem-div\">\r\n            <button\r\n                style={{\r\n                    display: 'inline-block',\r\n                    backgroundColor: botaoAtivo ? '#a0d6ff' : clicado ? 'rgba(255, 255, 255, 0)' : 'none',\r\n                    color: clicado ? 'rgb(137, 137, 137)' : 'black',\r\n                }}\r\n                onClick={() => copy(arr.join(separador), dst)}\r\n            > COPIAR {dst} ({arr.length})\r\n            </button>\r\n        </div>\r\n\r\n    ) : null;\r\n\r\n});\r\n\r\nexport default Listagem; ","// tslint:disable\r\nimport * as React from 'react';\r\n\r\nexport interface LoadingComponentProps {\r\n}\r\n\r\nexport interface LoadingComponentState {\r\n}\r\n\r\nexport default class LoadingComponent extends React.Component<LoadingComponentProps, LoadingComponentState> {\r\n  constructor(props: LoadingComponentProps) {\r\n    super(props);\r\n\r\n    // this.state = {\r\n\r\n    // };\r\n  }\r\n\r\n  // tslint:disable-next-line:member-ordering\r\n  rectStyle = {\r\n    fill: 'rgba(50, 50, 255, 1)',\r\n    stroke: 'rgb(255,255,255)',\r\n    strokeWidth: 1,\r\n  };\r\n\r\n  rectNodes: Array<SVGElement | null> = [\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n  ];\r\n\r\n  componentDidMount() {\r\n    console.log('animation mounted');\r\n    // tslint:disable-next-line:no-unused-expression\r\n    if (!document) {\r\n      return;\r\n    }\r\n    const esse = document.getElementById('anim_svg');\r\n    if (!esse) {\r\n      return;\r\n    }\r\n\r\n\r\n\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    console.log('anim will unmount');\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <div\r\n        className=\"loading-component\"\r\n      >\r\n        <svg id=\"anim_svg\" width=\"180\" height=\"50\">\r\n          <g ref={ref => this.rectNodes[0] = ref}> <rect x=\"0\" y=\"0\" width=\"10\" height=\"50\" style={this.rectStyle} /></g>\r\n          <g ref={ref => this.rectNodes[1] = ref}> <rect x=\"15\" y=\"0\" width=\"10\" height=\"50\" style={this.rectStyle} /></g>\r\n          <g ref={ref => this.rectNodes[2] = ref}> <rect x=\"30\" y=\"0\" width=\"10\" height=\"50\" style={this.rectStyle} /></g>\r\n          <g ref={ref => this.rectNodes[3] = ref}> <rect x=\"45\" y=\"0\" width=\"10\" height=\"50\" style={this.rectStyle} /></g>\r\n          <g ref={ref => this.rectNodes[4] = ref}> <rect x=\"60\" y=\"0\" width=\"10\" height=\"50\" style={this.rectStyle} /></g>\r\n          <g ref={ref => this.rectNodes[5] = ref}> <rect x=\"75\" y=\"0\" width=\"10\" height=\"50\" style={this.rectStyle} /></g>\r\n          <g ref={ref => this.rectNodes[6] = ref}> <rect x=\"90\" y=\"0\" width=\"10\" height=\"50\" style={this.rectStyle} /></g>\r\n          <g ref={ref => this.rectNodes[7] = ref}> <rect x=\"105\" y=\"0\" width=\"10\" height=\"50\" style={this.rectStyle} /></g>\r\n          <g ref={ref => this.rectNodes[8] = ref}> <rect x=\"120\" y=\"0\" width=\"10\" height=\"50\" style={this.rectStyle} /></g>\r\n          <g ref={ref => this.rectNodes[9] = ref}> <rect x=\"135\" y=\"0\" width=\"10\" height=\"50\" style={this.rectStyle} /></g>\r\n          <g ref={ref => this.rectNodes[10] = ref}> <rect x=\"150\" y=\"0\" width=\"10\" height=\"50\" style={this.rectStyle} /></g>\r\n          <g ref={ref => this.rectNodes[11] = ref}> <rect x=\"165\" y=\"0\" width=\"10\" height=\"50\" style={this.rectStyle} />        </g>\r\n        </svg>\r\n        <br />\r\n        <span>C A R R E G A N D O...</span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from 'react';\r\nimport { dataSitu } from '../App';\r\nimport { getDigito } from '../app_functions/getDigitoCPF_CNPJ';\r\nimport Context from '../context';\r\n\r\ninterface ProcessoProps {\r\n    procObj: {\r\n        'Assunto COMPROT'?: string;\r\n        'CPF Responsável Atual'?: string;\r\n        'CPF Responsável Último'?: string;\r\n        'CPF/CNPJ Corresponsável'?: string;\r\n        'CPF/CNPJ Devedor Principal'?: string;\r\n        'Código da Equipe Atual'?: string;\r\n        'Código de Receita na Dívida Ativa'?: string;\r\n        'DEBCAD'?: string;\r\n        'Data Distribuição Última'?: string;\r\n        'Data Entrada Atividade'?: string;\r\n        'Data Entrada Unidade'?: string;\r\n        'Data Situação da Inscrição'?: string;\r\n        'Data da Atualização do Valor Atualizado da Inscrição'?: string;\r\n        'Data da Inscrição'?: string;\r\n        'Data do Protocolo'?: string;\r\n        'Idade Contribuinte'?: string;\r\n        'Indicador Grande Devedor'?: string;\r\n        'Indicadores'?: string;\r\n        'Informações'?: string;\r\n        'NI Contribuinte'?: string;\r\n        'Nome Atividade Atual'?: string;\r\n        'Nome Atividade Última'?: string;\r\n        'Nome Contribuinte'?: string;\r\n        'Nome Equipe Atual'?: string;\r\n        'Nome Equipe Última'?: string;\r\n        'Nome Responsável'?: string;\r\n        'Nome Tarefa Atual'?: string;\r\n        'Nome Unidade Atual'?: string;\r\n        'Nome Unidade Última'?: string;\r\n        'Nome Último Documento Confirmado'?: string;\r\n        'Número Processo'?: string;\r\n        'Número da Inscrição Derivada'?: string;\r\n        'Número de Inscrição'?: string;\r\n        'Número do Processo Judicial'?: string;\r\n        'Número do Processo Judicial da Inscrição'?: string;\r\n        'Número do Requerimento (SICAR-PGFN)'?: string;\r\n        'Porte Contribuinte'?: string;\r\n        'Processos Vinculados'?: string;\r\n        'Procuradoria Responsável'?: string;\r\n        'Procuradoria de Inscrição'?: string;\r\n        'Quantidade Volumes'?: string;\r\n        'Saldo na Situação Atual (Multa de Ofício)'?: string;\r\n        'Saldo na Situação Atual (Principal)'?: string;\r\n        'Situação'?: string;\r\n        'Situação da Inscrição'?: string;\r\n        'Tipo Processo'?: string;\r\n        'Todos'?: string;\r\n        'Tributo'?: string;\r\n        'Valor Atualizado da Inscrição'?: string;\r\n        'Valor Originário Lançado/Pleiteado (Principal)'?: string;\r\n        'Valor Processo'?: string;\r\n        'Valor Total das Inscrições'?: string;\r\n        'Valor do Crédito Consolidado'?: string;\r\n        'Valor do Crédito Lançado (Multa de Ofício)'?: string;\r\n        [dataSitu]?: Date;\r\n    };\r\n    processo: string;\r\n    downloaded: boolean;\r\n}\r\n\r\nconst withCache = function (fn: (s: string) => any, map: Map<string, any>) {\r\n\r\n    return function (s: string) {\r\n        if (map.has(s)) {\r\n            console.info('cached value')\r\n            const value = map.get(s)\r\n            return value\r\n        }\r\n        const result = fn(s)\r\n        console.info('   >   new key for cache >', s, result, arguments);\r\n        map.set(s, result)\r\n        return result\r\n    }\r\n}\r\n\r\nconst map1: Map<string, number> = new Map()\r\nconst map2: Map<string, string> = new Map()\r\n\r\nconst stringToNumber = withCache(function (s: string) {\r\n    let arr = Array.from(s);\r\n    const num = arr.reduce((pr, cu, i) => { return (cu.charCodeAt(0) + pr); }, 0);\r\n    // console.log(num)\r\n    return num % 360;\r\n}, map1);\r\n\r\nconst getColor = withCache(function (situacao: string) {\r\n    let num = stringToNumber(situacao);\r\n    let color = `hsla(${num}, 100%, 96%, 0.9)`;\r\n    // console.log(color)\r\n    return color;\r\n}, map2);\r\n\r\nconst Processo: React.SFC<ProcessoProps> = React.memo((props) => {\r\n    let { processo, procObj } = props;\r\n    if (!procObj) {\r\n        procObj = {};\r\n    }\r\n    const ultres = procObj['Nome Responsável'] || '';\r\n    const tarefa = procObj['Nome Tarefa Atual'] || '';\r\n    const dataEntrada = procObj['Data Entrada Atividade'] || '';\r\n    let dataSituacao = procObj[dataSitu];\r\n    let numeroBelo = processo;\r\n    if (procObj && procObj['Número Processo']) {\r\n        numeroBelo = (procObj['Número Processo'] as string).replace('D', '').trim();\r\n    }\r\n\r\n    const hojeVal = new Date().valueOf();\r\n    const dataEntraSplitted = dataEntrada.split('/');\r\n    const dataEntradaDate = new Date(`${dataEntraSplitted[1]}/${dataEntraSplitted[0]}/${dataEntraSplitted[2]}`);\r\n    const ehAntigaClassificacao = dataSituacao &&\r\n        (hojeVal - dataSituacao.valueOf()) > 1000 * 60 * 60 * 24 * 20; // 30d \r\n    const opa = dataSituacao &&\r\n        (dataSituacao.valueOf() - dataEntradaDate.valueOf()) < (1000 * 60 * 60); //\r\n    const ehAntigoProcesso =\r\n        Math.floor((hojeVal - dataEntradaDate.valueOf()) / (1000 * 60 * 60 * 24)); // 30d \r\n    const digito = procObj && procObj['NI Contribuinte'] && getDigito(procObj['NI Contribuinte']);\r\n    const cpfCnpj = procObj && procObj['NI Contribuinte'];\r\n\r\n    // console.info(' *** ', props.processo)\r\n\r\n    return (\r\n        <Context.Consumer>\r\n            {({\r\n                selecionado,\r\n                situacao,\r\n                loadPDF,\r\n                setState,\r\n                focaNaDivPrincipal,\r\n                manejo,\r\n            }) => {\r\n                return (\r\n                    <span\r\n                        className={[\"processo-div-component\", props.downloaded && \"processo-div-component-baixado\"].join(\" \")}\r\n                    >\r\n                        {(ehAntigaClassificacao || ehAntigoProcesso > 28 || opa) && <span\r\n                            className=\"obsdata1\"\r\n                        >\r\n                            {ehAntigaClassificacao && 'Class Antiga\\n |'}\r\n                            {ehAntigoProcesso > 28 && 'Processo Antigo (' + ehAntigoProcesso + 'd)\\n | '}\r\n                            {opa && <span className=\"opa\">OPA!</span>}\r\n                        </span>}\r\n                        <span\r\n                            className=\"span-processo-title\"\r\n                            style={selecionado === processo ? {\r\n                                color: 'rgb(255, 255, 255)',\r\n                                fontSize: '1.2em',\r\n                                backgroundColor: '#f20052'\r\n                            } : {}}\r\n                            onClick={() => {\r\n                                loadPDF(processo);\r\n                                setState({ selecionado: processo }, focaNaDivPrincipal);\r\n                            }}\r\n                        >{numeroBelo}\r\n\r\n                        </span>\r\n                        {situacao[processo] &&\r\n                            <div\r\n                                className=\"div-processo-caracteristicas div-wrap-flex\"\r\n                                style={{\r\n                                    backgroundColor: getColor(situacao[processo]) as any,\r\n                                    border: '2px solid rgb(178, 189, 239)',\r\n                                    borderRadius: '12px',\r\n                                    fontSize: '0.6em',\r\n                                }}\r\n                            >\r\n                                {situacao[processo]}\r\n                            </div>}\r\n                        {ultres && <div className=\"div-processo-caracteristicas div-wrap-flex\">\r\n                            {ultres.split(' ')[0]}\r\n                        </div>}\r\n                        {tarefa && <div className=\"div-processo-caracteristicas div-wrap-flex\">\r\n                            {tarefa}\r\n                        </div>}\r\n                        {(situacao[processo] === 'REQUERIMENTOS') &&\r\n                            <div className=\"div-processo-caracteristicas div-wrap-flex\">\r\n                                {cpfCnpj}{' '}<div className=\"div-processo-caracteristicas-digito\">{digito}</div>\r\n                            </div>}\r\n\r\n                        {dataSituacao &&\r\n                            <div\r\n                                className=\"div-processo-caracteristicas div-wrap-flex\"\r\n                                style={{ fontSize: '0.8em' }}\r\n                            >\r\n                                {dataSituacao.toLocaleDateString()}\r\n                            </div>\r\n                        }\r\n                        {dataEntrada &&\r\n                            <div\r\n                                className=\"div-processo-caracteristicas div-wrap-flex\"\r\n                                style={{ fontSize: '0.85em' }}\r\n                            >\r\n                                {dataEntrada}{' '}({ehAntigoProcesso}d)\r\n                            </div>\r\n                        }\r\n                        {manejo.copiados.has(processo) && !manejo.deletadosOk.has(processo) &&\r\n                            <div\r\n                                className=\"div-processo-caracteristicas div-wrap-flex obscopiado\"\r\n                            >\r\n                                COPIADO\r\n                    </div>}\r\n                        {manejo.errosDelete.has(processo) &&\r\n                            <div\r\n                                className=\"div-processo-caracteristicas div-wrap-flex obserro\"\r\n                            >\r\n                                ERRO DELETE :(\r\n                    </div>}\r\n                        {manejo.deletadosOk.has(processo) &&\r\n                            <div\r\n                                className=\"div-processo-caracteristicas div-wrap-flex obsdeletado\"\r\n                            >\r\n                                DELETADO\r\n                    </div>}\r\n\r\n                    </span>\r\n                );\r\n            }}\r\n        </Context.Consumer>\r\n    );\r\n});\r\nexport default Processo;","export const getDigito = (CPF_OU_CNPJ: string) => {\r\n    // return CPF_OU_CNPJ;\r\n    const semNada = CPF_OU_CNPJ.replace(/\\D/g, '');\r\n    switch (semNada.length) {\r\n        case 11: // cpf\r\n            return semNada.substr(6, 2);\r\n        case 14: // cnpj\r\n            return semNada.substr(6, 2);\r\n        default:\r\n            return '??';\r\n    }\r\n};","import * as React from 'react';\r\n\r\nconst handleWorkerMessages = function (ev: MessageEvent) {\r\n    const messageParsed: { tipo: string, payload: any } = ev.data\r\n    console.log('WORKER DATA: ', messageParsed.tipo, ' : ', messageParsed);\r\n    const evv: any = new CustomEvent(messageParsed.tipo, { detail: messageParsed.payload })\r\n    window.dispatchEvent(evv)\r\n}\r\n\r\nexport const WorkerComponentHandler = (props: { wsPort: string, dbVersion: number, dbName: string }) => {\r\n\r\n    React.useEffect(() => {\r\n        const workerAddr = `${process.env.PUBLIC_URL}/sw/sw_src/worker.js`\r\n        console.log('workerAddr: ', workerAddr);\r\n        const worker: Worker = new Worker(workerAddr) as any;\r\n        console.log(worker)\r\n        // @ts-ignore\r\n        worker.onerror = function (e) {\r\n            console.error(\"ERROR WORKER => \", e)\r\n        }\r\n        worker.onmessage = function (e) {\r\n            handleWorkerMessages(e)\r\n        }\r\n        worker.postMessage({ tipo: \"WEBSOCKET_PORT\", payload: `ws://localhost:${props.wsPort}/ws` })\r\n        worker.postMessage({ tipo: \"DATABASE_INFO_START\", payload: { name: props.dbName, version: props.dbVersion } })\r\n        // CLEAN CODE\r\n    }, [])\r\n\r\n    return null\r\n}\r\n\r\n","import * as React from \"react\";\r\nimport { useState } from \"react\";\r\nimport { FrontNovoSidaReport, Re } from \"../app_functions/WSEventInfo_interfaces\";\r\nimport axios from \"axios\";\r\nimport { DB } from \"../app_functions/db\";\r\n\r\nconst parseDate = (date: string) => {\r\n  const dma = date.split('/')\r\n  const newdate = new Date(`${dma[2]}-${dma[1]}-${dma[0]}`)\r\n  console.log('%cparseDate  ', 'background-color: \"#ccc\";', date, '-->', newdate)\r\n  return newdate\r\n}\r\n\r\nexport const NovoSidaConsulta = (props: {\r\n  host: string;\r\n  db: DB;\r\n  eprocessoData: { [p: string]: unknown };\r\n  situacoes: { [k: string]: string };\r\n  deleteArquivos: Function;\r\n  loadPdf: any\r\n}) => {\r\n  const [consultas, setConsultas] = useState<FrontNovoSidaReport[]>([])\r\n  const [loading, setLoading] = useState<boolean>(false)\r\n  const [copyed, setCopyed] = useState<boolean>(false)\r\n  const [consultou, setConsultou] = useState<boolean>(false)\r\n  const [inscritos, setInstritos] = useState<FrontNovoSidaReport[]>([])\r\n  const textRef = React.useRef<HTMLTextAreaElement>()\r\n  const trataEvent = (event: any) => {\r\n    const info: FrontNovoSidaReport = event.detail;\r\n\r\n    setConsultas((state) => {\r\n\r\n      if (state.filter(f => f.processo === info.processo).length > 0) {\r\n        return state\r\n      }\r\n      const newState = [...state, info].sort((ant: FrontNovoSidaReport, dep: FrontNovoSidaReport) => {\r\n\r\n        const antDate = parseDate(props.eprocessoData[ant.processo]['Data Entrada Atividade'])\r\n        const depDate = parseDate(props.eprocessoData[dep.processo]['Data Entrada Atividade'])\r\n        if (antDate.valueOf() < depDate.valueOf()) {\r\n          return 1\r\n        }\r\n        return -1\r\n      })\r\n      console.log(\"%c_______newState_______:\", 'background-color: purple; color: white;', newState)\r\n      setInstritos(getInscritos(newState))\r\n      return newState\r\n    })\r\n\r\n  }\r\n\r\n  const copy = () => {\r\n    textRef.current.focus()\r\n    textRef.current.value = inscritos.map(i => i.processo).join(',')\r\n    textRef.current.select()\r\n    document.execCommand(\"copy\");\r\n    setCopyed(true)\r\n  }\r\n\r\n  const getInscritos = (consultas) => {\r\n    return consultas.filter(c => c.ok).filter(c => c.res.every(i => parseDate(props.eprocessoData[c.processo]['Data Entrada Atividade']).valueOf() <= parseDate(i.dataInscricao).valueOf()))\r\n  }\r\n\r\n  const deleteInscritos = () => {\r\n    const processos = inscritos.map(i => i.processo).join(',')\r\n    props.deleteArquivos(processos)\r\n\r\n  }\r\n\r\n\r\n  console.log('inscritos', inscritos)\r\n  const removeListerners = () => {\r\n    console.log('%cREMOVE LISTENERS INICIO', 'background-color: red; color: white;')\r\n    window.removeEventListener(\"FRONT_NOVO_SIDA_REPORT\", trataEvent);\r\n    setLoading(false)\r\n    setConsultou(true)\r\n    console.log('%cREMOVE LISTENERS FIM', 'background-color: red; color: white;')\r\n  }\r\n\r\n  const procura = async () => {\r\n    console.log('%cPROCURA', 'background-color: red; color: white;')\r\n    setLoading(true)\r\n    window.addEventListener(\"FRONT_NOVO_SIDA_REPORT\", trataEvent)\r\n    window.addEventListener(\"FRONT_END_SIDA_REPORT\", removeListerners, { once: true })\r\n    const processosNumbersString = Object.keys(props.situacoes).filter(k => props.situacoes[k] === \"AGUARDA INSCRIÇÃO\").join(\"|\")\r\n    const resp = await axios.post(`${props.host}/novo_sida`, processosNumbersString);\r\n    console.log('%cPROCURA -> fim', 'background-color: red; color: white;', resp)\r\n  }\r\n\r\n\r\n  return (\r\n    <section className=\"container\">\r\n      {consultas.map(c => <Consulta key={c.processo} abreProcesso={props.loadPdf} consulta={c} eprocDados={props.eprocessoData[c.processo]} arquiva={inscritos.filter(i => i.processo === c.processo).length > 0} />)}\r\n      {!consultou && <button onClick={procura} className={`button ${loading ? 'is-loading' : ''}`}>Pesquisa Sida Novo</button>}\r\n      {inscritos.length > 0 && <div className=\"level\">\r\n        <div className=\"level-item\">\r\n          <textarea ref={textRef} className=\"textarea\" />\r\n        </div>\r\n        <div className=\"level-item\">\r\n          <button className=\"button\" onClick={copy}>copy inscritos</button>\r\n          {copyed && <button className=\"button\" onClick={deleteInscritos}>delete inscritos</button>}\r\n        </div>\r\n      </div>}\r\n    </section>\r\n  )\r\n}\r\n\r\nconst Consulta = React.memo((props: {\r\n  consulta: FrontNovoSidaReport\r\n  eprocDados: any\r\n  arquiva: boolean\r\n  abreProcesso: any\r\n}) => {\r\n\r\n  let despacho;\r\n\r\n  const [showText, setShowText] = useState<boolean>(false)\r\n\r\n  const allExtintas = props.consulta.ok && props.consulta.res.every(i => i.situacao.includes('EXTINT'))\r\n  const allSits = props.consulta.ok && new Set(props.consulta.res.map(i => i.situacao))\r\n  const isAllSameSit = props.consulta.ok && allSits.size === 1;\r\n\r\n  if (allExtintas && isAllSameSit) {\r\n    if (props.consulta.res.length === 1) {\r\n      despacho = `Processo ${props.consulta.processo} com a inscrição ${props.consulta.res[0].inscricao.replace(/\\D/g, '')} na situação \"${props.consulta.res[0].situacao}\". Encaminhado na data ${props.eprocDados['Data Entrada Atividade']}, passou pelo TRATAPFN, mas ainda não foi gerada nova inscrição porque a situação provavelmente impede a inscrição automática.`\r\n    } else {\r\n      despacho = `Processo ${props.consulta.processo} com as inscrições ${props.consulta.res.map(i => i.inscricao.replace(/\\D/g, '')).join(', ')}, todas na situação \"${props.consulta.res[0].situacao}\". Encaminhado na data ${props.eprocDados['Data Entrada Atividade']}, passou pelo TRATAPFN, mas ainda não foi gerada nenhuma nova inscrição porque a situação provavelmente impede a inscrição automática.`\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"\" style={{ marginBottom: \"2rem\", backgroundColor: props.arquiva ? \"#23d16047\" : \"#eee\", padding: \"0.8rem\" }}>\r\n      <div className=\"\">\r\n        <a onClick={() => props.abreProcesso(props.consulta.processo)}><p className=\"title is-5\">{props.consulta.processo}</p></a>\r\n        <p className=\"subtitle is-6\">{props.eprocDados['Data Entrada Atividade']}</p>\r\n      </div>\r\n      <div className=\"\">\r\n        {props.consulta.res && <table className=\"table is-fullwidth\">\r\n          <tbody className=\"tbody\">\r\n\r\n            {props.consulta.res.map(r => <InscricaoInfo key={r.insc} inscricao={r} />)}\r\n          </tbody>\r\n        </table>}\r\n\r\n      </div>\r\n      <div>\r\n        {allExtintas && isAllSameSit && <button className={`button is-small ${showText && \"is-primary\"}`} onClick={() => setShowText(!showText)}>{showText ? 'fechas' : 'despacho'}</button>}\r\n        <p className=\"content despacho__text\">{showText && despacho}</p>\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n})\r\n\r\nconst InscricaoInfo = (props: { inscricao: Re, }) => {\r\n  return (\r\n    <tr style={{ fontSize: \"0.9em\" }}>\r\n      <td>{props.inscricao.inscricao}</td>\r\n      <td>{props.inscricao.dataInscricao}</td>\r\n      <td>{props.inscricao.situacao}</td>\r\n    </tr>\r\n\r\n  )\r\n}","import * as React from \"react\";\r\nimport { DownloadConcludedEventInfo } from \"../app_functions/wsevents\";\r\n\r\nexport const DownloadFinishedListener = (props: { addProcesso: (s: string) => void }) => {\r\n\r\n    React.useEffect(() => {\r\n        const action = (e) => {\r\n            const processo = e.detail.final_filepath.split(\"\\\\\").pop().replace('.pdf', '')\r\n            console.log('%cDOWNLOAD FINISED:', 'background-color: red; font-size: 1.5em; color: white', e.detail, '\\n', processo)\r\n            props.addProcesso(processo)\r\n        }\r\n        window.addEventListener(DownloadConcludedEventInfo.tipo, action)\r\n        return () => window.removeEventListener(DownloadConcludedEventInfo.tipo, action)\r\n    })\r\n\r\n    return null\r\n}","import * as React from \"react\";\r\n\r\nimport { useContext } from \"react\";\r\nimport Context from \"../context\";\r\n\r\nexport const DeleteDiff = (props: { deleteFiles: any }) => {\r\n    const context = useContext(Context)\r\n    const [show, setShow] = React.useState<Boolean>(false)\r\n    const diff2 = new Set(\r\n        [...context.downloaded].filter(x => !new Set(context.processosList).has(x)));\r\n    console.log('%c    difs      -> ', 'background-color: deeppurple', diff2)\r\n\r\n    const pld = [...diff2].join(',')\r\n    const deleteFiles = () => {\r\n        console.log('deleting... ', diff2.size, ' files')\r\n        console.log('', pld)\r\n        props.deleteFiles(pld)\r\n            .then(res => {\r\n                console.log(res)\r\n                setShow(false)\r\n            })\r\n            .catch(e => console.error(e))\r\n    }\r\n\r\n    return diff2.size > 1 ? (\r\n        <div>\r\n            <button onClick={() => setShow(!show)} className=\"button is-small is-fullwidth\">\r\n                {show ? 'close' : 'DELETE DIFF'}\r\n            </button>\r\n            {show && <span>{pld}</span>}\r\n            {show && <button onClick={deleteFiles} className=\"button is-small is-danger is-fullwidth\">\r\n                CONFIRMA DELETE ?\r\n            </button>}\r\n        </div>\r\n    ) : null\r\n}","// import Linha from './Linha';\r\nimport { PDFDocumentProxy, PDFJSStatic, PDFPageProxy, PDFPageViewport as IPDFPageViewport } from \"pdfjs-dist\";\r\nimport * as React from \"react\";\r\nimport { createRef, RefObject } from \"react\";\r\nimport \"./App.css\";\r\nimport { addSituacao } from \"./app_functions/addSituacao\";\r\nimport { DB, SituObj } from \"./app_functions/db\";\r\nimport { deleteArquivos } from \"./app_functions/deleteArquivos\";\r\nimport { handlePress } from \"./app_functions/handlePress\";\r\nimport { manejar } from \"./app_functions/manejar\";\r\nimport { JanelinhaProcessoInfo } from \"./app_functions/WSEventInfo_interfaces\";\r\nimport { ButtonMutex } from \"./components/button_mutex\";\r\nimport { Downloader } from \"./components/downloader\";\r\nimport { ProcessoScrapper, TabelaScrapper } from \"./components/processoScrapper\";\r\n// import SidaConsulta from \"./components/handleSida\";\r\nimport { JanelinhaEventsLog } from \"./components/janelinha_events\";\r\nimport JSEditor from \"./components/jseditor\";\r\nimport Listagem from \"./components/listagem_dummy\";\r\nimport LoadingComponent from \"./components/loading\";\r\nimport Processo from \"./components/processo\";\r\nimport Context, { AppState, defaultState } from \"./context\";\r\nimport { WorkerComponentHandler } from \"./web_workers/web_worker_component\";\r\nimport { NovoSidaConsulta } from \"./components/handleNovoSida\";\r\nimport { DownloadFinishedListener } from \"./components/downloadFinished_events\";\r\nimport { DeleteDiff } from \"./components/DeleteDiff\";\r\nimport { PDFRenderTask } from 'pdfjs-dist'\r\n\r\ninterface PDFPageViewport extends IPDFPageViewport {\r\n  transform: number[];\r\n}\r\ninterface AppProps {\r\n  data: object;\r\n  PDFJS: PDFJSStatic;\r\n  portServer: string;\r\n}\r\n\r\ninterface CurrentPDF {\r\n  pdf: PDFDocumentProxy | null;\r\n  page: PDFPageProxy | null;\r\n  zoom: number;\r\n  verticalOffset: number;\r\n  totalPages: number | null;\r\n  pageNumber: number | null;\r\n  canvasHeight: number;\r\n  canvasWidth: number;\r\n  numeroProcesso: string;\r\n}\r\n\r\ninterface CustomViewPort extends PDFPageViewport {\r\n  transform: number[];\r\n}\r\n\r\nconst META: string = \"__META__\";\r\nexport const dataSitu = \"dataSitu\";\r\n\r\nclass App extends React.Component<AppProps, AppState> {\r\n  public eprocessoData: object;\r\n  public colecao: object;\r\n  public input: HTMLInputElement | null;\r\n  public gotoinput: HTMLInputElement | null;\r\n  public PDF: PDFJSStatic;\r\n  public localStorageKey: string;\r\n  public sortKey: string;\r\n  public handlePress: Function;\r\n  public addSituacao: Function;\r\n  public deleteArquivos: Function;\r\n  public ws: WebSocket;\r\n  public db: DB;\r\n  public dbVersion: number;\r\n  public currentPDFRendertask: PDFRenderTask | undefined;\r\n  private textarea: HTMLTextAreaElement | null;\r\n  private canvas: HTMLCanvasElement | null;\r\n  private outerDiv: HTMLDivElement | null;\r\n  private divPrincipal: RefObject<HTMLDivElement>;\r\n  private canvasRenderContext2D: CanvasRenderingContext2D | null;\r\n  private currentPdf: CurrentPDF;\r\n  private interval: number;\r\n\r\n  constructor(props: AppProps) {\r\n    super(props);\r\n    this.deleteArquivos = deleteArquivos(\r\n      this,\r\n      `http://localhost:${props.portServer}/deletefiles`\r\n    );\r\n    this.localStorageKey =\r\n      this.props.data[META].codEquipe + this.props.data[META].pasta_download ||\r\n      \"none\";\r\n    // console.log(\"localStorageKey: \", this.localStorageKey);\r\n    this.eprocessoData = this.props.data;\r\n    this.atualizaColecao = this.atualizaColecao.bind(this);\r\n    this.deleteArquivos = this.deleteArquivos.bind(this);\r\n    this.handlePress = handlePress(this);\r\n    this.addSituacao = addSituacao(this);\r\n    this.colecao = {};\r\n    this.PDF = this.props.PDFJS;\r\n    this.loadPDF = this.loadPDF.bind(this);\r\n    this.addBaixado = this.addBaixado.bind(this);\r\n    this.focaNaDivPricincipal = this.focaNaDivPricincipal.bind(this);\r\n    // console.log(this.props);\r\n    this.currentPdf = {\r\n      pdf: null,\r\n      page: null,\r\n      zoom: 1.5,\r\n      verticalOffset: 0,\r\n      pageNumber: null,\r\n      totalPages: null,\r\n      canvasHeight: window.outerHeight * 0.95,\r\n      canvasWidth: window.outerWidth * 0.95,\r\n      numeroProcesso: \"0\"\r\n    };\r\n    this.divPrincipal = createRef();\r\n    this.sortKey = \"_s\";\r\n    // console.log('%cMETA antes de apagar', 'font-size: 1.6em; background-color: yellow;', this.props.data[META])\r\n    const downloaded: Set<string> = new Set(this.props.data[META].downloaded.split('|').map((s: string) => s.replace('.pdf', '')))\r\n    this.state = {\r\n      ...defaultState,\r\n      processosList: [],\r\n      situacao: {},\r\n      loadPDF: this.loadPDF,\r\n      focaNaDivPrincipal: this.focaNaDivPricincipal,\r\n      setState: this.setState.bind(this),\r\n      manejar: manejar(this),\r\n      downloaded: downloaded,\r\n    };\r\n\r\n\r\n    delete this.eprocessoData[META];\r\n    this.dbVersion = 3\r\n    this.db = new DB(this.localStorageKey, this.dbVersion);\r\n    // console.log(\">>>>>\", this.db);\r\n\r\n    this.db.setup().then(() => {\r\n      // console.log(\"foi\");\r\n      this.db.getAll().then((obj) => {\r\n        if (!(obj instanceof Array)) {\r\n          return;\r\n        }\r\n        let processosList = Object.keys(this.eprocessoData);\r\n        const newSituacao = {};\r\n        const agora = new Date().valueOf();\r\n        for (let i = 0; i < processosList.length; i++) {\r\n          const ProcObj = obj.find(a => a.numero === processosList[i]);\r\n          // console.log(\"********\", processosList[i], ProcObj);\r\n          if (ProcObj) {\r\n            if (agora - ProcObj.data.valueOf() > 1000 * 60 * 60 * 24 * 90) {\r\n              // 90d\r\n              // console.log(\r\n              //   \"antigo????\",\r\n              //   ProcObj.data,\r\n              //   agora,\r\n              //   agora - ProcObj.data\r\n              // );\r\n              this.db.deleteRecord(ProcObj.numero);\r\n              continue;\r\n            }\r\n            newSituacao[ProcObj.numero] = ProcObj.situacao;\r\n            this.eprocessoData[processosList[i]][dataSitu] = ProcObj.data;\r\n            switch (ProcObj.situacao) {\r\n              case \"AGUARDA INSCRIÇÃO\":\r\n                this.eprocessoData[processosList[i]][this.sortKey] =\r\n                  \"9999999999999999\";\r\n                break;\r\n              default:\r\n                this.eprocessoData[processosList[i]][this.sortKey] =\r\n                  \"999999\" + ProcObj.situacao;\r\n                break;\r\n            }\r\n          } else {\r\n            this.eprocessoData[processosList[i]][this.sortKey] =\r\n              \"00000\" +\r\n              this.eprocessoData[processosList[i]][\"Nome Equipe Última\"] ||\r\n              \"0\";\r\n          }\r\n          this.setState(\r\n            {dossieProcesso: \r\n              obj.filter(i => i.judicial).map(i => [i.numero, i.judicial, i.situacao])            \r\n            }\r\n          )\r\n        }\r\n\r\n        // console.log(\"processosList -> \", processosList);\r\n        // console.log(\"this.eprocessoData -> \", this.eprocessoData);\r\n\r\n        let newProcessosList = processosList.sort((a, b) => {\r\n          if (\r\n            this.eprocessoData[a] &&\r\n            this.eprocessoData[b] &&\r\n            this.eprocessoData[a][this.sortKey] >\r\n            this.eprocessoData[b][this.sortKey]\r\n          ) {\r\n            return 1;\r\n          }\r\n          return -1;\r\n        }).sort((a, b) => {\r\n          if (this.state.downloaded.has(a) && this.state.downloaded.has(b)) {\r\n            return 0\r\n          }\r\n          if (!this.state.downloaded.has(a) && !this.state.downloaded.has(b)) {\r\n            return 0\r\n          }\r\n          if (this.state.downloaded.has(a) && !this.state.downloaded.has(b)) {\r\n            return 1\r\n          }\r\n          if (!this.state.downloaded.has(a) && this.state.downloaded.has(b)) {\r\n            return -1\r\n          }\r\n        });\r\n\r\n        this.setState({\r\n          situacao: newSituacao,\r\n          processosList: newProcessosList\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  atualizaColecao = (key, node) => {\r\n    this.colecao[key] = node;\r\n  };\r\n\r\n  copy = (str: string, dstStr: string = \"\") => {\r\n    (this.textarea as HTMLTextAreaElement).focus();\r\n    (this.textarea as HTMLTextAreaElement).value = str;\r\n    (this.textarea as HTMLTextAreaElement).select();\r\n    document.execCommand(\"copy\");\r\n    const listaProcessos = str.split(\",\");\r\n    // console.log(\"copiar \", str, listaProcessos);\r\n    // console.log(\"copiar antes do forEach\");\r\n    this.setState(s => {\r\n      let newCopiados = new Set(s.manejo.copiados.values());\r\n      listaProcessos.forEach(proc => newCopiados.add(proc));\r\n      return {\r\n        botaoClickAtivo: dstStr,\r\n        copyList: listaProcessos,\r\n        manejo: {\r\n          ...s.manejo,\r\n          copiados: newCopiados\r\n        }\r\n      };\r\n    });\r\n    if (!(dstStr === \"\")) {\r\n      this.setState(s => ({\r\n        botoesClickClicados: s.botoesClickClicados.some(d => d === dstStr)\r\n          ? s.botoesClickClicados\r\n          : s.botoesClickClicados.concat(dstStr)\r\n      }));\r\n    }\r\n    (this.textarea as HTMLTextAreaElement).blur();\r\n  };\r\n\r\n  goToPageInputAction = ev => {\r\n    // console.log(\"addSitucao\", ev);\r\n    if (!(ev.nativeEvent.keyCode === 13 || ev.nativeEvent.keyCode === 27)) {\r\n      return;\r\n    }\r\n    if (ev.nativeEvent.keyCode === 27) {\r\n      this.setState({ showGotoPageInput: false }, this.focaNaDivPricincipal);\r\n      return;\r\n    }\r\n    let novo = parseInt((this.gotoinput as HTMLInputElement).value, 10);\r\n    if (novo < 0) {\r\n      novo = this.state.totalPaginas + 1 + novo;\r\n    }\r\n    this.setState({ showGotoPageInput: false }, () => this.pdfGotoPage(novo));\r\n  };\r\n\r\n  handleGetProcesso = async () => {\r\n    if (this.currentPdf.page) {\r\n      const str = (await this.currentPdf.page.getTextContent()).items.map(i => i.str).join(\"\");\r\n      const regex = /\\d{5,7}\\-\\d{2}\\.\\d{4}\\.\\d\\.\\d{2}\\.\\d{4}/gm;\r\n      const matches: string[] = []      \r\n      let m;\r\n\r\n      while ((m = regex.exec(str)) !== null) {\r\n          // This is necessary to avoid infinite loops with zero-width matches\r\n          if (m.index === regex.lastIndex) {\r\n              regex.lastIndex++;\r\n          }          \r\n          // The result can be accessed through the `m`-variable.\r\n          m.forEach((match, groupIndex) => {\r\n              console.log(`Found match, group ${groupIndex}: ${match}`);\r\n              matches.push(match);\r\n          });\r\n      }\r\n\r\n      const uniques = Array.from(new Set(matches))\r\n\r\n      console.log(\"matches: %O\", uniques)\r\n\r\n      this.setState({\r\n        pageProcessos: uniques\r\n      })\r\n\r\n    }\r\n  }\r\n\r\n  loadPDF = async (pdfStr: string) => {\r\n    if (Object.keys(this.eprocessoData).length === 0) {\r\n      console.error('data FAIL', this.eprocessoData)\r\n      return\r\n    }\r\n    if (this.interval) {\r\n      window.clearInterval(this.interval);\r\n    }\r\n    this.setState({ carregando: true, loading: true });\r\n    this.canvas.width = this.canvas.width; // reset canvas\r\n    // console.log(\"loadPDF\");\r\n    if (this.canvas === null) {\r\n      return;\r\n    }\r\n    // this.animaCanvas();\r\n    // let pdfR: PDFDocumentProxy;\r\n    // console.log(this.PDF);\r\n\r\n    try {\r\n      this.currentPdf.numeroProcesso = pdfStr;\r\n      const pdf = await (this.PDF as any).getDocument(\r\n        `http://localhost:${this.props.portServer}/pdf/${pdfStr}.pdf`\r\n      );\r\n      // console.log(\r\n      //   \"\\n\\nMUDANÇA DE PAGINA:\",\r\n      //   pdf,\r\n      //   typeof pdf,\r\n      //   pdf.numPages,\r\n      //   \"\\n\\n\\n\"\r\n      // );\r\n      if (!(this.currentPdf.numeroProcesso === pdfStr)) {\r\n        console.error(\r\n          `Erro! Promessa do PDF atrasou. \r\n        PDF atual: ${this.currentPdf.numeroProcesso}. PDF carrgeado: ${pdfStr}`\r\n        );\r\n        throw \"Erro de carregamento - atraso\";\r\n      }\r\n      this.currentPdf.pdf = pdf;\r\n      let pageNumber = pdf.numPages;\r\n      this.currentPdf.totalPages = pageNumber;\r\n      this.pdfGotoPage(pageNumber);\r\n      this.setState({\r\n        totalPaginas: pageNumber,\r\n        paginaAtual: pageNumber,\r\n        loading: false\r\n      });\r\n    } catch (error) {\r\n      console.log(`Não existe o pdf ${pdfStr}`);\r\n      if (this.interval) {\r\n        window.clearInterval(this.interval);\r\n      }\r\n      if (!this.canvasRenderContext2D) {\r\n        return;\r\n      }\r\n      this.canvasRenderContext2D.fillStyle = \"#eef\";\r\n      this.canvasRenderContext2D.fillRect(0, 0, 1000, 1000);\r\n      this.canvasRenderContext2D.fillStyle = \"#990000\";\r\n      this.canvasRenderContext2D.strokeStyle = \"#000\";\r\n      this.canvasRenderContext2D.font = \"48px Arial\";\r\n      this.canvasRenderContext2D.fillText(`${pdfStr} não baixado`, 100, 300);\r\n      this.eprocessoData[pdfStr][this.sortKey] =\r\n        this.eprocessoData[pdfStr][this.sortKey] + 15;\r\n      this.setState(s => {\r\n        let newProcessosList = s.processosList.sort((a, b) => {\r\n          if (\r\n            this.eprocessoData[a][this.sortKey] >\r\n            this.eprocessoData[b][this.sortKey]\r\n          ) {\r\n            return 1;\r\n          }\r\n          return -1;\r\n        });\r\n        return { processosList: newProcessosList };\r\n      });\r\n    }\r\n  };\r\n\r\n  botaSituacaoNoCanvas = () => {\r\n    // setTimeout(\r\n    //   () => {\r\n    // (this.canvasRenderContext2D as CanvasRenderingContext2D).fillStyle = `rgba(255, 10, 10, 0.27)`;\r\n    // (this.canvasRenderContext2D as CanvasRenderingContext2D).font = '95px Arial Black';\r\n    // (this.canvasRenderContext2D as CanvasRenderingContext2D).textAlign = 'center';\r\n    // (this.canvasRenderContext2D as CanvasRenderingContext2D).rotate(-40 * Math.PI / 180);\r\n    // const situacao: string = this.state.situacao[this.state.selecionado] || '';\r\n    // const canvas = this.canvas || {width: 500, height: 500};\r\n    // (this.canvasRenderContext2D as CanvasRenderingContext2D)\r\n    // .fillText(`${situacao}`, -180, (canvas.height / 2) - 130);\r\n    // (this.canvasRenderContext2D as CanvasRenderingContext2D).setTransform(1, 0, 0, 1, 0, 0);\r\n    // },\r\n    //   0);\r\n  };\r\n\r\n  animaCanvas = () => {\r\n    const qq = Math.floor(Math.random() * 100);\r\n    const ww = Math.floor(Math.random() * 100);\r\n    (this\r\n      .canvasRenderContext2D as CanvasRenderingContext2D).fillStyle = `rgba(${ww}, ${qq}, ${3 *\r\n      qq -\r\n      ww}, 0.1)`;\r\n    this.interval = window.setInterval(() => {\r\n      (this\r\n        .canvasRenderContext2D as CanvasRenderingContext2D).fillStyle = `rgba(${ww}, ${qq}, ${3 *\r\n        qq -\r\n        ww}, 0.1)`;\r\n      const x = Math.floor(Math.random() * 720);\r\n      const y = Math.floor(Math.random() * 720);\r\n      const q = Math.floor(Math.random() * 100);\r\n      const w = Math.floor(Math.random() * 100);\r\n      (this.canvasRenderContext2D as CanvasRenderingContext2D).fillRect(\r\n        x,\r\n        y,\r\n        x + q,\r\n        y + w\r\n      );\r\n      (this.canvasRenderContext2D as CanvasRenderingContext2D).fillRect(\r\n        x,\r\n        y,\r\n        x - q,\r\n        y - w\r\n      );\r\n      (this.canvasRenderContext2D as CanvasRenderingContext2D).fillRect(\r\n        y,\r\n        x,\r\n        x + q,\r\n        y + w\r\n      );\r\n      (this\r\n        .canvasRenderContext2D as CanvasRenderingContext2D).fillStyle = `rgba(0, 0, 0, 0.5)`;\r\n      (this.canvasRenderContext2D as CanvasRenderingContext2D).font =\r\n        \"60px sans-serif\";\r\n      (this.canvasRenderContext2D as CanvasRenderingContext2D).fillText(\r\n        `Carregando`,\r\n        250,\r\n        160\r\n      );\r\n    }, 300);\r\n  };\r\n\r\n  async pdfGotoPage(pageNumber: number) {\r\n    // if (this.currentPdf.pageNumber === pageNumber) {\r\n    //   return\r\n    // }\r\n    // console.group(\"pdfGoTOpage\");\r\n    if (!this.currentPdf.pdf) {\r\n      // console.log(\"PDF não carregado\");\r\n      // console.groupEnd();\r\n      return;\r\n    }\r\n    this.currentPdf.pageNumber = pageNumber;\r\n    const page = await this.currentPdf.pdf.getPage(pageNumber);\r\n    // console.log('%c0', \"font-size: 1.5em; color: red;\")\r\n    this.currentPdf.page = page;\r\n    let viewport: any = page.getViewport(this.currentPdf.zoom as any);\r\n    // console.log('%c1', \"font-size: 1.5em; color: red;\")\r\n    // let contents = await page.getTextContent();\r\n    // console.log(\"contents:\", contents);\r\n\r\n    // console.log('%c1', \"font-size: 1.5em; color: red;\")\r\n    let x = 0;\r\n    if (viewport.width > this.currentPdf.canvasWidth) {\r\n      x = -(viewport.width - this.currentPdf.canvasWidth) / 2;\r\n    }\r\n    let y = viewport.height;\r\n    if (viewport.height > this.currentPdf.canvasHeight) {\r\n      y =\r\n        -(viewport.height - this.currentPdf.canvasHeight) / 2 + viewport.height;\r\n    }\r\n\r\n    // console.log(x, y);\r\n    // console.log(\"viewPort Antes\", viewport);\r\n    viewport.transform[4] = x;\r\n    viewport.transform[5] = y + this.currentPdf.verticalOffset;\r\n\r\n    // console.log(\"viewPort Depois\", viewport);\r\n\r\n    let renderContext = {\r\n      canvasContext: this.canvasRenderContext2D as CanvasRenderingContext2D,\r\n      viewport: viewport\r\n    };\r\n    // console.log(\"Novo Render Context\", renderContext);\r\n    window.clearInterval(this.interval);\r\n    // console.log('%c2', \"font-size: 1.5em; color: red;\")\r\n    if (this.currentPDFRendertask === undefined || !(this.currentPDFRendertask as any)._internalRenderTask.running) {\r\n      // nada\r\n      // console.log('%cok %O', \"font-size: 1.3em; color: green;\", this.currentPDFRendertask)\r\n    } else {\r\n      // console.log('%c-- %O', \"font-size: 1.3em; color: blue;\", this.currentPDFRendertask)\r\n      await this.currentPDFRendertask.cancel()\r\n      // console.log('%c-- %O', \"font-size: 1.3em; color: blue;\", this.currentPDFRendertask)\r\n      // console.log(\r\n      //   '%c > currentRenderTask: %O\\nkeys: %O\\nisRej  : %s\\nisResol: %s \\nprom: %O |', \"font-size: 1.3em; color: darkred;\",\r\n      //   this.currentPDFRendertask,\r\n      //   Object.keys(this.currentPDFRendertask.promise),\r\n      //   this.currentPDFRendertask.promise.isRejected,\r\n      //   this.currentPDFRendertask.promise.isResolved,\r\n      //   this.currentPDFRendertask.promise,\r\n      // )\r\n    }\r\n    this.currentPDFRendertask = page.render(renderContext)\r\n    // console.log('%c3', \"font-size: 1.5em; color: red;\")\r\n    try {\r\n      await this.currentPDFRendertask.promise;\r\n    } catch (error) {\r\n      console.log('%cer? %o', \"font-size: 1.2em; color: pink;\", error)\r\n    } finally {\r\n      console.log('%csettled', \"font-size: 1.3em; color: pink;\")\r\n      // console.log(\"settled\")\r\n    }\r\n    // console.log('%c4', \"font-size: 1.5em; color: red;\")\r\n\r\n\r\n\r\n    // console.log(\"renderTask\", renderTask);\r\n    // console.log(\"renderContext\", renderContext);\r\n    // console.log(\"page\", page);\r\n    // console.groupEnd();\r\n    this.setState(\r\n      s => {\r\n\r\n        if (pageNumber === s.paginaAtual) {\r\n          return null\r\n        }\r\n\r\n        return { paginaAtual: pageNumber, carregando: false, loading: false }\r\n      },\r\n      () => {\r\n        this.focaNaDivPricincipal();\r\n        this.botaSituacaoNoCanvas();\r\n        this.handleGetProcesso();\r\n      }\r\n    );\r\n  }\r\n\r\n  pdfAumentaZoom() {\r\n    let atual = this.currentPdf.zoom;\r\n    let futuro = atual + 0.2;\r\n    this.currentPdf.zoom = futuro;\r\n    this.pdfGotoPage(this.currentPdf.pageNumber as number);\r\n  }\r\n\r\n  pdfDiminuiZoom() {\r\n    let atual = this.currentPdf.zoom;\r\n    let futuro = atual - 0.2;\r\n    this.currentPdf.zoom = futuro;\r\n    this.pdfGotoPage(this.currentPdf.pageNumber as number);\r\n  }\r\n\r\n  pdfSobeVisualizacao() {\r\n    this.currentPdf.verticalOffset = this.currentPdf.verticalOffset - 150;\r\n    this.pdfGotoPage(this.currentPdf.pageNumber as number);\r\n  }\r\n\r\n  pdfBaixaVisualizacao() {\r\n    this.currentPdf.verticalOffset = this.currentPdf.verticalOffset + 150;\r\n    this.pdfGotoPage(this.currentPdf.pageNumber as number);\r\n  }\r\n\r\n  pdfPagProxima() {\r\n    if (!this.currentPdf.pageNumber) {\r\n      return;\r\n    }\r\n    if (this.currentPdf.pageNumber === this.currentPdf.totalPages) {\r\n      return;\r\n    }\r\n    this.pdfGotoPage(this.currentPdf.pageNumber + 1);\r\n  }\r\n\r\n  pdfPagAnterior() {\r\n    if (!this.currentPdf.pageNumber) {\r\n      return;\r\n    }\r\n    if (this.currentPdf.pageNumber === 1) {\r\n      return;\r\n    }\r\n    this.pdfGotoPage(this.currentPdf.pageNumber - 1);\r\n  }\r\n\r\n  focaNaDivPricincipal() {\r\n    // console.log(\"focaNaDivPricncipal()\", document.activeElement);\r\n    if (!this.divPrincipal.current) {\r\n      // console.log(\"owxe...\");\r\n      return;\r\n    }\r\n    this.divPrincipal.current.focus();\r\n    // console.log(\" + focaNaDivPricncipal() >>> \", document.activeElement);\r\n  }\r\n\r\n  limpaSituacao = () => {\r\n    this.setState(s => {\r\n      let newSituacao = s.situacao;\r\n      delete newSituacao[s.selecionado];\r\n      return { situacao: newSituacao };\r\n    });\r\n  };\r\n\r\n  addBaixado = (processo: string) => {\r\n    if (this.state.downloaded.has(processo)) {\r\n      return\r\n    }\r\n    this.setState((state) => {\r\n      const newSet = state.downloaded;\r\n      newSet.add(processo)\r\n      return { downloaded: newSet }\r\n    })\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.canvas) {\r\n      this.canvas.height = this.currentPdf.canvasHeight;\r\n      this.canvas.width = this.currentPdf.canvasWidth;\r\n      this.canvasRenderContext2D = this.canvas.getContext(\"2d\");\r\n      // console.log(this.canvasRenderContext2D);\r\n      // console.log('%cprops.data', 'background-color: purple; color: white; font-size: 1.2em', this.props.data)\r\n    }\r\n  }\r\n\r\n  render() {\r\n\r\n    const posWidth = window.innerWidth / 2;\r\n    const posHeight = window.innerHeight / 2;\r\n\r\n    const divCanvas = (\r\n      <div\r\n        className=\"div-canvas-situacao\"\r\n        style={{\r\n          left: posWidth + Math.floor(Math.random() * 10),\r\n          top: posHeight - 500 + Math.floor(Math.random() * 10),\r\n          display: this.state.loading ? 'none' : 'block'\r\n        }}\r\n      >\r\n        {this.state.situacao[this.state.selecionado]}\r\n      </div>\r\n    );\r\n\r\n    const todasSitu = Object.keys(this.state.situacao).reduce(\r\n      (acc, atu) => acc.add(this.state.situacao[atu]),\r\n      new Set()\r\n    );\r\n\r\n    this.state.destinos.forEach(destino => {\r\n      todasSitu.add(destino);\r\n    });\r\n\r\n    // console.log(\"TODASSITU --> \", todasSitu, this.outerDiv);\r\n    return (\r\n      <Context.Provider value={this.state}>\r\n        {this.state.loading && <LoadingComponent />}\r\n        <div\r\n          ref={this.divPrincipal}\r\n          className=\"App\"\r\n          tabIndex={0}\r\n          onKeyDown={e => this.handlePress(e)}\r\n          style={{ position: \"relative\", maxWidth: \"100vw\" }}\r\n        >\r\n          <DocInfo db={this.db} pagAtual={this.state.paginaAtual} processo={this.state.selecionado} />\r\n\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              flexDirection: \"column\"\r\n            }}\r\n          >\r\n            <div id=\"outer_div\" ref={node => (this.outerDiv = node)}>\r\n              {divCanvas}\r\n              <canvas\r\n                style={{ zIndex: 2 }}\r\n                ref={n => (this.canvas = n)}\r\n                id=\"pdfcanvas\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"div-wrap-flex\">\r\n              {this.state.processosList.map(proc => (\r\n                <Processo\r\n                  key={\"lis\" + proc}\r\n                  processo={proc}\r\n                  procObj={this.eprocessoData[proc]}\r\n                  downloaded={this.state.downloaded.has(proc)}\r\n                />\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <div\r\n            className=\"div-wrap-flex botoes-copiar-div\"\r\n            style={{ margin: \"1em\" }}\r\n          >\r\n            {Array.from(todasSitu).map((dst: any) => {\r\n              return (\r\n                <Listagem\r\n                  key={\"lis_\" + dst}\r\n                  dst={dst}\r\n                  copy={this.copy}\r\n                  situacao={this.state.situacao}\r\n                  separador={this.state.separador}\r\n                  botaoAtivo={dst === this.state.botaoClickAtivo}\r\n                  clicado={this.state.botoesClickClicados.some(s => s === dst)}\r\n                />\r\n              );\r\n            })}\r\n          </div>\r\n          <button\r\n            onClick={() =>\r\n              this.setState(s => ({\r\n                separador: s.separador === \",\" ? \"\\n\" : \",\"\r\n              }))\r\n            }\r\n          >\r\n            Separador: {this.state.separador}\r\n          </button>\r\n          <button\r\n            onClick={() => this.deleteArquivos(this.state.copyList.join(\",\"))}\r\n          >\r\n            deletar {this.state.botaoClickAtivo}\r\n          </button>\r\n          <textarea\r\n            style={{\r\n              margin: \"0px\",\r\n              width: \"100%\",\r\n              height: \"5em\",\r\n              border: \"2px solid rgb(169, 169, 169)\",\r\n              backgroundColor: \"rgb(240, 245, 255)\",\r\n              padding: \"1em\",\r\n              boxSizing: \"border-box\",\r\n              resize: \"vertical\"\r\n            }}\r\n            ref={node => (this.textarea = node)}\r\n          />\r\n          {this.state.showInput && (\r\n            <div\r\n              style={{\r\n                position: \"fixed\",\r\n                right: 30,\r\n                top: 100,\r\n                margin: \"auto\",\r\n                padding: 20,\r\n                backgroundColor: \"#003876\",\r\n                boxShadow: \"15px 15px 20px #000\",\r\n                zIndex: 4\r\n              }}\r\n            >\r\n              <input\r\n                ref={node => (this.input = node)}\r\n                onKeyDown={e => this.addSituacao(e)}\r\n                style={{\r\n                  fontSize: \"3em\",\r\n                  padding: 10\r\n                }}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {this.state.showGotoPageInput && (\r\n            <div\r\n              style={{\r\n                position: \"fixed\",\r\n                right: 30,\r\n                bottom: 200,\r\n                margin: \"auto\",\r\n                padding: 20,\r\n                backgroundColor: \"#003876\",\r\n                boxShadow: \"15px 15px 20px #000\",\r\n                zIndex: 4\r\n              }}\r\n            >\r\n              <input\r\n                ref={node => (this.gotoinput = node)}\r\n                onKeyDown={this.goToPageInputAction}\r\n                style={{\r\n                  fontSize: \"4em\",\r\n                  padding: 10\r\n                }}\r\n                size={5}\r\n              />\r\n            </div>\r\n          )}\r\n          <div style={{ margin: \"auto\" }}>\r\n\r\n            <NovoSidaConsulta\r\n              host={`http://localhost:${this.props.portServer}`}\r\n              db={this.db}\r\n              eprocessoData={this.props.data as any}\r\n              situacoes={this.state.situacao as any}\r\n              deleteArquivos={this.deleteArquivos}\r\n              loadPdf={this.loadPDF}\r\n\r\n            />\r\n          </div>\r\n\r\n          <InfoHeader\r\n            paginaAtual={this.state.paginaAtual}\r\n            selecionado={this.state.selecionado}\r\n            totalPaginas={this.state.totalPaginas}\r\n            situacao={this.state.situacao[this.state.selecionado]}\r\n            loading={this.state.loading}\r\n          />\r\n          <BottomInfo\r\n            processosListLength={this.state.processosList.length}\r\n            situacaolength={Object.keys(this.state.situacao).length}\r\n            processoObj={this.eprocessoData[this.state.selecionado]}\r\n\r\n          />\r\n\r\n\r\n\r\n          <JSEditor\r\n            endpoints={[\r\n              `http://localhost:${this.props.portServer}/eval_js`,\r\n              `http://localhost:${this.props.portServer}/eval_sida_window_js`\r\n            ]}\r\n            on={false}\r\n          />\r\n<ProcessoScrapper processos={this.state.pageProcessos}/>\r\n<TabelaScrapper info={this.state.dossieProcesso} deleteDossie={this.db.deleteRecord}/>\r\n          <br />\r\n          <br />\r\n          <br />\r\n          {/* <JanelinhaEventsLog /> */}\r\n          <ButtonMutex portServer={this.props.portServer} />\r\n          <DeleteDiff deleteFiles={this.deleteArquivos} />\r\n          <br />\r\n          <br />\r\n          <br />\r\n          <WorkerComponentHandler wsPort={this.props.portServer} dbVersion={this.dbVersion} dbName={this.localStorageKey} />\r\n          <Downloader />\r\n          <DownloadFinishedListener addProcesso={this.addBaixado} />\r\n            ProcessoSc\r\n        </div>\r\n      </Context.Provider>\r\n    );\r\n  }\r\n}\r\n\r\nconst BottomInfo = React.memo((props: {\r\n  situacaolength: number,\r\n  processosListLength: number,\r\n  processoObj: any\r\n}) => {\r\n  return (\r\n    <div\r\n      className=\"bottom-info\"\r\n    >\r\n      <div\r\n        style={{\r\n          backgroundColor:\r\n            props.situacaolength <\r\n              props.processosListLength\r\n              ? \"rgba(0, 0, 0, 0.3)\"\r\n              : \"rgba(255, 100, 100, 0.6)\"\r\n        }}\r\n      >\r\n        {props.situacaolength}\r\n        {\" / \"}\r\n        {props.processosListLength} processos.\r\n            </div>\r\n\r\n      <div>\r\n        <span\r\n          style={{\r\n\r\n            color: \"#fff\",\r\n            backgroundColor: \"rgba(0, 0, 0, 0.4)\"\r\n          }}\r\n        >\r\n          {props.processoObj && props.processoObj[\r\n            \"Nome Último Documento Confirmado\"\r\n          ]}\r\n        </span>\r\n        <span\r\n          style={{ color: \"#000\", backgroundColor: \"rgba(255, 255, 255, 0.4)\" }}\r\n        >\r\n          {props.processoObj && props.processoObj[\r\n            \"Nome Equipe Última\"\r\n          ]}\r\n        </span>\r\n        <span\r\n          style={{ color: \"#fff\", backgroundColor: \"rgba(100, 100, 100, 0.4)\" }}\r\n        >\r\n          {props.processoObj && props.processoObj[\r\n            \"Nome Contribuinte\"\r\n          ]}\r\n        </span>\r\n      </div>\r\n      \r\n    </div>\r\n  )\r\n})\r\n\r\nconst InfoHeader = React.memo(function (props: {\r\n  paginaAtual: number,\r\n  totalPaginas: number,\r\n  selecionado: string,\r\n  situacao: string,\r\n  loading: boolean,\r\n}) {\r\n  if (props.loading) {\r\n    return <div\r\n      className=\"header-info-loading\"\r\n    >\r\n      <h1 className=\"title is-6\">\r\n        CARREGANDO...\r\n      </h1>\r\n    </div>\r\n  }\r\n  return (<div\r\n    className=\"header-info\"\r\n  >\r\n    <h1 className=\"title is-6\">\r\n\r\n      {props.paginaAtual}\r\n      {\" / \"}\r\n      {props.totalPaginas}\r\n      {\" - \"}\r\n      {props.selecionado}\r\n      {props.situacao && \"    |  \"}\r\n      {props.situacao}\r\n    </h1>\r\n\r\n  </div>)\r\n})\r\n\r\nconst DocInfo = function (props: { db: any, pagAtual: number, processo: string }) {\r\n  const [doc, setDoc] = React.useState<string>('')\r\n  const [ant, setAnt] = React.useState<string>('')\r\n  const [i, setIni] = React.useState<number>(0)\r\n\r\n  // console.log('%c props', 'background-color: black; color: white', props)\r\n  React.useEffect(() => {\r\n    (async () => {\r\n      // console.log('%c ...', 'color: red')\r\n      const obj: JanelinhaProcessoInfo | undefined = await props.db.getProcessoDocs(props.processo)\r\n      if (obj === undefined) {\r\n        setDoc('')\r\n        return\r\n      }\r\n      let indice = obj.infos.length - 1\r\n      if (indice < 1) {\r\n        return\r\n      }\r\n      while (true) {\r\n        if (indice < 0) {\r\n          setDoc('')\r\n          return\r\n        }\r\n        const sub = obj.infos[indice]\r\n        // console.log('sub --> ', sub, indice)\r\n        if (sub.pag_inicio <= props.pagAtual && sub.pag_fim >= props.pagAtual) {\r\n          setDoc(sub.nome_doc)\r\n          setIni(sub.pag_inicio)\r\n          if (indice > 0) {\r\n            setAnt(obj.infos[indice - 1].nome_doc)\r\n          }\r\n          return\r\n        }\r\n        indice--\r\n      }\r\n    })()\r\n  }, [props.pagAtual, props.processo])\r\n  return (\r\n    <div className=\"doc-info\">\r\n      <span className=\"doc-info-ant\">\r\n        {ant}\r\n      </span>\r\n      <span className=\"doc-info-i\">\r\n        {i}\r\n      </span>\r\n      <span className=\"doc-info-doc\">\r\n        {doc}\r\n      </span>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","// tslint:disable:no-console\r\n// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the 'N+1' visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL!,\r\n      window.location.toString()\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (!isLocalhost) {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      } else {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker) {\r\n          installingWorker.onstatechange = () => {\r\n            if (installingWorker.state === 'installed') {\r\n              if (navigator.serviceWorker.controller) {\r\n                // At this point, the old content will have been purged and\r\n                // the fresh content will have been added to the cache.\r\n                // It's the perfect time to display a 'New content is\r\n                // available; please refresh.' message in your web app.\r\n                console.log('New content is available; please refresh.');\r\n              } else {\r\n                // At this point, everything has been precached.\r\n                // It's the perfect time to display a\r\n                // 'Content is cached for offline use.' message.\r\n                console.log('Content is cached for offline use.');\r\n              }\r\n            }\r\n          };\r\n        }\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type')!.indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport * as ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport registerServiceWorker from \"./registerServiceWorker\";\r\nimport \"./index.css\";\r\n// import { PDFJSStatic } from \"pdfjs-dist\";\r\nimport * as pdfjs from 'pdfjs-dist';\r\nimport * as pdfWorker from 'pdfjs-dist/build/pdf.worker';\r\n\r\n\r\nconst pdfjsWorkerBlob = new Blob([pdfWorker]);\r\nconst pdfjsWorkerBlobURL = URL.createObjectURL(pdfjsWorkerBlob);\r\n// pdfjs.workerSrc = pdfjsWorkerBlobURL;\r\n\r\n// const pdf = new pdfjs.PDFJS()\r\n// console.log('pdf', pdf)\r\nconst PORT_SERVER: string = (window as any).PORT_SERVER || \"9090\";\r\n\r\n// pdfjs.PDFJS.workerSrc = pdfWorker;\r\n(pdfjs as any).GlobalWorkerOptions.workerSrc = pdfjsWorkerBlobURL;\r\ndeclare const eprocData: object | null;\r\nconsole.log(\"eprocessoData\", eprocData);\r\n\r\n(async function () {\r\n  console.info(\"INICIO:\", pdfjs, pdfWorker);\r\n  let eprocDataFinal: object = { __META__: {} };\r\n  if (eprocData === null) {\r\n    console.log(\"vai atrás do api pq o da janela tá null\");\r\n    try {\r\n      let response = await fetch(`http://localhost:${PORT_SERVER}/json`);\r\n      if (response.status !== 200) {\r\n        console.log(\r\n          \"Problema no Fetch Inicial. Status Code: \" + response.status\r\n        );\r\n        return;\r\n      }\r\n      // Examine the text in the response\r\n      let data = await response.json();\r\n      console.log(\"veio do fetch\");\r\n      eprocDataFinal = data;\r\n    } catch (error) {\r\n      console.log(\"ERRO\", error);\r\n      ReactDOM.render(<h1>Erro</h1>, document.getElementById(\r\n        \"root\"\r\n      ) as HTMLElement);\r\n    }\r\n  } else {\r\n    eprocDataFinal = eprocData;\r\n  }\r\n\r\n  ReactDOM.render(\r\n    <App data={eprocDataFinal} PDFJS={pdfjs as any} portServer={PORT_SERVER} />,\r\n    document.getElementById(\"root\") as HTMLElement\r\n  );\r\n})();\r\n\r\nregisterServiceWorker();\r\n"],"sourceRoot":""}